---
title: アセットパフォーマンスガイド
description: 新しい Digital Asset Management(DAM) 設定に最適なハードウェアサイズ設定を決定する方法と、パフォーマンスの問題をトラブルシューティングする方法について説明します。
contentOwner: User
products: SG_EXPERIENCEMANAGER/6.5/SITES
content-type: reference
topic-tags: configuring
exl-id: fbe15e1b-830b-4752-bd02-0d239a90bc68
source-git-commit: b66ec42c35b5b60804015d340b8194bbd6ef3e28
workflow-type: tm+mt
source-wordcount: '1215'
ht-degree: 16%

---

# アセットパフォーマンスガイド{#assets-performance-guide}

デジタルアセット管理 (DAM) は、パフォーマンスが重要な場合によく使用されます。 ただし、通常の DAM の設定には、パフォーマンスに影響を与える可能性のあるいくつかのハードウェアおよびソフトウェアコンポーネントが含まれています。 このドキュメントでは、次の情報を提供します。

* 新しい Digital Asset Management 設定に最適なハードウェアサイズの決定に関するシステム管理者向けの情報
* パフォーマンスの問題が発生した DAM インスタンスのトラブルシューティングを検討しているソフトウェア開発者向けの情報

## パフォーマンスの問題 {#performance-issues}

デジタルアセット管理のパフォーマンスが低下すると、インタラクティブパフォーマンス、アセット処理、ダウンロード速度の 3 つの方法でユーザーエクスペリエンスに影響を与える可能性があります。 パフォーマンスを向上させるには、観測されたパフォーマンスを適切に測定し、ターゲット指標を確立することが重要です。

**1.インタラクティブな検索と参照** ユーザーは、アセットの検索や DAM Finder の参照を行って、応答時間が遅くなったり、検索結果が即時に表示されないといった問題点を指摘します。これは、インタラクティブなパフォーマンスの問題です。

インタラクティブなパフォーマンスはページの応答時間の観点から測定されます。 HTTP リクエストの受信から HTTP 応答の終了までにかかる時間です。HTTP 応答はリクエストログファイルから判断できます。 一般的なターゲットパフォーマンスは、2 秒未満のページの応答時間です。

**2.アセット処理** アセットの処理に関する問題は、ユーザーがアセットをアップロードする際に、アセットが簡単に変換されてAdobe Experience Manager(AEM)DAM に取り込まれるまで数分かかる場合です。

アセット処理のパフォーマンスは、平均的なワークフロープロセス完了時間に基づいて測定されます。 アセットの更新ワークフロープロセスの呼び出しから完了までにかかる時間です。この時間は、ワークフローレポートのユーザーインターフェイスから判断できます。 一般的なターゲットパフォーマンスは、処理されるアセットのサイズと種類、およびレンディションの数によって異なります。 ターゲットのパフォーマンスの例を次に示します。

* 標準レンディションを使用した 1280 x 1280 ピクセル未満の画像の場合、10 秒未満
* 標準レンディションを使用した場合、100 MB 未満の画像の場合は 1 分未満
* 1 分未満の短い HD ビデオクリップの場合は 5 分未満

**3.ダウンロード速度**　スループットの問題とは、AEM DAM からのダウンロードに時間がかかり、DAM Admin または DAM Finder を閲覧したときにサムネールがすぐに表示されないことを指します。

スループットパフォーマンスは、ダウンロードレート（キロビット/秒）の観点で測定されます。 一般的なターゲットパフォーマンスは 300 Kbps （100 の同時ダウンロードの場合）です。

**4. アセット処理のパフォーマンスに影響を与える要因**

アセットを処理するために必要なハードウェアを見積もるには、次の点を考慮する必要があります。

* ピクセル数での画像の解像度
* AEMプロセスに割り当てられたヒープ

画像に含まれるピクセル数によって処理時間が決まります。ピクセル数が多いと、処理に時間がかかります。
画像タイプ、圧縮率または画像が格納されているファイルの関連サイズは、全体的なパフォーマンスに大きく影響しません。

ヒープが最も重要な制限要因と見なされました。 アセットが使用可能な空きメモリを超えると、処理パフォーマンスは急速に低下します。

DAM プロセスは、大量の場合に並行して実行するのに適しています。 アセットをマルチコアプロセッサーを使用してバッチでアップロードすることで、アセットあたりの絶対的な実行時間が短縮します。

**5. アセット処理を実行するためのハードウェア要件の見積もり**

デジタルアセットを広範に処理するには、最適化されたハードウェアリソースが必要です。最も関連する要因は、画像サイズと処理済み画像のピークスループットです。

16 GB 以上のヒープを割り当て、[Camera Raw パッケージ](/help/assets/camera-raw.md)を使用して Raw 画像を取り込むように、[!UICONTROL DAM アセット更新]ワークフローを設定します。

## システムについて {#understanding-the-system}

一般的な DAM の設定は、ロードバランサーを介して DAM にアクセスするエンドユーザーで構成されます。 DAM インスタンスは、クラスター化設定の一部で、各 DAM インスタンスは、物理マシンまたは仮想マシン上の Java™仮想マシンプロセスで実行される場合があります。 DAM ストレージは、単一マシンの設定がある場合は RAID ディスクによって提供され、クラスター設定がある場合は管理対象のネットワーク接続ストレージによって提供されます。

以下の凡例では、パフォーマンスの落とし穴となりうる部分を、適宜、解決策とともに説明しています。

**エンドユーザーへのネットワーク接続** ネットワーク接続が遅いとスループットの問題が発生する場合があり、まれに遅延の問題も発生することがあります。 ISP（特にイントラネット）からの接続が遅い場合があります。 これは、誤ったネットワークトポロジの兆候です。

**一時ファイルシステム** ローカルファイルシステムの速度が遅いと、検索インデックスがローカルディスクに保存されるので、特に検索時にインタラクティブパフォーマンスの問題が発生する可能性があります。 また、コマンドラインプロセスを使用している場合に、アセット処理の問題が発生する可能性があります。

**AEM DAM ファインダー**　検索で発生することが多いインタラクティブパフォーマンスの問題は、高い CPU 使用率が原因となります。CPU 使用率が高くなるのは、同一のインスタンス上に、多くの同時ユーザーまたは CPU を利用する他のプロセスが存在するからです。仮想マシンから専用マシンに移行し、他のサービスを実行しないようにすることで、パフォーマンスを向上させることができます。 アセット処理と多数の同時ユーザーが原因で CPU 負荷が高くなる場合は、クラスターノードを追加することをお勧めします。

**AEM DAM ワークフロー** アセットが取り込まれるときに、長時間実行されるワークフロープロセスが原因で、アセット処理のパフォーマンスの問題が発生します。処理されるアセットの種類に応じて、CPU の使用率が過剰になっている可能性があります。 Day では、システム上で実行される他のプロセスの数を減らし、クラスターノードを追加して使用可能な CPU の数を増やすことをお勧めします。

**NAS 接続性** NAS へのネットワーク接続が低速だと、インタラクティブパフォーマンスの問題が発生します。これは、ネットワーク遅延が原因で、アセット処理中の新しいノードへのアクセス速度が遅くなるからです。また、低速なネットワークスループットは、スループットに悪影響を与えますが、レンディションの読み込みと保存が遅くなるので、アセット処理のパフォーマンスにも影響します。

NAS での遅延とスループットが悪い理由は、ネットワークトポロジーまたは他のサービスによる NAS の過剰使用です。

**ネットワーク接続ストレージ** 使い過ぎたネットワーク接続型ストレージ・システムは、次のような問題のアレイを引き起こす可能性があります。

* ディスク容量の不足は、DAM プロジェクトのサイズを適切に調整することで防ぐことができる問題の頻度が高くなります。
* ディスクのレイテンシが高いと、CRX のアクセス時間が遅くなり、インタラクティブなパフォーマンスの問題が発生する場合があります。
* ディスクスループットが低いと、CQ5 DAM のパフォーマンスが低下する場合があります。

## パフォーマンスのテスト {#testing-for-performance}

すべての DAM プロジェクトで、ボトルネックを迅速に特定して解決できるパフォーマンステスト体制を確立してください。 そのためには、次のチェックポイントを考慮します。

1. JMeter を使用したエンドツーエンドのパフォーマンステスト — サンプルの検索と参照セッションをシミュレートして、インタラクティブなパフォーマンスの問題を検出します。
1. JMeter を使用したスループットと待ち時間のテスト — クライアントコンピューターで実行すると、トポロジに関する問題が発生しないことを確認できます。
1. 標準化されたアセット処理テスト — いくつかのサンプルアセットを取り込み、時間を測定します。 これには、外部ワークフロー統合を含める必要があります。
1. 各クラスタノードの CPU、ディスク、メモリ使用率を監視します。
1. CRX の読み取り/書き込みパフォーマンス診断を使用して、処理に関連しない問題を特定します。
1. DAM クラスターから NAS へのネットワーク遅延とスループットを監視します。
1. 可能な場合は、NAS 上で直接、パフォーマンスとディスク・レイテンシをテスト、読み取り、書き込みします。

## ボトルネックの調整 {#tweaking-bottlenecks}

これまでのプロジェクトでは、次のパフォーマンス調整が使用されています。

* レンディションの選択的生成：アセット処理ワークフローに条件を追加して、必要なレンディションのみを生成します。そのため、一部のアセットに対してのみ、よりコストのかかるレンディションが生成されます。
* インスタンス間で共有データストア：ディスク容量が少ない場合は、設定作業を増やし、データストアの自動クリーンアップを失うというコストで、必要なディスク容量を大幅に削減できます。

## 参考情報 {#further-reading}

* [遅延しているプロセスおよびブロックされたプロセスの分析](https://helpx.adobe.com/jp/experience-manager/kb/AnalyzeSlowAndBlockedProcesses.html)
