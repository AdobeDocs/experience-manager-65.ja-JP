---
title: インタラクティブ通信内でグラフを使用する
seo-title: インタラクティブ通信内のグラフコンポーネント
description: インタラクティブ通信でグラフを使用すると、大量の情報を簡単に分析できる視覚的な形式にまとめることができます
seo-description: AEM Forms には、インタラクティブ通信内でグラフを作成するためのグラフコンポーネントが用意されています。ここでは、グラフコンポーネントの基本的な設定とエージェント設定について説明します。
uuid: 978aa431-9a5b-4964-b37c-7bfa8c3f49b9
content-type: reference
topic-tags: interactive-communications
products: SG_EXPERIENCEMANAGER/6.5/FORMS
discoiquuid: e21714ad-d445-4aff-b0db-d577061e0907
docset: aem65
feature: インタラクティブコミュニケーション
exl-id: 0f877a15-a17f-427f-8d89-62ada4d20918
source-git-commit: b220adf6fa3e9faf94389b9a9416b7fca2f89d9d
workflow-type: tm+mt
source-wordcount: '2648'
ht-degree: 24%

---

# インタラクティブ通信内でグラフを使用する{#using-charts-in-interactive-communications}

表やグラフはデータを視覚的に表現します。インタラクティブ通信で大量の情報を分かりやすい視覚的な形式で表現することにより、複雑なデータを視覚的に理解して分析することができます。

インタラクティブ通信を作成する際にグラフを追加することにより、インタラクティブ通信のフォームデータモデルから取得した 2 次元のデータを視覚的に表現することができます。グラフコンポーネントを使用すると、次のタイプのグラフを追加および設定できます。円、列、ドーナツ、棒、線、線と点、点、面、四半円点。

## インタラクティブ通信にグラフを追加して設定する{#add-and-configure-chart-in-an-interactive-communication}

インタラクティブ通信にグラフを追加して構成するには、次の手順を実行します。

1. インタラクティブ通信のサイドキックから&#x200B;**コンポーネント**&#x200B;をタップします。
1. **グラフ**&#x200B;コンポーネントを次のコンポーネントの1つにドラッグ&amp;ドロップします。

   * 印刷チャネル：ターゲット領域または画像フィールド
   * Webチャネル：パネルまたはターゲット領域

1. インタラクティブ通信エディターでグラフコンポーネントをタップし、コンポーネントツールバーから「**[!UICONTROL 設定(]** ![configure_icon](assets/configure_icon.png))」を選択します。

   左側のペインにグラフのプロパティが表示されます。

   ![印刷チャネルの線グラフの基本プロパティ](assets/chart_properties_print_new.png)

   印刷チャネルの線グラフの基本プロパティ

   ![Web チャネルの線グラフの基本プロパティ](assets/chart_properties_web_new.png)

   Web チャネルの線グラフの基本プロパティ

1. チャネルタイプに基づいて[グラフのプロパティ](../../forms/using/chart-component-interactive-communications.md#configure-chart-properties)を設定します。
1. （印刷チャネルのみ）「**[!UICONTROL エージェントの設定]**」で、エージェントがこのグラフを使用する必要があるかどうかを指定します。 「 **[!UICONTROL このグラフを使用するエージェントに必須です]** 」オプションが選択されていない場合は、エージェントUIの「**[!UICONTROL コンテンツ]** 」タブでグラフの目のアイコンをタップして、グラフの表示/非表示を切り替えることができます。

   ![chart_agentproperties](assets/chart_agentproperties.png)

1. ![done_icon](assets/done_icon.png)をタップして、グラフのプロパティを保存します。

   「**[!UICONTROL プレビュー]**」をタップして、グラフに関連付けられた外観とデータを表示します。 「**[!UICONTROL 編集]**」をタップして、グラフのプロパティを再設定します。

## グラフのプロパティ{#configure-chart-properties}を設定します。

印刷チャネルとWebチャネルのグラフを作成する際に、次のプロパティを設定します。

<table>
 <tbody>
  <tr>
   <td>フィールド</td>
   <td>説明</td>
   <td>チャネルタイプ</td>
  </tr>
  <tr>
   <td>名前</td>
   <td>グラフ要素の識別子。 このフィールドで指定されたグラフの名前は、グラフに表示されません。 他のコンポーネント、スクリプト、SOM式の要素を参照する際に使用されます。</td>
   <td>印刷出力と Web 出力</td>
  </tr>
  <tr>
   <td>グラフのタイプ</td>
   <td>生成するグラフのタイプ。 使用可能なオプションは、円グラフ、列グラフ、ドーナツグラフ、棒グラフ、線グラフ、線とポイントグラフ、ポイントグラフ、領域グラフです。</td>
   <td>印刷出力と Web 出力</td>
  </tr>
  <tr>
   <td>系列/複数系列</td>
   <td>X軸とY軸にプロットされたフォームデータモデルコレクション項目の複数の系列を追加する場合に選択します。</td>
   <td>印刷出力と Web 出力</td>
  </tr>
  <tr>
   <td>系列/データモデルオブジェクト</td>
   <td>グラフに複数の系列を追加するフォームデータモデルコレクション項目の名前です。<br /> X軸とY軸にプロットされるプロパティに対して、親フォームデータモデルオブジェクトプロパティを選択し、意味のある系列を作成します。連結するデータモデルオブジェクトは、数値、文字列、日付のいずれかの型にする必要があります。</td>
   <td>印刷出力と Web 出力</td>
  </tr>
  <tr>
   <td>積み上げを表示</td>
   <td>各系列の値を互いの上に積み上げるように選択します。</td>
   <td>印刷出力と Web 出力</td>
  </tr>
  <tr>
   <td>X 軸／タイトル</td>
   <td>X軸のタイトル。</td>
   <td>印刷出力と Web 出力</td>
  </tr>
  <tr>
   <td>X軸/データモデルオブジェクト</td>
   <td><p>X軸に印刷するフォームデータモデルコレクション項目の名前です。</p> <p>グラフのX軸とY軸に対してプロットする、互いに関連して意味のある同じ親データモデルオブジェクトの2つのコレクション/配列タイプのプロパティを選択します。 連結するデータモデルオブジェクトは、数値、文字列、日付のいずれかの型にする必要があります。</p> </td>
   <td>印刷出力と Web 出力</td>
  </tr>
  <tr>
   <td>Y 軸／タイトル</td>
   <td>Y軸のタイトル。 </td>
   <td>印刷出力と Web 出力</td>
  </tr>
  <tr>
   <td>Y軸/データモデルオブジェクト</td>
   <td><p>Y軸にプロットするフォームデータモデルコレクション項目。 印刷チャネルでは、Y軸のデータモデルオブジェクトは数値型である必要があります。</p> <p>グラフのX軸とY軸に対してプロットする、互いに関連して意味のある同じ親データモデルオブジェクトの2つのコレクション/配列タイプのプロパティを選択します。 </p> </td>
   <td>印刷出力と Web 出力</td>
  </tr>
  <tr>
   <td>Y 軸／関数</td>
   <td>Y軸の値の計算に使用する統計/カスタム関数。</td>
   <td>印刷出力と Web 出力</td>
  </tr>
  <tr>
   <td>オブジェクトを非表示</td>
   <td>「 」を選択すると、最終出力でグラフが非表示になります。</td>
   <td>印刷出力と Web 出力</td>
  </tr>
  <tr>
   <td>タイトル</td>
   <td>グラフのタイトル。 </td>
   <td>印刷出力</td>
  </tr>
  <tr>
   <td>高さ</td>
   <td>グラフの高さ（ピクセル単位）。</td>
   <td>印刷出力</td>
  </tr>
  <tr>
   <td>幅</td>
   <td>グラフの幅（ピクセル単位）。Web チャネルのグラフの幅については、スタイルレイヤーを使用するかテーマを適用して調整することができます。</td>
   <td>印刷出力</td>
  </tr>
  <tr>
   <td>前に改ページが必須</td>
   <td>新しいページの先頭にグラフが表示されるようにグラフの前に改ページを追加する場合は、このプロパティを選択します。 </td>
   <td>印刷出力</td>
  </tr>
  <tr>
   <td>後に必須の改ページ</td>
   <td>新しいページの先頭にグラフのコンテンツが表示されるようにグラフの後ろに改ページを追加する場合は、このプロパティを選択します。 </td>
   <td>印刷出力</td>
  </tr>
  <tr>
   <td>インデント</td>
   <td>ページの左からのグラフのインデント。 </td>
   <td>印刷出力</td>
  </tr>
  <tr>
   <td>ツールヒント</td>
   <td><p>Webチャネルのグラフ内のデータポイントにマウスを置くと表示されるツールチップの形式。 デフォルト値は${x}(${y})です。 グラフの種類に応じて、グラフ内のポイント、棒またはスライスにマウスを置くと、変数${x}および${y}がX軸とY軸の対応する値に動的に置き換えられ、ツールチップに表示されます。</p> <p>ツールチップを無効にするには、「<span class="uicontrol">ツールチップ</code>」フィールドを空白のままにします。 このオプションは線グラフと領域グラフには適用できません。例えば、<a href="#chartoutputprintweb">例1を参照してください。印刷とWebでのグラフ出力</a>。</code></p> </td>
   <td>Web</td>
  </tr>
  <tr>
   <td>グラフ固有の設定</td>
   <td><p>共通の設定に加えて、次のようなグラフ固有の設定を使用できます。</p>
    <ul>
     <li><strong>凡例を表示： </strong>有効な場合、円グラフまたはドーナツグラフの凡例を表示します。</li>
     <li><strong>凡例の位置： </strong>グラフを基準にした凡例の位置を指定します。使用できるオプションは、右端、左端、上、下です。印刷チャネルでは、右側の凡例を使用することをお勧めします。</li>
     <li><strong>内側の半径</strong>:ドーナツグラフで使用でき、グラフ内の内側の円の半径をピクセル単位で指定できます。</li>
     <li><strong>線の色</strong>:折れ線グラフ、折れ線グラフ、ポイントグラフ、面グラフで、グラフ内の線の色を指定できます。</li>
     <li><strong>ポイントカラー</strong>:点グラフと線グラフと点グラフで、グラフ内の点の色を指定できます。<br /> </li>
     <li><strong>領域の色</strong>:[面グラフ]では、グラフの線の下の領域の色を指定できます。</li>
     <li><strong>参照点/連結タイプ： </strong>参照点の連結タイプを指<strong> </strong>定するために、象限グラフで使用できます。スタティックテキストまたはデータモデルオブジェクトのプロパティを使用して、参照ポイントの値を定義します。</li>
     <li><strong>参照点&gt; X軸： </strong>[バインドの種類]ドロップダウンリ <span class="uicontrol"></code> ストから[静止]を選択して、参照点のX軸の値を指定すると、四半円グラフで使用できます。</code></li>
     <li><strong>参照点&gt; Y軸： </strong>[バインドタイプ]ドロップダウンリ <span class="uicontrol"></code> ストから[静止]を選択して、参照点のY軸値を指定すると、四半円グラフで使用できます。</code></li>
     <li><strong>シリーズの参照点/データモデルオブジェクト： </strong>[連結タイプ]ドロップダウンリストから[データモデ <span class="uicontrol">ルオブジ</code> ェクト]を選択した場合、複数の系列の象限グラフで使用できます。基準点の系列を特定するためのフォームデータモデルオブジェクトのプロパティを定義してください. </code></li>
     <li><strong>系列の参照点/データモデルオブジェクト値： </strong>[連結タイプ]ドロップダウンリストから[データモデ <span class="uicontrol">ルオブジ</code> ェクト]を選択した場合、複数の系列の象限グラフで使用できます。シリーズのフォームデータモデルオブジェクトプロパティと、このフィールドで定義された値を使用して、参照ポイントのシリーズを識別します。</code></li>
     <li><strong>参照点/参照点のデータモデルオブジェクト： </strong>[連結タイプ]ドロップダウンリストから[デー <span class="uicontrol">タモデ</code> ルオブジェクト]を選択した場合、象限グラフで使用できます。X軸とY軸にプロットされたプロパティの兄弟であるフォームデータモデルオブジェクトプロパティを定義します。 さらに、複数の系列の場合は、系列に対して定義されたデータモデルオブジェクトプロパティの子エンティティであるデータモデルオブジェクトプロパティを定義します。</code></li>
     <li><strong>参照点/参照点のデータモデルオブジェクト値： </strong>[連結タイプ]ドロップダウンリストから[デー <span class="uicontrol">タモデ</code> ルオブジェクト]を選択した場合、象限グラフで使用できます。参照点のフォームデータモデルオブジェクトプロパティと、このフィールドで定義された値を使用して、グラフの参照点を指定します。<br /> <strong>象限ラベル/左上：</strong> 象限グラフで、左上象限の名前を指定できます。</code></li>
     <li><strong>象限ラベル/右上：</strong> 象限グラフで、右上象限の名前を指定できます。</li>
     <li><strong>象限ラベル/右下： </strong>右下の象限の名前を指定するには、象限グラフで使用できます。</li>
     <li><strong>象限ラベル&gt;左下： </strong>[四半円点]グラフで、[左下]象限の名前を指定できます。</li>
    </ul> </td>
   <td>印刷出力と Web 出力</td>
  </tr>
 </tbody>
</table>

## グラフでの関数の使用 {#use-functions-in-chart}

統計関数を使用するようにグラフを設定し、ソースデータの値を計算して、グラフにプロットできます。グラフ内で関数を適用すると、フォームデータモデルでは直接指定できないデータを描画することができます。

![グラフの機能](assets/functions_charts_new.png)

グラフコンポーネントには組み込み関数がいくつかありますが、[カスタム関数](#customfunctionsweb)を記述して、Webチャネルのグラフ設定で使用できるようにすることができます。

デフォルトでは、以下の関数をグラフコンポーネントに使用できます。

**平均（平均）** 一方の軸にある特定の値のX軸またはY軸の値の平均を返します。

**** Sum他の軸にある特定の値のX軸またはY軸のすべての値の合計を返します。

**** Maximum他の軸にある特定の値のX軸またはY軸の最大値を返します。

**** FrequencyX軸またはY軸の値の数を返します。

**** 範囲X軸またはY軸の値の最大値と最小値の差を返します。

**** 中央値X軸またはY軸の値の上半分と下半分を分ける値を返します。

**** MinimumX軸またはY軸の値のうち、一方の軸にある特定の値の最小値を返します。

**** Mode他の軸にある特定の値のX軸またはY軸で最も多く出現する値を返します。

詳しくは、[例2を参照してください。折れ線グラフ](#applicationsumfrequency)での和関数と頻度関数の適用。

### Webチャネルのカスタム関数 {#customfunctionsweb}

グラフでデフォルトの関数を使用するだけでなく、JavaScript™ でカスタム関数を作成し、Web チャネル用のグラフコンポーネントの関数リストにその関数を追加することもできます。

関数は入力された配列または値、カテゴリ名を使用して、値を返します。以下に例を示します。

```javascript
Multiply(valueArray, category) {
 var val = 1;
 _.each(valueArray, function(value) {
 val = val * value;
 });
 return val;
}
```

カスタム関数を作成したら、以下を実行してグラフの設定で使用できるようにします。

1. 該当するインタラクティブ通信に関連付けられているクライアントライブラリにカスタム関数を追加します。詳しくは、[送信アクションの設定](/help/forms/using/configuring-submit-actions.md)および[クライアント側ライブラリの使用](/help/sites-developing/clientlibs.md)を参照してください。

1. 関数ドロップダウンにカスタム関数を表示するには、CRXDe Liteで、次のプロパティを持つappsフォルダー内に`nt:unstructured`ノードを作成します。

   * プロパティ`guideComponentType`を追加し、値を`fd/af/reducer`にします。 (mandatory)

   * カスタムJavaScript™関数の完全修飾名にプロパティ`value`を追加します。 （必須）を入力し、値をMultiplyなどのカスタム関数の名前に設定します。
   * 「関数」ドロップダウンに表示されるカスタム関数の名前として表示する値を持つプロパティ`jcr:description`を追加します。 例えば、**Multiply** と表示されます。

   * カスタム関数の簡単な説明となる値を持つプロパティ`qtip`を追加します。 「**関数**」ドロップダウンリスト内の関数名にポインターを置くと、ここで指定した説明がツールヒントとして表示されます。

1. 「**すべて保存**」をクリックして設定を保存します。

これで関数をグラフで使用できるようになります。

## 例 1：印刷チャネルと Web チャネルのグラフ出力 {#chartoutputprintweb}

「基本」タブでは、グラフの種類、データを含むソースフォームデータモデルのプロパティ、グラフのX軸とY軸にプロットするラベル、およびオプションでグラフにプロットする値を計算する統計関数を定義します。

ここでは、インタラクティブ通信を使用して生成されるカードステートメントを利用して、基本プロパティで必要な最小限の情報について詳しく説明します。 具体的な例として、取引明細に記載されている様々な支払額を描画するグラフを生成する場合を考えてみます。この例では、インタラクティブ通信の印刷出力と Web 出力で、異なるタイプのグラフを使用します。

### 印刷用の縦棒グラフ {#columnchartprint}

これをおこなうには、次のプロパティを指定します。

* **[!UICONTROL 名前]**  — グラフの名前を指定します。
* **[!UICONTROL グラフのタイプ]**  — ドロッ **** プダウンリストから「列」を選択します。
* **[!UICONTROL タイトル]**  - X軸の「費用タイプ」とY軸の「取引金額」を指定します。
* **[!UICONTROL データモデルオブジェクト]**  - X軸（費用タイプ）とY軸（トランザクション金額）のデータ連結を作成するデータモデルオブジェクトのプロパティを選択します。

![インタラクティブ通信の印刷チャネルの縦棒グラフ](assets/sample_chart_print_column_new.png)

インタラクティブ通信の印刷チャネルの縦棒グラフ

### Web用ドーナツグラフ {#donutchartweb}

これをおこなうには、次のプロパティを指定します。

* **[!UICONTROL 名前]**  — グラフの名前を指定します。
* **[!UICONTROL グラフのタイプ]**  — ドロッ **** プダウンリストから「ドーナツ」を選択します。
* **[!UICONTROL データモデルオブジェクト]**  - X軸（費用タイプ）とY軸（トランザクション金額）のデータ連結を作成するデータモデルオブジェクトのプロパティを選択します。
* **[!UICONTROL 内側の半径]**  - 「内側の半径」の値を150に指定して、グラフ内の内側の円の半径をピクセル単位で指定します。
* **[!UICONTROL ツールチップ]**  — デフォルトの形式${x}(${y})を使用してツールチップを表示します。ツールチップは次のように表示されます。経費タイプ（取引金額）。 例：Bitcoin(10000)のデビット。

![インタラクティブ通信のWebチャネル内のドーナツグラフ](assets/sample_chart_web_new.png)

インタラクティブ通信のWebチャネル内のドーナツグラフ

## 例 2: 線グラフ内で Sum 関数と Frequency 関数を適用する {#applicationsumfrequency}

グラフ内で関数を適用すると、フォームデータモデルでは直接指定できないデータを描画することができます。この例では、クレジットカード明細の例を使用して、Sum関数とFrequency関数をグラフに適用する方法を説明します。

![2つの「AirBnBの借方」トランザクションを含む関数のない折れ線グラフ](assets/line_chart_web_new.png)

2つの「AirBnBの借方」トランザクションを含む関数のない折れ線グラフ

### Sum 関数 {#sum-function}

Sum 関数を適用することにより、同じデータプロパティの複数のインスタンスの値を合計し、グラフ上で 1 つの項目として表示することができます。例えば、次のグラフでは、AirBnBトランザクションの2つのDebitの金額を合計するために、Y軸にSum関数を適用し（2050と1050）、1つのトランザクションのみを表示します(3100)。

同じデータプロパティで複数のインスタンスが存在する場合は、Sum 関数を適用して合計値を表示すると、グラフが見やすくなります。

![折れ線グラフの合計](assets/line_chart_web_sum_new.png)

### Frequency 関数 {#frequency-function}

Frequency関数は、一方の軸にある特定の値のY軸の値の数を返します。 Y軸にFrequency関数(Transaction Amount)を適用すると、AirBnBトランザクションのDebitが2回発生し、残りのトランザクションが1回発生したことがグラフに表示されます。

![折れ線グラフの頻度](assets/line_chart_web_functions_frequency_new.png)

## 例3:Webの複数系列の象限グラフ{#example-multi-series-quadrant-chart-in-web}

グラフには、特定の日付範囲で実行されたトランザクションの金額が描画されます。 四半円グラフでは、グラフ領域を4つのラベル付きのセクションに分割できます。 文字は、X軸とY軸に静的な基準点を使用します。 複数シリーズ機能を使用して、銀行の名前に基づいてデータを区別します。

これをおこなうには、次のプロパティを指定します。

* **名前：** グラフの名前を指定します。
* **グラフのタイプ：** ドロップダ **** ウンリストから「Quadrant」を選択します。

* 「**複数シリーズ**」チェックボックスをオンにします。
* **データモデルオブジェクト**:系列のデータモデルオブジェクトプロパティを指定します。銀行名のデータ・モデル・オブジェクト・プロパティは、X軸とY軸でプロットされたデータ・モデル・オブジェクト・プロパティの親です。
* **データモデルオブジェクト：** X軸（トランザクション日）とY軸（トランザクション金額）のデータ連結を作成するには、データモデルオブジェクトのプロパティを選択します。
* 「**基準点**」セクションで、「連結タイプ」として「**静的**」を選択します。

* X軸とY軸の参照点の値を指定します。
* [左上]、[右上]、[右下]、[左下]の象限ラベルを指定します。
* 「**凡例を表示**」チェックボックスを選択して、バンク名のカラーコードを表示します。

![象限グラフ](assets/charts_quadrant_example_new.png)
