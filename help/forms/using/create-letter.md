---
title: レターの作成
description: このトピックでは、レターの作成、レターへのデータモジュールと添付ファイルの追加、Correspondence Management でのレターのプレビューの手順を説明します。
products: SG_EXPERIENCEMANAGER/6.4/FORMS
topic-tags: correspondence-management
feature: Correspondence Management
exl-id: 2f996a50-7c7d-41b6-84b2-523b6609254b
solution: Experience Manager, Experience Manager Forms
role: Admin, User, Developer
source-git-commit: f6771bd1338a4e27a48c3efd39efe18e57cb98f9
workflow-type: tm+mt
source-wordcount: '3982'
ht-degree: 100%

---

# レターの作成 {#create-letter}

## Correspondence Management のワークフロー {#correspondence-management-workflow}

Correspondence Management のワークフローは、次の 4 つのフェーズで構成されます。

1. テンプレートの作成
1. ドキュメントフラグメントの作成
1. レターの作成
1. 後処理

### テンプレートの作成 {#template-creation}

次の図は、通信テンプレートを作成する際の一般的なワークフローを示しています。

![通信テンプレートを作成する際のワークフロー](assets/01.png)

このワークフローについて説明します。

1. フォーム開発者は、Adobe Forms Designer を使用してレイアウトとフラグメントレイアウトを作成し、CRX リポジトリにアップロードします。レイアウトには、一般的なフォームフィールド、ヘッダーやフッターなどのレイアウト機能、およびコンテンツを配置するための空の「ターゲット領域」が含まれます。アプリケーションスペシャリストは、後で、これらのターゲット領域に必要なコンテンツをマッピングします。詳しくは、[レイアウトの設計](/help/forms/using/layout-design-details.md)を参照してください。
1. 法務部門、経理部門、またはマーケティング部門のサブジェクトマターエキスパート（SME）は、免責事項や契約条件などのテキストの条項や、ロゴなどの画像を作成およびアップロードし、様々な通信テンプレートで再利用できるようにします。
1. アプリケーションスペシャリストは、通信テンプレートを作成します。アプリケーションスペシャリストには次の役割があります。

   * テキストの条項と画像を、レイアウトテンプレート内のターゲット領域にマッピングします。
   * コンテンツを含める際の条件とルールを定義します。
   * レイアウトのフィールドと変数を、基になるデータモデルに結び付けます。

1. 作成者は、レターをプレビューし、後処理用に送信します。詳しくは、[後処理](/help/forms/using/submit-letter-topostprocess.md)を参照してください。

#### Correspondence Management で提供されるレターテンプレートの使用 {#using-letter-templates-provided-with-correspondence-management}

レイアウトテンプレートをゼロから作成する代わりに、Correspondence Management で提供されるテンプレートを変更して再利用することもできます。Designer を使用すると、組織のニーズに合わせて、テンプレートのブランディングフィールド、データフィールド、コンテンツフィールドをすばやく変更できます。Correspondence Management のテンプレートについて詳しくは、「[レターテンプレートの参照](/help/forms/using/reference-cm-layout-templates.md)」を参照してください。

### ドキュメントフラグメントの作成 {#document-fragment-creation}

ドキュメントフラグメントとは、レターや通信の作成に使用できる、再利用可能な通信のパーツやコンポーネントです。

ドキュメントフラグメントには、次の種類があります。

#### テキスト {#text}

テキストアセットは、1 つまたは複数の段落で構成される 1 つのコンテンツです。段落は静的または動的にすることができます。動的段落には、データ要素への参照が含まれます。データ要素の値は実行時に提供されます。

#### リスト {#list}

リストとは、一連のドキュメントフラグメントであり、テキスト、リスト、条件、画像などを含んでいます（リストの中にそのリストを含めることはできません）。リスト要素の順序は、固定または編集可能にすることができます。レターを作成する際に、一部またはすべてのリスト要素を使用して、再利用可能な要素のパターンを複製できます。

#### 条件 {#condition}

条件を使用すると、指定されたデータに基づいて、通信の作成時に含めるコンテンツを定義できます。条件は、制御変数で記述されます。変数は、データディクショナリ要素またはプレースホルダーのいずれかです。条件を追加するときに、制御変数の値に基づいてアセットを含めることもできます。各条件には、1 つの式に基づく単一出力があります。現在の条件変数に基づいて、最初の式が true であると判断されると、その値が条件の出力になります。

#### レイアウトフラグメント {#layout-fragment}

レイアウトフラグメントは、1 つ以上のレター内で使用できるレイアウトです。レイアウトフラグメントは、繰り返し可能なパターン（特に動的テーブル）を作成するために使用します。レイアウトには、「アドレス」や「参照番号」などの一般的なフォームフィールドを含めることができます。また、ターゲット領域を示す空のサブフォームを含めることもできます。レイアウト（XDP）は Designer で作成され、その後 [Forms や Documents にアップロード](/help/forms/using/get-xdp-pdf-documents-aem.md)されます。

### レターの作成 {#letter-creation}

顧客に送信する通信を生成するには、ユーザー主導型とシステム主導型という 2 つの方法があります。

#### ユーザー主導型 {#user-driven}

要求処理担当者やケースワーカーなど、顧客と直接やり取りする従業員は、カスタマイズされた通信を作成できます。シンプルで直感的な文字入力インターフェイスを使用することで、ビジネスユーザーはオプションのテキストを通信に追加し、編集可能なコンテンツをパーソナライズし、さらにリアルタイムで通信をプレビューできます。また、カスタマイズした通信をバックエンドプロセスに送信できます。

![カスタマイズしたユーザー主導型通信](assets/02.png)

#### システム主導型 {#system-driven}

イベントトリガーによって通信が自動生成されます。例えば、事前の納税申告を促すために市民に送信されるリマインダー通知は、事前に定義されたテンプレートと市民のデータを合わせて生成されます。完成したレターは、メールの送信、印刷、Fax 送信またはアーカイブで利用できます。

![システム主導型通信](assets/us_cm_generate.png)

### 後処理 {#post-processing}

最終的な通信は、後処理のためにバックエンドプロセスに送信できます。通信は次のように処理できます。

1. メール、Fax またはバッチ印刷用に処理したり、印刷またはメール用にフォルダーに配置したりできます。
1. レビューおよび承認のために送信できます。
1. 電子署名、証明書、暗号化、または権限管理を適用することで保護できます。
1. アーカイブや監査のために必要なメタデータをすべて含む検索可能な PDF ドキュメントに変換できます。
1. マーケティング資料など、追加のドキュメントを含む PDF ポートフォリオに含めることができます。この PDF ポートフォリオは、最終的な通信として送信できます。

### Correspondence Management ソリューションのアーキテクチャ {#correspondence-management-solution-architecture}

次の図は、レターソリューションのアーキテクチャの例の概要です。

![レターソリューションアーキテクチャ](assets/us_cm_architecture_es3.png)

## レターの分解 {#deconstructing-a-letter}

このキャンセル通知ドキュメントは、一般的な通信の例です。

![キャンセルのサンプルレター](assets/5_deconstructingaletter.png)

<table> 
 <tbody> 
  <tr> 
   <td><strong>レターの要素</strong></td> 
   <td><strong>説明</strong></td> 
   <td><strong>次を使って作成：</strong></td> 
  </tr> 
  <tr> 
   <td>バックエンドエンタープライズシステムからのデータ</td> 
   <td>バックエンドエンタープライズシステムが作成元のデータ。このデータは通信テンプレートと動的に結合されます。</td> 
   <td>データディクショナリに基づいて作成されたデータファイル<br /></td> 
  </tr> 
  <tr> 
   <td>第一線の社員が入力したデータ<br /></td> 
   <td>レターを送信する前にカスタマイズする第一線の社員が提供するデータ。<br /> </td> 
   <td><p>保護されていない DD 要素<br />編集可能なテキストの段落<br />変数／プレースホルダー<br /> </p> </td> 
  </tr> 
  <tr> 
   <td>事前に承認された<br />テキストの段落</td> 
   <td>事前に承認されたテキストコンテンツ。レターの業務上の背景を理解している法務、財務、基幹業務のエキスパート。一般的に、テキストコンテンツの作成者。ヘッダー、フッター、免責事項、あいさつ文などのコンテンツは、ほとんどのレターに共通です。ただし、「終了理由」などのコンテンツは、特定のレターに固有です。</td> 
   <td><p>テキスト\リスト\<br />条件\レイアウト</p> <p> </p> </td> 
  </tr> 
  <tr> 
   <td>データ <br /> は、カスタムロジックを基準としているか</td> 
   <td>要求について詳細な情報を依頼するレターなど一部のレターでは、要求処理担当者などのユーザーがカスタムテキストコンテンツを追加できます。</td> 
   <td>条件タイプのドキュメント<br />フラグメント </td> 
  </tr> 
  <tr> 
   <td>中央リポジトリの<br />保存された画像</td> 
   <td>ロゴや署名画像などの画像。会社のロゴなどの画像は、ほとんどの通信またはすべての通信に表示されます。署名画像は、レターと、そのレターを送付する代理人に固有のものです。</td> 
   <td><p>AEM Assets（DAM）に保存された画像<br /> </p> <p> </p> </td> 
  </tr> 
 </tbody> 
</table>

## レターの作成前にレターを分析 {#analyze-a-letter-before-you-construct-it}

すべてのレターを分析し、レターの様々な構成要素を明らかにします。アプリケーションスペシャリストは、生成された通信を分析します。

* 通信の静的な部分と動的な部分。バックエンドデータソースから入力される変数、またはエンドユーザーによって入力される変数。
* 様々なテキスト段落を通信に配置する順序（通信の作成時にビジネスユーザーが段落を変更できるかどうかなど）。
* 通信はシステム生成か、それともエンドユーザーが通信を編集する必要があるか。システムが生成する通信の数とユーザーが介入する必要がある通信の数。
* 通信テンプレートの変更頻度。毎年、毎四半期、または特定の法律が変更された場合など。予想される変更のタイプ。誤植、レイアウトの変更、フィールドの追加、段落の追加などを修正する変更か。
* 通信の要件を計画する場合、新しい通信テンプレートのリストをアセンブリします。通信テンプレートごとに、以下のデータが必要です。

   * テキストの条項、画像、テーブル
   * バックエンドシステムのデータ値
   * 通信のレイアウトおよびフラグメントレイアウト
   * レターにコンテンツを配置する順序と、コンテンツの包含および除外のルール

* 要求処理担当者やケースワーカーなどのビジネスユーザーが、レターのコンテンツや一部を変更する条件。
* シナリオで、レターソリューションのユーザーエクスペリエンス、要件および利点を説明。
* プロジェクトに必要なスキルセットやツールもシナリオで説明。
* 実装を計画する際のベストプラクティス。実装の全体的な概要。

## 分析を行う利点 {#benefits-of-performing-the-analysis}

**コンテンツの再利用**：通信の生成に必要な新しいコンテンツの統合的なリストが得られます。ヘッダー、フッター、免責事項、あいさつ文など、多数のコンテンツは多くのレターに共通しているので、様々なレターで再利用できます。このようなすべての共通コンテンツは、専門の担当者が一度作成して承認した後、多くの通信で再利用できます。

**Data Dictionary の構築**：「顧客 ID」や「顧客名」など、多くのレターに共通するデータ値があります。このようなすべてのデータ値の統合的なリストを準備できます。一般的に、構造を計画する場合は企業のミドルウェアチームに相談します。これは、データディクショナリの作成の基礎となります。

**バックエンドのエンタープライズシステムからのデータの取得** 必要としているデータの価値と、エンタープライズシステムのデータがどこから取得されたかをすべて把握することになります。これを基にして、データをエンタープライズシステムから抽出して、Letters ソリューションにフィードする実装を設計できます。

**レターの複雑さの見積もり**：特定の通信を作成する際の複雑さを判断することは重要です。この分析は、レターテンプレートの作成に必要な時間とスキルセットを判断するのに役立ちます。これは、レターソリューションの実装にかかるリソースとコストの見積もりに役立ちます。

## 通信の複雑さ {#correspondence-complexity}

通信の複雑さは、以下のパラメーターを分析することで判断できます。

**レイアウトの複雑さ**：レイアウトの複雑さはどの程度でしょうか。キャンセル通知などのレターのレイアウトはシンプルです。一方、要求保証範囲確認などのレターは、複数のテーブルと 60 を超えるフォームフィールドを含む複雑なレイアウトになっています。複雑なレイアウトを作成するには時間がかかり、レイアウトデザインの高度なスキルセットが必要です。

**段落と条件の数**：ローンの契約は 10 ページにも及び、40 を超える条項が含まれることがあります。この条項の多くは、ローンのパラメーターに依存しています。正確な契約条件に基づいて、契約書に条項を含めるか除外します。このようなレターを作成するには、複雑な条件の綿密な計画と慎重な定義が必要です。

次の表に、レターを分類するために使用できるガイドラインの一部を示します。

<table> 
 <tbody> 
  <tr> 
   <td><p><strong>複雑さのレベル</strong></p> </td> 
   <td><p><strong>レイアウトの複雑さ（主観的）</strong></p> </td> 
   <td><p><strong>段落の数</strong></p> </td> 
   <td><p><strong>条件テキストまたは画像の数</strong></p> </td> 
   <td><p><strong>必要なスキルセット</strong></p> </td> 
  </tr> 
  <tr> 
   <td><p>低度の複雑さ</p> </td> 
   <td><p>低い。レイアウトのフィールドは少数です（15 未満）。</p> <p>通常の長さは 1 ページです。<span class="acrolinxCursorMarker"></span></p> </td> 
   <td><p>8</p> </td> 
   <td><p>1</p> </td> 
   <td><p>中程度の Designer スキル。</p> </td> 
  </tr> 
  <tr> 
   <td><p>中度の複雑さ</p> </td> 
   <td><p>中度の複雑さのレイアウト。テーブルなどの構造が含まれます。通常の長さは 2 ページ以上です。</p> </td> 
   <td><p>16</p> </td> 
   <td><p>2</p> </td> 
   <td><p>中程度の Designer スキル。</p> <p> </p> <p>ユーザーインターフェイスを使用して複雑な式を作成する能力。</p> </td> 
  </tr> 
  <tr> 
   <td><p>高度の複雑さ</p> </td> 
   <td><p>複雑なレイアウト。3 ページを超える可能性があります。複数のテーブルと 60 を超えるフォームフィールドが含まれます。</p> </td> 
   <td><p>40</p> </td> 
   <td><p>8</p> </td> 
   <td><p>エキスパートレベルの Designer スキル。</p> <p> </p> <p>ユーザーインターフェイスを使用して複雑な式を作成する能力。</p> </td> 
  </tr> 
 </tbody> 
</table>

## レターの作成の概要 {#overview-of-creating-a-letter}

1. レターの基礎として使用する適切なレイアウトを選択し、レターを作成します。
1. データモジュールまたはレイアウトフラグメントをレターに追加して、レターを構成します。
1. 選択して、通信をプレビューします。
1. フィールド、変数、コンテンツ、添付ファイルを編集、設定します。

### 前提条件 {#prerequisites}

通信を作成するには、最初に、次のものを用意する必要があります。

* [互換性パッケージ](compatibility-package.md)。互換性パッケージをインストールし、**Forms** ページの「**レター**」オプションを表示します。
* レター XDP（[レイアウト](/help/forms/using/document-fragments.md)）。
* レターのパーツを形成するその他の XDP（[レイアウトフラグメント](document-fragments.md#document-fragments)）。XDPs\Layouts は [Designer](https://www.adobe.com/go/learn_aemforms_designer_65_jp) 内に作成されます。
* 関連する[データディクショナリ](/help/forms/using/data-dictionary.md)（オプション）。
* 通信に使用する[データモジュール](/help/forms/using/document-fragments.md)。
* [テストデータ](/help/forms/using/data-dictionary.md#p-working-with-test-data-p) は、テストデータが格納される XML ファイルです。データディクショナリを使用する場合は、テストデータが必要です。

## レターテンプレートを作成 {#create-a-letter-template}

### レイアウトを選択してレターのプロパティを入力 {#select-a-layout-and-enter-the-letter-properties}

1. **Forms**／**レター**&#x200B;を選択します。

1. **作成／レター**&#x200B;を選択します。Correspondence Management に利用可能なレイアウト（XDP）が表示されます。これらのレイアウトは Designer にあるものです。これらのレイアウトには、Correspondence Management に付属している初期状態のレターテンプレートも含まれています。Correspondence Management のテンプレートについて詳しくは、「[レターテンプレートの参照](/help/forms/using/reference-cm-layout-templates.md)」を参照してください。独自のレイアウトを追加するには、XDP（レイアウト）ファイルを Designer で作成して、[AEM Forms にアップロード](/help/forms/using/get-xdp-pdf-documents-aem.md)します。

   ![create-letter](assets/create-letter.png)

1. レイアウトをタップして選択し、「**次へ**」を選択します。

   ![レイアウトを選択してレターを作成](assets/selectlayout.png)

1. 次の Correspondence のプロパティを入力し、「**保存**」を選択します。

   * **タイトル（オプション）：**&#x200B;レターのタイトルを入力します。タイトルは一意である必要はなく、特殊文字や英語以外の文字を含めることもできます。
   * **名前： **&#x200B;レターの一意の名前。どの状態でも、2 つのレターに同じ名前を付けることはできません。「名前」フィールドに入力できるのは、英語の文字、数字、ハイフンのみです。「名前」フィールドは、「タイトル」フィールドに基づいて自動的に入力されます。「タイトル」フィールドに入力した特殊文字、スペース、および英数字以外の文字はハイフンに置き換えられます。「タイトル」フィールドの値は「名前」フィールドに自動的にコピーされますが、値を編集することもできます。
   * **説明（オプション）：**&#x200B;参考のための、レターの説明。
   * **データディクショナリ（オプション）：**&#x200B;データディクショナリを通信に関連付けることができます。この通信に後で挿入するアセットは、ここで通信に選択したものと同じデータディクショナリを持っているアセットか、データディクショナリを持たないアセットである必要があります。
   * **タグ（オプション）：**&#x200B;通信に適用するタグを選択します。新しいタグ名またはカスタムのタグ名を入力して Enter キーを押すと、タグを作成できます。
   * **後処理（オプション）：**&#x200B;レターテンプレートに適用する後処理を選択します。予め用意されている後処理と、メールや印刷などの、AEM を使用して作成する後処理とがあります。

   ![通信のプロパティ](assets/createcorrespondenceproperties.png)

1. 「レターが正しく作成されました」というメッセージが表示されます。（アラートメッセージで）「**開く**」を選択して、その中にデータモジュールとレイアウトフラグメントを設定します。または、「**完了**」を選択して前のページに戻ります。

   ![アラートメッセージ：レターが正しく作成されました](assets/createcorrespondencecreated.png)

   **次へ**：「**開く**」を選択すると、Correspondence Management にレイアウトが表示され、レイアウト（XDP）内のすべてのコンポーネントが一覧表示されます。[データモジュールとレイアウトフラグメントの挿入と構成](/help/forms/using/create-letter.md#p-insert-data-modules-and-layout-fragments-in-a-letter-and-configure-them-p)の手順に進みます。

### レターへのデータモジュールとレイアウトフラグメントの挿入と構成 {#insert-data-modules-and-layout-fragments-in-a-letter-and-configure-them}

通信を作成したら、「開く」を選択します。Correspondence Management にレイアウトが表示され、レイアウト（XDP）内のすべてのサブフォーム／ターゲット領域が一覧表示されます。各ターゲット領域では、データモジュールかレイアウトフラグメントのいずれかを挿入できます（さらに、レイアウトフラグメントにはデータモジュールを挿入できます）。

>[!NOTE]
>
>レターページでレターの編集アイコンを選択し、データモジュールとレイアウトフラグメントをレターに挿入して構成することもできます。

1. サブフォームごとに「**挿入**」を選択し、それぞれのサブフォームに挿入するデータモジュールまたはレイアウトフラグメントを選択します。

   ![データモジュールとレイアウトフラグメントを挿入する](assets/insertdmandlf.png)

1. 各サブフォームのオプションに「データモジュール」または「レイアウトフラグメント」を選択し、挿入するデータモジュールまたはレイアウトフラグメントを選択します。さらに、レイアウトフラグメントには、そのデザインに応じて、データモジュールまたはレイアウトフラグメントを挿入できます（最大 4 レベル）。

   ![nestedlf](assets/nestedlf.png)

1. レイアウトフラグメントを挿入する場合、レイアウトフラグメントの名前がサブフォームに表示されます。また、選択したフラグメントに応じて、ネストされたサブフォームがサブフォームに表示されます。
1. 選択したデータモジュールをレイアウトに挿入したら、各モジュールの編集アイコンをタップすることで、設定モードを選択して次の設定を行うことができます。

   1. **編集可能**：このオプションを選択すると、通信作成ユーザーインターフェイスでコンテンツを編集できます。ビジネスユーザー（要求処理担当者など）が変更する必要がある場合にのみ、コンテンツに編集可能とマークを付けます。
   1. **必須**：このオプションを選択すると、通信作成ユーザーインターフェイスでコンテンツが必須となります。
   1. **選択**：このオプションを選択すると、通信作成ユーザーインターフェイスでこのコンテンツがデフォルトで選択されます。
   1. **インデント**：レター内のモジュール／コンテンツのインデントを増減します。インデントはレベル単位で指定します（ゼロから始まります）。各レベルのインデントは 36 ポイントです。フォームのカスタマイズ方法について詳しくは、[Forms のワークフロー](submit-letter-topostprocess.md#formsworkflow)の **[!UICONTROL Correspondence Management の設定]**&#x200B;を参照してください。
   1. **直前に改ページ**：「直前に改ページ」をオンに設定した場合、このモジュールのコンテンツは常に新しいページに表示されます。
   1. **直後に改ページ**：特定のモジュールに対して「直後に改ページ」をオンに設定した場合、次のモジュールのコンテンツは常に新しいページに表示されます。

   ![挿入されたデータモジュールとレイアウトフラグメント](assets/insertdmandlf2.png)

1. モジュールを編集するには、横にある「編集」アイコンを選択します。モジュールを編集し終わったら、「**保存**」を選択します。

   このページでは、サブフォームに対して次の操作も実行できます。

   1. **フリーテキストを許可**：「フリーテキストを許可」を有効にすると、ユーザーは CCR ビューでレターにインラインテキストを追加できます。CCR ビューでは、「フリーテキストを許可」が有効なターゲット領域では「T」アクションが有効になり、それをユーザーが選択すると、テキストの名前と説明を求められます。その後「OK」をタップすると、テキストが編集モードで開き、ユーザーはテキストを追加できます。これは他のテキストモジュールと同様に動作します。
   1. **順序をロック**：レター内のサブフォームの順序をロックします。作成者は、レターの作成中にサブフォームやコンポーネントの順番を変更することはできません。

   このページでは、サブフォーム内の各アセットに対して次の操作も実行できます。

   1. **アセットの順序を変更**：アセットの順序変更アイコン（![dragndrop](assets/dragndrop.png)）を使ってアセットをドラッグ＆ドロップします。
   1. **アセットを削除**：アセットを削除するには、横にある削除アイコンを選択します。
   1. **アセットをプレビュー**：アセットの横にあるプレビューを表示アイコン（![showpreview](assets/showpreview.png)）を選択します。

1. 「**次へ**」を選択します。
1. データページには、テンプレートでのデータフィールドと変数の使用方法の詳細が表示されます。データは、データディクショナリやユーザー入力などのデータソースにリンクできます。各フィールドでは、データディクショナリがデータのマッピング元とするプロパティや、ユーザー入力フィールドに表示するキャプションを定義します。

   リンケージ：

   * **フィールド**&#x200B;要素は、リテラル、データディクショナリ要素、アセット、またはユーザー指定の値にリンクできます。フィールド要素は、「無視」オプションに連結することによって無視することもできます。
   * **変数**&#x200B;要素は、リテラル、データディクショナリ要素、フィールド、変数、アセットまたはユーザー指定の値にリンクできます。

   リンケージの主なフィールドは次のとおりです。

   * **複数行**：フィールドまたは変数のデータ入力が複数行かどうかを指定できます。このオプションを選択した場合、フィールドまたは変数の入力ボックスは、データ編集表示で複数行入力ボックスとして表示されます。フィールドまたは変数は、通信作成ユーザーインターフェイスのデータ表示とコンテンツ表示でも複数行として表示されます。複数行入力フィールドは TextModule でコメントを入力するフィールドに類似しています。複数行オプションはリンケージタイプを持つユーザーまたは保護されていないデータディクショナリ要素のフィールドと変数のみで使用できます。
   * **オプション**：フィールドまたは変数の値がオプションか、または必須かを指定できます。オプションのフィールドのオプションは、リンケージタイプを持つユーザーまたは保護されていないデータディクショナリ要素のフィールドと変数で使用できます。

   * **フィールド／変数の検証**：フィールドや変数の値の検証を強化するために、フィールドまたは変数にバリデーターを割り当てることができます。このオプションは、リンケージタイプを持つユーザーまたは保護されていないデータディクショナリ要素のフィールドと変数のみで使用できます。
   * **キャプション**&#x200B;と&#x200B;**ツールチップ**：「キャプション」は、CCR ユーザーインターフェイスのフィールドの前に表示されるフィールドのラベルです。このオプションは、リンケージタイプを持つユーザーまたは保護されていないデータディクショナリ要素のフィールドと変数で使用できます。

   フィールドに使用できる検証のタイプは次のとおりです。

   * **文字列バリデーター**：文字列バリデーターを使用して、フィールドまたは変数に入力された文字列の最小長と最大長を指定します。文字列バリデーターを作成する場合は、有効な検証パラメーターを必ず指定してください。最小値と最大値の両方に有効な長さを入力します。文字列バリデーターには、入力できる値の最小長と最大長を指定できます。入力した値が指定した範囲の外にある場合は、CCR ユーザーインターフェイスの関連するフィールドが赤色でマークされます。 

   * **数値バリデーター**：数値バリデーターを使用して、フィールドまたは変数に入力される数値の最小値と最大値を指定します。数値バリデーターを作成する場合は、有効な検証パラメーターを必ず指定してください。最小値と最大値の両方に数値を入力します。

   * **正規表現バリデーター**：正規表現バリデーターを使用して、フィールドまたは変数の値を検証するために使用される正規表現を定義します。さらに、エラーメッセージをカスタマイズできます。正規表現バリデーターを作成する場合は、有効な正規表現を必ず指定してください。

   >[!NOTE]
   >
   >フィールドと変数のバリデーターは、リンケージタイプがユーザーであるか、未保護のデータディクショナリ要素を持つフィールドまたは変数でのみ使用できます。

   ![リンケージ](assets/linkages.png)

1. リンケージを指定したら、「**次へ**」を選択します。Correspondence Management に「添付ファイル」画面が表示されます。

### 添付ファイルのセットアップ {#set-up-the-attachments}

1. 「**アセットを選択**」を選択します。
1. 「アセットを選択」画面で、レターに添付するアセットを選択し、「**完了**」を選択します。最初にアセットを「アセット」にアップロードしておく必要があります。PDF および Microsoft Office ドキュメントのみを添付することをお勧めしますが、画像を添付することもできます。DAM におけるアセットのアップロードに関する詳細は、「[アセットのアップロード](/help/assets/manage-assets.md)」を参照してください。
1. リクエスト処理担当者が順序を変更できないようにリストのアセット順をロックするには、「**順序をロック**」を選択します。このオプションを選択しない場合、要求処理担当者はリスト項目の順序を変更できます。
1. アセットの順序を変更するには、「アセットの順序変更」アイコン（![dragndrop](assets/dragndrop.png)）を押しながら、ドラッグ＆ドロップします。
1. 作成者が添付ファイルを削除できないようにするには、添付ファイルの前にある「**編集**」を選択し、添付ファイルを「必須」に指定します。CCR インターフェイスで事前に選択されるようにする場合は、添付ファイルを「選択済み」に指定します。
1. 「**ライブラリアクセス**」を選択してライブラリにアクセスできるようにします。ライブラリアクセスが有効な場合、要求処理担当者はレターの作成時にコンテンツライブラリにアクセスし、添付ファイルを挿入できます。
1. 「**添付ファイルの設定**」を選択し、添付ファイルの最大数を指定します。

1. 「**保存**」を選択します。通信が作成され、「レター」ページ内のリストに表示されます。

Correspondence Management でレターテンプレートを作成したら、エンドユーザー/エージェント/要求処理担当者は CCR ユーザーインターフェイスでレターを開き、データを入力して、コンテンツを設定し、添付ファイルを管理することで、通信を作成できます。詳しくは、[通信の作成](/help/forms/using/create-correspondence.md)を参照してください。

## 各フィールドで使用できるリンケージのタイプ {#types-of-linkage-available-for-each-of-the-fields}

次の表で、各種フィールドで使用できるリンケージのタイプについて説明します。

テーブルの次の値

* **はい**： 一番左の列に記載されているフィールドタイプが、そのマッピングタイプをサポートすることを意味します。
* **いいえ**： 一番左の列に記載されているフィールドタイプが、そのマッピングタイプをサポートしないことを意味します。
* **適用なし**： 一番左の列に記載されているフィールドタイプが適用できないことを意味します。

<table> 
 <tbody> 
  <tr> 
   <td> </td> 
   <td><strong>リテラル</strong></td> 
   <td><strong>Asset</strong></td> 
   <td><strong>データディクショナリ</strong></td> 
   <td><strong>無視</strong></td> 
   <td><strong>ユーザー</strong></td> 
   <td><strong>フィールド</strong></td> 
   <td><strong>変数</strong></td> 
  </tr> 
  <tr> 
   <td><strong>date</strong></td> 
   <td>はい</td> 
   <td>いいえ</td> 
   <td>はい</td> 
   <td>はい</td> 
   <td>はい</td> 
   <td>該当なし</td> 
   <td>該当なし</td> 
  </tr> 
  <tr> 
   <td><strong>time</strong></td> 
   <td>はい</td> 
   <td>いいえ</td> 
   <td>はい</td> 
   <td>はい</td> 
   <td>はい</td> 
   <td>該当なし</td> 
   <td>該当なし</td> 
  </tr> 
  <tr> 
   <td><strong>datetime</strong></td> 
   <td>はい</td> 
   <td>いいえ</td> 
   <td>はい</td> 
   <td>はい</td> 
   <td>はい</td> 
   <td>該当なし</td> 
   <td>該当なし</td> 
  </tr> 
  <tr> 
   <td><strong>integer</strong></td> 
   <td>はい</td> 
   <td>いいえ</td> 
   <td>はい</td> 
   <td>はい</td> 
   <td>はい<br /> </td> 
   <td>該当なし</td> 
   <td>該当なし</td> 
  </tr> 
  <tr> 
   <td><strong>float</strong></td> 
   <td>はい</td> 
   <td>いいえ</td> 
   <td>はい</td> 
   <td>はい</td> 
   <td>はい<br /> </td> 
   <td>該当なし</td> 
   <td>該当なし<br /> </td> 
  </tr> 
  <tr> 
   <td><strong>richtext</strong></td> 
   <td>対応</td> 
   <td>テキストのみ</td> 
   <td>はい</td> 
   <td>はい</td> 
   <td>はい</td> 
   <td>該当なし</td> 
   <td>該当なし</td> 
  </tr> 
  <tr> 
   <td><strong>プレーン</strong><strong>テキスト</strong></td> 
   <td>対応</td> 
   <td>テキストのみ</td> 
   <td>はい</td> 
   <td>はい</td> 
   <td>はい</td> 
   <td>該当なし</td> 
   <td>該当なし</td> 
  </tr> 
  <tr> 
   <td><strong>image</strong></td> 
   <td>不可</td> 
   <td>画像のみ</td> 
   <td>いいえ</td> 
   <td>はい</td> 
   <td>いいえ</td> 
   <td>該当なし</td> 
   <td>該当なし</td> 
  </tr> 
  <tr> 
   <td><strong>signature</strong></td> 
   <td>いいえ</td> 
   <td>不可</td> 
   <td>不可<br /> </td> 
   <td>はい</td> 
   <td>いいえ</td> 
   <td>該当なし</td> 
   <td>該当なし<br /> </td> 
  </tr> 
 </tbody> 
</table>

## レターテンプレートのコピーを作成 {#createcopylettertemplate}

既存のレターテンプレートを使用すると、ドキュメントフラグメントやデータディクショナリなど、類似したプロパティ、コンテンツ、および継承されたアセットを持つレターテンプレートをすばやく作成できます。既存のレターテンプレートを使用するには、レターをコピーして貼り付けます。

1. レターページで、1 つ以上のレターを選択します。UI にコピーアイコンが表示されます。
1. 「コピー」を選択します。UI に貼り付けアイコンが表示されます。レターを貼り付ける前に、フォルダー内に移動することもできます。複数のフォルダーに同じ名前のアセットを保管することができます。フォルダーについて詳しくは、[フォルダーとアセットの整理](/help/forms/using/import-export-forms-templates.md#folders-and-organizing-assets)を参照してください。
1. 「貼り付け」を選択します。貼り付けダイアログが表示されます。複数のレターをコピーして同じ場所に貼り付けると、それらのレターの新しいコピーに対して名前とタイトルが自動的に割り当てられますが、その名前とタイトルは編集することができます。
1. 必要に応じて、レターのコピーを保存する際のタイトルと名前を編集します。
1. 「貼り付け」を選択します。レターのコピーが作成されます。これで、新しく作成されたレターで必要な変更が行えます。
