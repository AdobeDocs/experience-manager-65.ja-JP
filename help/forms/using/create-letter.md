---
title: レターの作成
seo-title: Create Letter
description: このトピックでは、レターの作成、レターへのデータモジュールと添付ファイルの追加、Correspondence Management でのプレビューの手順を説明します。
seo-description: This topic gives you the steps to create a letter, add data modules and attachments to it, and preview it in Correspondence Management.
uuid: b5cdbf01-db85-4ff8-9fda-1489542bffef
products: SG_EXPERIENCEMANAGER/6.4/FORMS
topic-tags: correspondence-management
discoiquuid: 6cef0bcf-e2f0-4a5a-85a1-6d8a5dd9bd01
feature: Correspondence Management
exl-id: 2f996a50-7c7d-41b6-84b2-523b6609254b
source-git-commit: fc2f26a69c208947c14e8c6036825bb217901481
workflow-type: tm+mt
source-wordcount: '3979'
ht-degree: 42%

---

# レターの作成 {#create-letter}

## Correspondence Management ワークフロー {#correspondence-management-workflow}

Correspondence Management ワークフローは、次の 4 つのフェーズで構成されます。

1. テンプレートの作成
1. ドキュメントフラグメントの作成
1. レターの作成
1. 後処理

### テンプレートの作成 {#template-creation}

次の図は、通信テンプレートを作成する際の一般的なワークフローを示しています。

![通信テンプレートを作成する際のワークフロー](assets/01.png)

このワークフローについて説明します。

1. フォームデザイナーは、AdobeForms Designer を使用してレイアウトとフラグメントレイアウトを作成し、CRX リポジトリにアップロードします。 レイアウトには、一般的なフォームフィールド、ヘッダーやフッターなどのレイアウト機能、およびコンテンツを配置するための空の「ターゲット領域」が含まれています。 アプリケーションスペシャリストは、後で、これらのターゲット領域に必要なコンテンツをマッピングします。 詳細情報： [レイアウトの設計](/help/forms/using/layout-design-details.md).
1. 法務、金融、マーケティング部門の Subject Matter Experts は、様々な通信テンプレートで再利用される、テキスト条項、条項、利用条件、ロゴなどの画像などのコンテンツを作成、アップロードします。
1. アプリケーションスペシャリストは、通信テンプレートを作成します。 アプリケーションスペシャリスト

   * テキストの条項と画像を、レイアウトテンプレート内のターゲット領域にマッピングします。
   * コンテンツを含めるための条件とルールを定義します
   * レイアウトのフィールドと変数を基盤となるデータモデルに結び付けます。

1. 作成者は、レターをプレビューし、後処理用に送信します。 詳細情報： [後処理](/help/forms/using/submit-letter-topostprocess.md).

#### Correspondence Management で提供されるレターテンプレートの使用 {#using-letter-templates-provided-with-correspondence-management}

レイアウトテンプレートをゼロから作成する代わりに、Correspondence Management で提供されるテンプレートを変更して再利用することもできます。 デザイナーを使用して、組織のニーズに合わせてテンプレートのブランディング、データ、コンテンツのフィールドをすばやく変更できます。 Correspondence Management のテンプレートについて詳しくは、「[レターテンプレートの参照](/help/forms/using/reference-cm-layout-templates.md)」を参照してください。

### ドキュメントフラグメントの作成 {#document-fragment-creation}

ドキュメントフラグメントとは、レターや通信の作成に使用できる、再利用可能な通信のパーツやコンポーネントです。

ドキュメントフラグメントには、次の種類があります。

#### テキスト {#text}

テキストアセットは、1 つまたは複数の段落で構成される 1 つのコンテンツです。段落は静的または動的にすることができます。動的段落には、データ要素への参照が含まれます。データ要素の値は実行時に提供されます。

#### リスト {#list}

リストとは、一連のドキュメントフラグメントであり、テキスト、リスト、条件、画像などを含んでいます（リストの中にそのリストを含めることはできません）。リスト要素の順序は、固定または編集可能にすることができます。レターを作成する際に、一部またはすべてのリスト要素を使用して、再利用可能な要素のパターンを複製できます。

#### 条件 {#condition}

条件を使用すると、指定されたデータに基づいて、通信の作成時に含めるコンテンツを定義できます。 条件は、制御変数で記述されます。変数は、データディクショナリ要素またはプレースホルダーのいずれかです。 条件を追加するときに、制御変数の値に基づいてアセットを含めることもできます。各条件には、1 つの式に基づく単一出力があります。現在の条件変数に基づいて、最初の式が true と見つかりました。 その値が条件の出力になります。

#### レイアウトフラグメント {#layout-fragment}

レイアウトフラグメントは、1 つ以上のレター内で使用できるレイアウトです。 レイアウトフラグメントは、繰り返し可能なパターン（特に動的テーブル）を作成するために使用します。レイアウトには、「アドレス」や「参照番号」などの一般的なフォームフィールドを含めることができます。また、ターゲット領域を示す空のサブフォームを含めることもできます。レイアウト（XDP）は Designer で作成され、その後 [Forms や Documents にアップロード](/help/forms/using/get-xdp-pdf-documents-aem.md)されます。

### レターの作成 {#letter-creation}

顧客に送信する通信を生成する方法は、ユーザー主導型とシステム主導型の 2 つです。

#### ユーザー主導型 {#user-driven}

要求処理担当者やケースワーカーなど、顧客に対応する従業員は、カスタマイズされた通信を作成できます。 シンプルで直感的なレター入力インターフェイスを使用すると、ビジネスユーザーは、オプションのテキストを通信に追加し、編集可能なコンテンツをパーソナライズして、通信をリアルタイムでプレビューできます。 その後、カスタマイズした通信をバックエンドプロセスに送信できます。

![カスタマイズしたユーザー主導型通信](assets/02.png)

#### システム主導型 {#system-driven}

イベントトリガーによって通信が自動生成されます。例えば、事前の納税申告を促すために市民に送信されるリマインダー通知は、事前に定義されたテンプレートと市民のデータを合わせて生成されます。完成したレターは、メールの送信、印刷、Fax 送信またはアーカイブで利用できます。

![システム主導型通信](assets/us_cm_generate.png)

### 後処理 {#post-processing}

最終的な通信は、後処理のためにバックエンドプロセスに送信できます。 通信は次のように設定できます。

1. 電子メール、FAX、バッチ印刷用に処理されたり、印刷または電子メール送信用にフォルダーに配置されたりします。
1. レビューおよび承認用に送信されました。
1. 電子署名、証明書、暗号化、または権限管理を適用することで保護されます。
1. アーカイブや監査のために必要なPDFをすべて含む、検索可能なメタデータドキュメントに変換します。
1. マーケティング資料など、より多くのドキュメントを含むPDFPortfolioに含まれます。 この PDF ポートフォリオは、最終的な通信として送信できます。

### Correspondence Management ソリューションのアーキテクチャ {#correspondence-management-solution-architecture}

次の図は、Letters Solution のアーキテクチャの例の概要を示しています。

![レターソリューションアーキテクチャ](assets/us_cm_architecture_es3.png)

## レターの分解 {#deconstructing-a-letter}

このキャンセル通知ドキュメントは、一般的な通信の例です。

![キャンセルのサンプルレター](assets/5_deconstructingaletter.png)

<table> 
 <tbody> 
  <tr> 
   <td><strong>レターの要素</strong></td> 
   <td><strong>説明</strong></td> 
   <td><strong>次を使って作成：</strong></td> 
  </tr> 
  <tr> 
   <td>バックエンドエンタープライズシステムからのデータ</td> 
   <td>バックエンドのエンタープライズシステムをソースとするデータ。 データは、通信テンプレートと動的に結合されます。</td> 
   <td>The<br /> データディクショナリに基づいて作成されたデータファイル</td> 
  </tr> 
  <tr> 
   <td>データ<br /> 最前線の従業員による入力</td> 
   <td>レターを送信する前にカスタマイズしている最前線の従業員が提供するデータ。<br /> </td> 
   <td><p>未保護の DD 要素<br /> 編集可能なテキストの段落<br /> 変数/プレースホルダー<br /> </p> </td> 
  </tr> 
  <tr> 
   <td>事前承認済み<br /> テキストの段落</td> 
   <td>事前に承認されたテキストコンテンツ。 レターのビジネスコンテキストを理解する法務、金融、または一連のビジネスの専門家は、通常、テキストコンテンツを作成します。 ヘッダー、フッター、免責事項、あいさつ文などのコンテンツは、ほとんどのレターに共通です。 ただし、「終了理由」などのコンテンツは、特定のレターに固有です。</td> 
   <td><p>テキスト\リスト\<br /> 条件\レイアウト</p> <p> </p> </td> 
  </tr> 
  <tr> 
   <td>データ <br /> は、カスタムロジックを基準としているか</td> 
   <td>要求について詳細な情報を依頼するレターなど一部のレターでは、要求処理担当者などのユーザーがカスタムテキストコンテンツを追加できます。</td> 
   <td>条件タイプのドキュメント<br />フラグメント </td> 
  </tr> 
  <tr> 
   <td>保存済み<br /> 中央リポジトリからの画像</td> 
   <td>ロゴや署名画像などの画像。 会社のロゴなどの画像は、ほとんどの通信またはすべての通信に表示されます。 署名画像は、レターと、レターが送信される担当者に固有です。</td> 
   <td><p>AEM Assets(DAM) に保存された画像<br /> </p> <p> </p> </td> 
  </tr> 
 </tbody> 
</table>

## レターを構築する前に分析する {#analyze-a-letter-before-you-construct-it}

すべてのレターを分析し、レターを構成する様々な要素を明らかにします。 アプリケーションスペシャリストは、生成された通信を分析します。

* 通信のどの部分が静的で、どの部分が動的か。 バックエンドのデータソースまたはエンドユーザーによって入力される変数。
* 通信に表示される様々な段落の順序（通信の作成中にビジネスユーザーが段落を変更できるかどうかなど）。
* 通信はシステムで生成されますか？それとも、エンドユーザーが通信を編集する必要がありますか？ システムが生成する通信の数とユーザーが介入する必要がある通信の数
* 通信テンプレートの変更頻度 年別、四半期別、または特定の法律が変更された場合にのみ更新されますか。 予想される変更の種類 誤字の修正、レイアウトの変更、フィールドの追加、段落の追加などを行う変更か。
* 通信の要件を計画する場合は、新しい通信テンプレートのリストを組み立てます。 通信テンプレートごとに、次が必要です。

   * テキストの条項、画像、テーブル
   * バックエンドシステムからのデータ値
   * 通信のレイアウトとフラグメントレイアウト
   * レターに表示されるコンテンツの順序と、コンテンツを含めたり除外したりするためのルール

* 要求処理担当者やケースワーカーなどのビジネスユーザーがレターのコンテンツや一部を変更する条件。
* シナリオとは、レターソリューションを使用するユーザーエクスペリエンス、要件、利点を説明する説明です。
* また、シナリオには次のものが含まれます。プロジェクトに必要な必須スキルセットとツール。
* 実装を計画する際のベストプラクティスです。 実装の全体的な概要。

## 分析を行う利点 {#benefits-of-performing-the-analysis}

**コンテンツの再利用**：通信の生成に必要な新しいコンテンツの統合的なリストが得られます。ヘッダー、フッター、免責事項、紹介などのコンテンツの多くは、多くのレターに共通しており、様々なレターで再利用できます。 このような共通コンテンツはすべて、エキスパートが一度作成し承認し、多くの通信で再利用できます。

**Data Dictionary の構築**：「顧客 ID」や「顧客名」など、多くのレターに共通するデータ値があります。このようなすべてのデータ値の統合リストを準備できます。 通常、構造を計画する際には、企業のミドルウェアチームの担当者に問い合わせます。 これは、データディクショナリの構築の基礎となります。

**バックエンドエンタープライズシステムからデータを取得中** また、必要なすべてのデータ値と、エンタープライズシステムデータの取得元も把握できます。 これを基にして、データをエンタープライズシステムから抽出して、Letters ソリューションにフィードする実装を設計できます。

**レターの複雑さの見積もり**：特定の通信を作成する際の複雑さを判断することは重要です。この分析は、レターテンプレートの作成に必要な時間とスキルセットを決定するのに役立ちます。 これは、Letters ソリューションの実装に伴うリソースとコストの見積もりに役立ちます。

## 通信の複雑さ {#correspondence-complexity}

通信の複雑さは、次のパラメーターを分析することで判断できます。

**レイアウトの複雑さ**：レイアウトの複雑さはどの程度でしょうか。キャンセル通知などのレターのレイアウトはシンプルです。一方、請求範囲の確認などのレターは、複数のテーブルと 60 個を超えるフォームフィールドを含む複雑なレイアウトを持ちます。 複雑なレイアウトの作成には時間がかかり、高度なレイアウトデザインスキルセットが必要です。

**段落と条件の数**：ローンの契約は 10 ページにも及び、40 を超える条項が含まれることがあります。この条項の多くは、ローンのパラメーターに依存しています。正確な利用条件に基づいて、条項が契約に含まれるか、契約から除外されます。 このようなレターを作成するには、複雑な条件の綿密な計画と慎重な定義が必要です。

次の表に、レターを分類する際に使用できるガイドラインを示します。

<table> 
 <tbody> 
  <tr> 
   <td><p><strong>複雑さのレベル</strong></p> </td> 
   <td><p><strong>レイアウトの複雑さ（主観的）</strong></p> </td> 
   <td><p><strong>段落の数</strong></p> </td> 
   <td><p><strong>条件テキストまたは画像の数</strong></p> </td> 
   <td><p><strong>必要なスキルセット</strong></p> </td> 
  </tr> 
  <tr> 
   <td><p>低い複雑さ</p> </td> 
   <td><p>低. レイアウトにはフォームフィールドが少なく（15 未満）ます。</p> <p>通常、1 ページ<span class="acrolinxCursorMarker"></span>.</p> </td> 
   <td><p>8</p> </td> 
   <td><p>1</p> </td> 
   <td><p>中程度の Designer スキル。</p> </td> 
  </tr> 
  <tr> 
   <td><p>中程度の複雑さ</p> </td> 
   <td><p>中度の複雑さのレイアウト。 テーブルなどの構造が含まれます。 通常、複数ページになります。</p> </td> 
   <td><p>16</p> </td> 
   <td><p>2</p> </td> 
   <td><p>中程度の Designer スキル。</p> <p> </p> <p>ユーザーインターフェイスを使用して複雑な式を作成する機能。</p> </td> 
  </tr> 
  <tr> 
   <td><p>複雑さが高い</p> </td> 
   <td><p>複雑なレイアウト。 3 ページを超える値を設定できます。 テーブルと 60 個を超えるフォームフィールドが含まれています。</p> </td> 
   <td><p>40</p> </td> 
   <td><p>8</p> </td> 
   <td><p>Designer のエキスパートスキル。</p> <p> </p> <p>ユーザーインターフェイスを使用して複雑な式を作成する機能。</p> </td> 
  </tr> 
 </tbody> 
</table>

## レターの作成の概要 {#overview-of-creating-a-letter}

1. レターのベースとなる適切なレイアウトを選択し、レターを作成します。
1. データモジュールまたはレイアウトフラグメントをレターに追加し、構成します。
1. 選択して通信をプレビューします。
1. フィールド、変数、コンテンツ、添付ファイルを編集、設定します。

### 前提条件 {#prerequisites}

通信を作成するには、まず次の設定を行う必要があります。

* [互換性パッケージ](compatibility-package.md)。互換性パッケージをインストールし、**Forms** ページの「**レター**」オプションを表示します。
* レター XDP（[レイアウト](/help/forms/using/document-fragments.md)）。
* レターのパーツを形成するその他の XDP（[レイアウトフラグメント](document-fragments.md#document-fragments)）。XDPs\Layouts は [Designer](https://www.adobe.com/go/learn_aemforms_designer_65_jp) 内に作成されます。
* 関連する[データディクショナリ](/help/forms/using/data-dictionary.md)（オプション）。
* 通信に使用する[データモジュール](/help/forms/using/document-fragments.md)。
* [テストデータ](/help/forms/using/data-dictionary.md#p-working-with-test-data-p) は、テストデータが格納される XML ファイルです。データディクショナリを使用する場合は、テストデータが必要です。

## レターテンプレートの作成 {#create-a-letter-template}

### レイアウトを選択し、レターのプロパティを入力します {#select-a-layout-and-enter-the-letter-properties}

1. **Forms**／**レター**&#x200B;を選択します。

1. **作成／レター**&#x200B;を選択します。Correspondence Management に利用可能なレイアウト（XDP）が表示されます。これらのレイアウトは Designer から取得できます。 レイアウトには、Correspondence Management ですぐに使用できるレターテンプレートも含まれています。 Correspondence Management のテンプレートについて詳しくは、「[レターテンプレートの参照](/help/forms/using/reference-cm-layout-templates.md)」を参照してください。独自のレイアウトを追加するには、XDP（レイアウト）ファイルを Designer で作成して、[AEM Forms にアップロード](/help/forms/using/get-xdp-pdf-documents-aem.md)します。

   ![create-letter](assets/create-letter.png)

1. レイアウトをタップして選択し、「**次へ**」をタップします。

   ![レイアウトを選択してレターを作成する](assets/selectlayout.png)

1. Correspondence のプロパティを入力して、「**保存**」をタップします。

   * **タイトル（オプション）：**&#x200B;レターのタイトルを入力します。タイトルは一意である必要はなく、特殊文字や英語以外の文字を含めることができます。
   * **名前： **&#x200B;レターの一意の名前。どの状態でも、2 つのレターに同じ名前を付けることはできません。「名前」フィールドに入力できるのは、英語の文字、数字、ハイフンのみです。「名前」フィールドは、「タイトル」フィールドに基づいて自動的に入力されます。「タイトル」フィールドに入力した特殊文字、スペース、および英数字以外の文字はハイフンに置き換えられます。「タイトル」フィールドの値は「名前」フィールドに自動的にコピーされますが、値を編集することもできます。
   * **説明（オプション）：**&#x200B;参考のための、レターの説明。
   * **データディクショナリ（オプション）：**&#x200B;データディクショナリを通信に関連付けることができます。この通信に後で挿入するアセットは、ここで通信に選択したものと同じデータディクショナリを持っているアセットか、データディクショナリを持たないアセットである必要があります。
   * **タグ（オプション）：**&#x200B;通信に適用するタグを選択します。新しいタグ名またはカスタムのタグ名を入力して Enter キーを押すと、タグを作成できます。
   * **後処理（オプション）：**&#x200B;レターテンプレートに適用する後処理を選択します。予め用意されている後処理と、メールや印刷などの、AEM を使用して作成する後処理とがあります。

   ![通信のプロパティ](assets/createcorrespondenceproperties.png)

1. 「レターが正しく作成されました」というメッセージが表示されます。（アラートメッセージで）「**開く**」をタップして、その中にデータモジュールとレイアウトフラグメントを設定します。または、「**完了**」をタップして前のページに戻ります。

   ![アラートメッセージ：レターが正しく作成されました](assets/createcorrespondencecreated.png)

   **次へ**：「**開く**」をタップすると、Correspondence Management にレイアウトが表示され、レイアウト（XDP）内のすべてのコンポーネントが一覧表示されます。先に進み、 [データモジュールとレイアウトフラグメントを参照し、それらを設定してください。](/help/forms/using/create-letter.md#p-insert-data-modules-and-layout-fragments-in-a-letter-and-configure-them-p).

### データモジュールとレイアウトフラグメントをレターに挿入し、構成します {#insert-data-modules-and-layout-fragments-in-a-letter-and-configure-them}

通信を作成したら、「開く」をタップします。Correspondence Management にレイアウトが表示され、レイアウト（XDP）内のすべてのサブフォーム／ターゲット領域が一覧表示されます。各ターゲット領域で、データモジュールまたはレイアウトフラグメントのどちらかを挿入するよう選択できます（その後、レイアウトフラグメント内のデータモジュール）。

>[!NOTE]
>
>レターページでレターの編集アイコンをタップして、データモジュールとレイアウトフラグメントをレターに挿入し、構成することもできます。

1. サブフォームごとに「**挿入**」をタップし、それぞれのサブフォームに挿入するデータモジュールまたはレイアウトフラグメントを選択します。

   ![データモジュールとレイアウトフラグメントを挿入する](assets/insertdmandlf.png)

1. 各サブフォームでこれらのオプション用に「データモジュール」または「レイアウトフラグメント」を選択し、挿入するデータモジュールまたはレイアウトフラグメントを選択します。 さらに、レイアウトフラグメントでは、そのデザイン（最大 4 レベル）に応じて、データモジュールまたはレイアウトフラグメントを挿入できます。

   ![nestedlf](assets/nestedlf.png)

1. レイアウトフラグメントを挿入すると、レイアウトフラグメントの名前がサブフォームに表示されます。 また、選択したフラグメントに応じて、ネストされたサブフォームがサブフォームに表示されます。
1. 選択したデータモジュールをレイアウトに挿入したら、各モジュールの編集アイコンをタップした後で、設定モードをタップして次の設定を行うことができます。

   1. **編集可能**：このオプションを選択すると、通信を作成ユーザーインターフェイスでコンテンツを編集できます。 ビジネスユーザー（要求処理担当者など）が変更する必要がある場合にのみ、コンテンツを編集可能としてマークします。
   1. **必須**：このオプションを選択した場合、通信を作成ユーザーインターフェイスでコンテンツが必要です。
   1. **選択済み**：このオプションを選択すると、通信を作成ユーザーインターフェイスで、コンテンツがデフォルトで選択されます。
   1. **インデント**：レター内のモジュール/コンテンツのインデントを増減します。 インデントはレベル単位で指定し、0 から始まります。 各レベルのインデントは 36 ポイントです。 フォームのカスタマイズについて詳しくは、 **[!UICONTROL Correspondence Management 設定]** in [Formsワークフロー](submit-letter-topostprocess.md#formsworkflow).
   1. **前に改ページ**:「前に改ページ」をオンに設定した場合、このモジュールのコンテンツは常に新しいページに表示されます。
   1. **直後に改ページ**：特定のモジュールに対して「後ろで改ページ」をオンに設定した場合、NEXT モジュールのコンテンツは常に新しいページに表示されます。

   ![挿入されたデータモジュールとレイアウトフラグメント](assets/insertdmandlf2.png)

1. モジュールを編集するには、横にある「編集」アイコンをタップします。モジュールを編集し終わったら、「**保存**」をタップします。

   このページでは、サブフォームに対して次の操作も実行できます。

   1. **フリーテキストを許可**：「フリーテキストを許可」を有効にすると、ユーザーは CCR ビューでレターにインラインテキストを追加できます。CCR 表示では、「フリーテキストを許可」が有効なターゲット領域に対して「T」アクションが有効になり、ユーザーがタップすると、テキストの名前と説明を要求し、「ok」をタップすると、編集モードでテキストが開き、ユーザーがテキストを追加できます。 これは他のテキストモジュールと同様に動作します
   1. **順序をロック**：レター内のサブフォームの順序をロックします。 作成者は、レターの作成中にサブフォームやコンポーネントを並べ替えることはできません。

   このページでは、サブフォーム内の各アセットに対して次の操作も実行できます。

   1. **アセットの順序を変更**：アセットの順序変更アイコン（![dragndrop](assets/dragndrop.png)）を使ってアセットをドラッグ＆ドロップします。
   1. **アセットの削除**：アセットを削除するには、横にある「削除」アイコンをタップします。
   1. **アセットのプレビュー**：アセットの横にある「プレビューを表示」アイコン（![showpreview](assets/showpreview.png)）をタップします。

1. 「**次へ**」をタップします。
1. データページでは、データフィールドと変数がテンプレートでどのように使用されているかについて詳しく説明します。 データは、データディクショナリやユーザー入力などのデータソースにリンクできます。 各フィールドは、データをマッピングするデータディクショナリや、ユーザー入力フィールドに表示するキャプションのプロパティを定義します。

   リンケージ：

   * The **フィールド** 要素は、リテラル、データディクショナリ要素、アセット、またはユーザー指定の値にリンクできます。 フィールド要素を「無視」オプションに連結することで、フィールド要素を無視することもできます。
   * The **変数** 要素は、リテラル、データディクショナリ要素、フィールド、変数、アセットまたはユーザー指定の値にリンクできます。

   リンケージの主なフィールドは次のとおりです。

   * **複数行**：フィールドまたは変数のデータ入力が複数行かどうかを指定できます。このオプションを選択した場合、フィールドまたは変数の入力ボックスが、データ編集表示で複数行入力ボックスとして表示されます。 フィールドまたは変数は、通信を作成ユーザーインターフェイスのデータビューとコンテンツビューで複数行として表示されます。 複数行入力フィールドは TextModule でコメントを入力するフィールドに類似しています。複数行オプションはリンケージタイプを持つユーザーまたは保護されていないデータディクショナリ要素のフィールドと変数のみで使用できます。
   * **オプション**：フィールドまたは変数の値がオプションか、または必須かを指定できます。オプションのフィールドのオプションは、リンケージタイプを持つユーザーまたは保護されていないデータディクショナリ要素のフィールドと変数で使用できます。

   * **フィールド／変数の検証**：フィールドや変数の値の検証を強化するために、フィールドまたは変数にバリデーターを割り当てることができます。このオプションは、リンケージタイプを持つユーザーまたは保護されていないデータディクショナリ要素のフィールドと変数のみで使用できます。
   * **キャプション**&#x200B;と&#x200B;**ツールチップ**：「キャプション」は、CCR ユーザーインターフェイスのフィールドの前に表示されるフィールドのラベルです。このオプションは、リンケージタイプを持つユーザーまたは保護されていないデータディクショナリ要素のフィールドと変数で使用できます。

   次に、フィールドに使用できる検証のタイプを示します。

   * **文字列バリデーター**：文字列バリデーターを使用して、フィールドまたは変数に入力された文字列の最小長と最大長を指定します。 文字列バリデーターを作成する場合、有効な検証パラメーターを必ず指定してください。 最小値と最大値の両方に有効な長さを入力します。 文字列バリデーターの場合、入力できる値の最小長と最大長を指定できます。 入力した値が指定した範囲の外にある場合は、CCR ユーザーインターフェイスの関連するフィールドが赤色でマークされます。 

   * **数値バリデーター**：数値バリデーターを使用して、フィールドまたは変数に入力される最小値と最大値を指定します。 数値バリデーターを作成する場合は、有効な検証パラメーターを必ず指定してください。 最小値と最大値の両方に数値を入力します。

   * **正規表現バリデーター**：正規表現バリデーターを使用して、フィールドまたは変数の値を検証するために使用される正規表現を定義します。 さらに、エラーメッセージをカスタマイズできます。 正規表現バリデーターを作成する場合は、有効な正規表現を必ず指定してください。

   >[!NOTE]
   >
   >フィールドと変数のバリデーターは、ユーザーまたは未保護データディクショナリ要素のリンケージタイプを持つフィールドまたは変数でのみ使用できます。

   ![リンケージ](assets/linkages.png)

1. リンケージを定義したら、「**次へ**」をタップします。Correspondence Management に「添付ファイル」画面が表示されます。

### 添付ファイルのセットアップ {#set-up-the-attachments}

1. 「**アセットを選択**」を選択します。
1. 「アセットを選択」画面で、レターに添付するアセットをタップし、「**完了**」をタップします。最初にアセットを「アセット」にアップロードしておく必要があります。PDF および Microsoft Office ドキュメントのみを添付することをお勧めしますが、画像を添付することもできます。DAM におけるアセットのアップロードに関する詳細は、「[アセットのアップロード](/help/assets/manage-assets.md)」を参照してください。
1. 要求処理担当者が順序を変更できないようにリストのアセット順をロックするには、「**順序をロック**」をタップします。このオプションを選択しない場合、要求処理担当者はリスト項目の順序を変更できます。
1. アセットの順序を変更するには、「アセットの順序変更」アイコン（![dragndrop](assets/dragndrop.png)）を押しながら、ドラッグ＆ドロップします。
1. 作成者が添付ファイルを削除できないようにするには、添付ファイルの前にある「**編集**」をタップし、添付ファイルを「必須」に指定します。CCR インターフェイスで事前に選択されるようにする場合は、添付ファイルを「選択済み」に指定します。
1. 選択 **ライブラリアクセス** をクリックして、ライブラリにアクセスできるようにします。 ライブラリアクセスが有効な場合、要求処理担当者はレターの作成時にコンテンツライブラリにアクセスし、添付ファイルを挿入できます。
1. 「**添付ファイルの設定**」を選択し、添付ファイルの最大数を指定します。

1. 「**保存**」をタップします。通信が作成され、「レター」ページ内のリストに表示されます。

Correspondence Management でレターテンプレートを作成したら、エンドユーザー/エージェント/要求処理担当者は CCR ユーザーインターフェイスでレターを開き、データを入力して、コンテンツを設定し、添付ファイルを管理することで、通信を作成できます。詳しくは、[通信の作成](/help/forms/using/create-correspondence.md)を参照してください。

## 各フィールドで使用できるリンケージのタイプ {#types-of-linkage-available-for-each-of-the-fields}

次の表に、様々なタイプのフィールドで使用できるリンケージのタイプを示します。

テーブルの次の値

* **はい**： 一番左の列に記載されているフィールドタイプが、そのマッピングタイプをサポートすることを意味します。
* **いいえ**： 一番左の列に記載されているフィールドタイプが、そのマッピングタイプをサポートしないことを意味します。
* **適用なし**： 一番左の列に記載されているフィールドタイプが適用できないことを意味します。

<table> 
 <tbody> 
  <tr> 
   <td> </td> 
   <td><strong>リテラル</strong></td> 
   <td><strong>Asset</strong></td> 
   <td><strong>データディクショナリ</strong></td> 
   <td><strong>無視</strong></td> 
   <td><strong>ユーザー</strong></td> 
   <td><strong>フィールド</strong></td> 
   <td><strong>変数</strong></td> 
  </tr> 
  <tr> 
   <td><strong>date</strong></td> 
   <td>はい</td> 
   <td>いいえ</td> 
   <td>はい</td> 
   <td>はい</td> 
   <td>はい</td> 
   <td>該当なし</td> 
   <td>該当なし</td> 
  </tr> 
  <tr> 
   <td><strong>time</strong></td> 
   <td>はい</td> 
   <td>いいえ</td> 
   <td>はい</td> 
   <td>はい</td> 
   <td>はい</td> 
   <td>該当なし</td> 
   <td>該当なし</td> 
  </tr> 
  <tr> 
   <td><strong>datetime</strong></td> 
   <td>はい</td> 
   <td>いいえ</td> 
   <td>はい</td> 
   <td>はい</td> 
   <td>はい</td> 
   <td>該当なし</td> 
   <td>該当なし</td> 
  </tr> 
  <tr> 
   <td><strong>integer</strong></td> 
   <td>はい</td> 
   <td>いいえ</td> 
   <td>はい</td> 
   <td>はい</td> 
   <td>はい<br /> </td> 
   <td>該当なし</td> 
   <td>該当なし</td> 
  </tr> 
  <tr> 
   <td><strong>float</strong></td> 
   <td>はい</td> 
   <td>いいえ</td> 
   <td>はい</td> 
   <td>はい</td> 
   <td>はい<br /> </td> 
   <td>該当なし</td> 
   <td>該当なし<br /> </td> 
  </tr> 
  <tr> 
   <td><strong>richtext</strong></td> 
   <td>対応</td> 
   <td>テキストのみ</td> 
   <td>はい</td> 
   <td>はい</td> 
   <td>はい</td> 
   <td>該当なし</td> 
   <td>該当なし</td> 
  </tr> 
  <tr> 
   <td><strong>プレーン</strong><strong>テキスト</strong></td> 
   <td>対応</td> 
   <td>テキストのみ</td> 
   <td>はい</td> 
   <td>はい</td> 
   <td>はい</td> 
   <td>該当なし</td> 
   <td>該当なし</td> 
  </tr> 
  <tr> 
   <td><strong>image</strong></td> 
   <td>不可</td> 
   <td>画像のみ</td> 
   <td>いいえ</td> 
   <td>はい</td> 
   <td>いいえ</td> 
   <td>該当なし</td> 
   <td>該当なし</td> 
  </tr> 
  <tr> 
   <td><strong>signature</strong></td> 
   <td>いいえ</td> 
   <td>不可</td> 
   <td>不可<br /> </td> 
   <td>はい</td> 
   <td>いいえ</td> 
   <td>該当なし</td> 
   <td>該当なし<br /> </td> 
  </tr> 
 </tbody> 
</table>

## レターテンプレートのコピーを作成する {#createcopylettertemplate}

既存のレターテンプレートを使用すると、ドキュメントフラグメントやデータディクショナリなど、類似したプロパティ、コンテンツ、継承されたアセットを持つレターテンプレートをすばやく作成できます。 これをおこなうには、レターをコピーして貼り付けます。

1. 「レター」ページで、1 つ以上のレターを選択します。 UI に「コピー」アイコンが表示されます。
1. 「コピー」をタップします。UI に「貼り付け」アイコンが表示されます。レターを貼り付ける前に、フォルダー内に移動することもできます。複数のフォルダーに同じ名前のアセットを保管することができます。フォルダーについて詳しくは、[フォルダーとアセットの整理](/help/forms/using/import-export-forms-templates.md#folders-and-organizing-assets)を参照してください。
1. 「貼り付け」をタップします。貼り付けダイアログが表示されます。同じ場所にレターをコピー&amp;ペーストすると、新しいレターのコピーに名前とタイトルが自動的に割り当てられますが、レターのタイトルと名前を編集することができます。
1. 必要に応じて、レターのコピーを保存するタイトルと名前を編集します。
1. 「貼り付け」をタップします。レターのコピーが作成されます。 これで、新しく作成したレターで必要な変更を行うことができます。
