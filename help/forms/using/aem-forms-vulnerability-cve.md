---
title: Experience Manager Formsの Log4j2 脆弱性の軽減
description: Experience Manager Formsの Log4j2 脆弱性の軽減
content-type: reference
products: SG_EXPERIENCEMANAGER/6.5/FORMS
topic-tags: Security
geptopics: SG_AEMFORMS/categories/jee
role: Admin
solution: Experience Manager, Experience Manager Forms
feature: Adaptive Forms
source-git-commit: c9d9a4d83a00587ee7b223e328abdef1bdd7438b
workflow-type: tm+mt
source-wordcount: '720'
ht-degree: 10%

---

# Experience Manager Formsの Log4j2 脆弱性の軽減

## 問題

Java ベースのアプリケーション向けの一般的なログライブラリである Apache Log4j2 に対して、セキュリティの重大な脆弱性が報告されています。 分析された脆弱性は次のとおりです。

<table border="1">
  <tr>
    <th>脆弱性</th>
    <th>影響の対象</th>
    <th>影響を受けないもの</th>
    <th>ステータス</th>
  </tr>
  <tr>
    <td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=2021-44228">CVE-2021-44228</a></td>
    <td rowspan="2">
      <ul>
        <li>JEE 上のExperience Manager 6.5 Forms（6.5 GA から 6.5.11 までのすべてのバージョン）</li>
        <li>JEE 上のExperience Manager 6.4 Forms（6.4 GA から 6.4.8 までのすべてのバージョン）</li>
        <li>JEE 上のExperience Manager 6.3 Forms（6.3 GA から 6.3.3 までのすべてのバージョン）</li>
        <li>Experience Manager 6.5 Forms Designer</li>
        <li>Experience Manager 6.4 Forms Designer</li>
        <li>自動フォーム変換サービス</li>
      </ul>
    </td>
    <td rowspan="2">
      <ul>
        <li>Experience Manager Forms Workbench（すべてのバージョン）</li>
        <li>OSGi 版 Experience Manager Forms（すべてのバージョン）</li>
      </ul>
    </td>
    <td rowspan="2">
      これらは修正されました。 修正プログラムや軽減手順について詳しくは、<strong> 解決策 </strong> の節を参照してください。
    </td>
  </tr>
  <tr>
    <td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=2021-45046">CVE-2021-45046</a></td>
  </tr>
  <tr>
    <td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-45105">CVE-2021-45105</a></td>
    <td rowspan="9" colspan="2">
      標準のログ設定のExperience Manager Forms リリースには影響しません。 その他のログ設定がある場合は、これらの設定に脆弱性がないか確認してください。
    </td>
  </tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=2021-44832">CVE-2021-44832</a></td><td></td></tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=2021-4104">CVE-2021-4104</a></td><td></td></tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-22963">CVE-2022-22963</a></td><td></td></tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-22965">CVE-2022-22965</a></td><td></td></tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-9488">CVE-2020-9488</a></td><td></td></tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-23302">CVE-2022-23307</a></td><td></td></tr>
</table>

>[!NOTE]
> 
> AEM 6.5.13.0 Forms以前のリリースには、Log4j ライブラリ（1.x と 2.17.1）が含まれています。 Formsおよびそれ以前のリリースのAEMのAEM Forms Log4j 1.x ライブラリは 6.5.13.0 報告された脆弱性に含まれておらず、Adobeが実行するAEM Forms コードスキャンでも脆弱性があると指摘されていません。 ただし、6.5.14 リリースでは、すべての Log4j 1.x ライブラリが削除されています。 AEM 6.5.14.0 以降のリリースのインストール手順については、[ リリースノート ](https://experienceleague.adobe.com/ja/docs/experience-manager-65/content/release-notes/release-notes) を参照してください。

## 解決策

この脆弱性のリスクを軽減するには、次のいずれかの方法を使用できます。

* 最新のサービスパックをインストールする
* 手動の緩和手順の使用

**最新のサービスパックのインストール**

>[!CAUTION]
> 
> Experience Manager Forms サービスパック 6.3.3.8 またはExperience Manager Forms サービスパック 6.4.8.4 にホットフィックスを適用している場合は、以下に示す脆弱性修正プログラムを含むサービスパックをインストールしないでください。 これらのサービスパックをインストールすると、ホットフィックスが上書きされる場合があります。 Adobeは、このようなシナリオの場合、**手動による軽減手順** を使用することをお勧めします。

<table border="1" cellpadding="8" cellspacing="0">
  <thead>
    <tr>
      <th>リリース</th>
      <th>バージョン</th>
      <th>リンクのダウンロード/ユーザーアクション</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>JEE 版 Experience Manager 6.5 Forms</td>
      <td>AEMForms-6.5.0-0038 （log4jv2.16）</td>
      <td rowspan="5"><a href="https://auth.services.adobe.com/en_US/index.html?callback=https%3A%2F%2Fims-na1.adobelogin.com%2Fims%2Fadobeid%2Fexc_app%2FAdobeID%2Ftoken%3Fredirect_uri%3Dhttps%253A%252F%252Fexperience.adobe.com%252F%2523old_hash%253Dold_hash%253D%252523%25252Fdownloads%2526from_ims%253Dtrue%253Fclient_id%253Dexc_app%2526api%253Dauthorize%2526scope%253Dab.manage%252Caccount_cluster.read%252Cadditional_info%252Cadditional_info.job_function%252Cadditional_info.projectedProductContext%252Cadditional_info.roles%252CAdobeID%252Cadobeio.appregistry.read%252Cadobeio_api%252Caudiencemanager_api%252Ccreative_cloud%252Cmps%252Copenid%252Corg.read%252Cpps.read%252Cread_organizations%252Cread_pc%252Cread_pc.acp%252Cread_pc.dma_tartan%252Csession%26state%3D%257B%2522jslibver%2522%253A%2522v2-v0.31.0-2-g1e8a8a8%2522%252C%2522nonce%2522%253A%25223811059492261787%2522%257D%26code_challenge_method%3Dplain%26use_ms_for_expiry%3Dtrue&amp;client_id=exc_app&amp;scope=ab.manage%2Caccount_cluster.read%2Cadditional_info%2Cadditional_info.job_function%2Cadditional_info.projectedProductContext%2Cadditional_info.roles%2CAdobeID%2Cadobeio.appregistry.read%2Cadobeio_api%2Caudiencemanager_api%2Ccreative_cloud%2Cmps%2Copenid%2Corg.read%2Cpps.read%2Cread_organizations%2Cread_pc%2Cread_pc.acp%2Cread_pc.dma_tartan%2Csession&amp;state=%7B%22jslibver%22%3A%22v2-v0.31.0-2-g1e8a8a8%22%2C%22nonce%22%3A%223811059492261787%22%7D&amp;relay=2cf36844-ac87-4b40-a6fe-9a06cd0a01b8&amp;locale=en_US&amp;flow_type=token&amp;dctx_id=v%3A2%2Cs%2Cf%2Cb8e64530-b013-11ee-a6c1-e721bdec0171&amp;idp_flow_type=login&amp;response_type=token&amp;profile_filter=%7B%22findFirst%22%3Atrue%2C+%22fallbackToAA%22%3Atrue%2C+%22preferForwardProfile%22%3Atrue%2C+%22searchEntireCluster%22%3Afalse%7D%3B+hasPC%28%22dma_tartan%22%29&amp;code_challenge_method=plain&amp;redirect_uri=https%3A%2F%2Fexperience.adobe.com%2F%23old_hash%3Dold_hash%3D%2523%252Fdownloads%26from_ims%3Dtrue%3Fclient_id%3Dexc_app%26api%3Dauthorize%26scope%3Dab.manage%2Caccount_cluster.read%2Cadditional_info%2Cadditional_info.job_function%2Cadditional_info.projectedProductContext%2Cadditional_info.roles%2CAdobeID%2Cadobeio.appregistry.read%2Cadobeio_api%2Caudiencemanager_api%2Ccreative_cloud%2Cmps%2Copenid%2Corg.read%2Cpps.read%2Cread_organizations%2Cread_pc%2Cread_pc.acp%2Cread_pc.dma_tartan%2Csession&amp;use_ms_for_expiry=true#/"> ソフトウェア配布 </a> からダウンロードします。</td>
    </tr>
    <tr>
      <td>JEE 版 Experience Manager 6.4 Forms</td>
      <td>AEMForms-6.4.0-0027</td>
    </tr>
    <tr>
      <td>JEE 版 Experience Manager 6.3 Forms</td>
      <td>AEMForms-6.3.0-0047</td>
    </tr>
    <tr>
      <td>Experience Manager 6.5 Forms Designer</td>
      <td>AEM Forms Designer v650.019</td>
    </tr>
    <tr>
      <td>Experience Manager 6.4 Forms Designer</td>
      <td>AEM Forms Designer v640.012</td>
    </tr>
    <tr>
      <td>自動フォーム変換サービス</td>
      <td>軽減手順が特定され、サービスにパッチが適用されました。</td>
      <td>ユーザーアクションはありません。</td>
    </tr>
  </tbody>
</table>

## 手動の緩和手順の使用

この問題を軽減するには、Experience Manager 6.5 Forms（log4j-core バージョン 2.10 以降）、Experience Manager 6.4 Forms（log4j-core バージョン 2.10 以前）、Experience Manager 6.3 Forms（log4j-core バージョン 2.10 以前）で、次の手順を実行します。

1. すべてのサーバーインスタンスとロケーターをシャットダウンします。

1. 次の場所にある脆弱な `log4j-core-2.xx.jar` から `org/apache/logging/log4j/core/lookup/JndiLookup.class` を削除します。

   * **配置可能な EAR:**

   ```javascript
   <FORMS_INSTALLATION_DIRECTORY>/configurationManager/export/adobe-livecycle-[jboss|weblogic|websphere].ear
   ```

   * **GemFire または Geode ロケーター：**

   ```javascript
   <FORMS_INSTALLATION_DIRECTORY>/lib/caching/lib
   ```

   デプロイ可能な EAR を更新するには、オペレーティングシステムに応じて、次のいずれかの方法で脆弱な `log4j-core-2.xx.jar` から `JndiLookup.class` を削除できます。

   * （Oracle WebLogic または Redhat JBoss を搭載した Linux）：次のコマンドを実行します。 次のコマンドを実行する前に、`version` およびアプリケーションサーバーの情報を更新します。

   ```javascript
   unzip adobe-livecycle-<weblogic|jboss>.ear lib/log4j-core-<version>.jar
   ```

   ```javascript
   zip -d lib/log4j-core-xxx.jar org/apache/logging/log4j/core/lookup/JndiLookup.  class
   ```

   ```javascript
   zip -ru adobe-livecycle-jboss.ear lib/log4j-core-<version>.jar
   ```

   * （IBM WebSphere を使用している Linux）：次のコマンドを実行します。 次のコマンドを実行する前に、`version` およびアプリケーションサーバーの情報を更新します。

   ```javascript
   unzip adobe-livecycle-websphere.ear log4j-core-<version>.jar
   ```

   ```javascript
   zip -d log4j-core-xxx.jar org/apache/logging/log4j/core/lookup/JndiLookup.class
   ```

   * （Microsoft Windows）: [7-Zip](https://www.7-zip.org/) などの GUI ツールを使用して、クラスファイルを削除します。
1. 各アプリケーションサーバーインスタンス（ノード）とすべてのロケーター（複数の場合）について手順 2 を繰り返します。

1. jar を更新した後、変更した EAR を再デプロイし、すべてのロケータープロセスとサーバーインスタンスを再起動します。

>[!NOTE]
> 
> * log4j-core-2.xx jar のオリジナルコピーを、更新されたコピーに置き換えます。 その他の変更は必要ありません。
> * Configuration Manager を再度実行すると、`<FORMS_INSTALLATION_DIRECTORY/configurationManager/export` の内容が上書きされる可能性があります。   これが発生するたびに上記の変更が実施されるのを回避するには、`<FORMS_INSTALLATION_DIRECTORY>/deploy/adobe-core-[jboss|weblogic|websphere].ear` で jar を更新します。 これにより、Configuration Manager で生成された `adobe-livecycle-[jboss|weblogic|websphere].ear` に、更新された `log4j-core-2.xx jar` が既に含まれるようになります。
> * デプロイ可能なアーティファクトに対する手動の変更は、パッチ適用やアップグレード時に上書きされる場合があります。 この場合は、手順を再適用します。

## 参照

[https://logging.apache.org/log4j/2.x/security.html](https://logging.apache.org/security.html)

**軽減手順の実行に関するその他の質問や問題がある場合、誰に連絡すればよいですか？**

[Adobe サポートに連絡するか ](https://experienceleague.adobe.com/?lang=ja&amp;support-solution=Experience+Manager#support) または [ サポートチケット ](https://experienceleague.adobe.com/en/docs/customer-one/using/home#submit-ticket) を発行してください。

**軽減手順の実行に関するその他の質問や問題がある場合、誰に連絡すればよいですか？**
[ 法律上の注意 ](https://helpx.adobe.com/legal/legal-notices.html)    |    [ オンラインプライバシーポリシー ](https://www.adobe.com/jp/privacy.html)