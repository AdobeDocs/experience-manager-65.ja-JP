---
title: OSGi 上の Forms 中心のワークフロー - ステップリファレンス
description: OSGi ステップ上のForms中心のワークフローを使用すると、アダプティブフォームベースのワークフローを迅速に構築できます。
products: SG_EXPERIENCEMANAGER/6.5/FORMS
topic-tags: publish
docset: aem65
exl-id: 470fcfda-dfde-437c-b539-d5af1e13a7d6
source-git-commit: e2a3470784beb04c2179958ac6cb98861acfaa71
workflow-type: tm+mt
source-wordcount: '7687'
ht-degree: 75%

---

# OSGi 上の Forms 中心のワークフロー - ステップリファレンス {#forms-centric-workflow-on-osgi-step-reference}

| バージョン | 記事リンク |
| -------- | ---------------------------- |
| AEM as a Cloud Service | [ここをクリックしてください](https://experienceleague.adobe.com/docs/experience-manager-cloud-service/content/forms/create-form-centric-workflows/aem-forms-workflow-step-reference.html?lang=ja) |
| AEM 6.5 | この記事 |

ワークフローモデルを使用して、ビジネスロジックを、自動化された繰り返しプロセスに変換します。モデルは、一連の手順を定義して実行するのに役立ちます。ワークフローを一時的なものにするか、複数のリソースを使用するかなど、モデルのプロパティを定義することもできます。[ビジネスロジックを達成するために、様々な AEM ワークフローステップをモデルに含めることができます](/help/sites-developing/workflows-models.md#extending-aem)。

## Forms のワークフローステップ {#forms-workflow-steps}

Forms Workflow手順は、AEMワークフローでAEM Forms固有の操作を実行します。 これらの手順を使用すると、OSGi 上で、アダプティブフォームベースのForms中心のワークフローを迅速に構築できます。 これらのワークフローは、基本的なレビューワークフローおよび承認ワークフローの開発、ファイアウォール内およびファイアウォール間のビジネスプロセスの開発に使用できます。また、Forms Workflow手順を使用して、Document Services を開始し、Adobe Sign署名ワークフローと統合し、その他のAEM Forms操作を実行することもできます。 これらのステップをワークフローで使用するには、[AEM Forms アドオン](https://www.adobe.com/go/learn_aemforms_documentation_63_jp)が必要です。

Forms 中心のワークフローステップは、AEM ワークフローで AEM Forms 固有の操作を実行します。これらの手順を使用すると、OSGi 上で、アダプティブFormsベースのForms中心のワークフローをすばやく構築できます。 これらのワークフローは、基本的なレビューワークフローおよび承認ワークフローの開発、組織内およびファイアウォール全体のビジネスプロセスの開発に使用できます。

>[!NOTE]
>
>ワークフローモデルが外部ストレージ用にマークされている場合、すべてのForms Workflow手順で、変数オプションのみを選択して、データファイルと添付ファイルを保存または取得できます。

## タスクを割り当てステップ {#assign-task-step}

タスクの割り当て手順では、タスクを作成し、ユーザーまたはグループに割り当てます。 タスクの割り当てと共に、コンポーネントは、タスクのアダプティブフォームまたは非インタラクティブPDFも指定します。 アダプティブフォームはユーザーからの入力を受け付けるために必要であり、非インタラクティブ PDF または読み取り専用のアダプティブフォームはレビュー専用のワークフローに使用されます。

このコンポーネントを使用すると、タスクの動作を制御することもできます。例えば、レコードの自動ドキュメントの作成、特定のユーザーまたはグループへのタスクの割り当て、送信されたデータのパスの指定、事前入力されるデータのパスの指定、デフォルトのアクションの指定などです。 タスクを割り当てステップには、次のプロパティがあります。

* **タイトル：** タスクのタイトル。 タイトルは AEM インボックスに表示されます。
* **説明：** タスクで実行される操作の説明。 この情報は、共有開発環境で作業している場合に他のプロセス開発者にとって有用です。

* **サムネールのパス：** タスクのサムネールのパス。 パスが指定されていない場合、アダプティブフォームのデフォルトのサムネールが表示され、レコードのドキュメントの場合はデフォルトのアイコンが表示されます。
* **ワークフローステージ：** 1 つのワークフローに複数のステージを含めることができます。これらのステージは、AEM インボックスに表示されます。これらのステージは、モデルのプロパティ（サイドキック／ページ／ページのプロパティ／ステージ）で定義できます。
* **優先度：**&#x200B;選択した優先度が AEM インボックスに表示されます。「高」、「中」、「低」の各オプションを使用できます。デフォルト値は「中」です。
* **期限：** タスクが期限切れとマークされるまでの日数または時間数を指定します。 「**オフ**」を選択した場合、タスクが期限切れとマークされることはありません。タイムアウトハンドラーを指定して、タスクが期限切れになった後に特定のタスクを実行することもできます。

* **日：**&#x200B;タスクを完了するまでの日数。この日数は、タスクがユーザーに割り当てられた後にカウントされます。タスクが完了せず、「日数」フィールドで指定された日数を超えた場合、選択すると、期限後にタイムアウトハンドラーがトリガーされます。
* **時間：** タスクを完了するまでの時間数。 時間数は、タスクがユーザーに割り当てられた後にカウントされます。タスクが完了せず、「時間」フィールドで指定された時間数を超えた場合、タイムアウトハンドラーが期限の時間後にトリガーされます。
* **期限後にタイムアウト：**&#x200B;このオプションを選択して、タイムアウトハンドラー選択フィールドを有効にします。
* **タイムアウトハンドラー：**&#x200B;タスクを割り当てステップが期限切れになったときに実行するスクリプトを選択します。CRX リポジトリ（[apps]/fd/dashboard/scripts/timeoutHandler）にあるスクリプトを選択できます。指定されたパスは crx リポジトリに存在しません。このパスは、使用する前に管理者が作成します。
* **タスクの詳細で最後のタスクのアクションとコメントを強調表示する：**&#x200B;タスクの詳細セクションで最後に実行されたアクションと受け取ったコメントを表示するには、このオプションを選択します。
* **タイプ：**&#x200B;ワークフローの開始時に入力するドキュメントのタイプを選択します。アダプティブフォーム、読み取り専用アダプティブフォーム、非インタラクティブ PDF ドキュメント、インタラクティブ通信エージェント UI、またはインタラクティブ通信 web チャンネルドキュメントを選択できます。
* **アダプティブフォームを使用**：入力されたアダプティブフォームを検索する方法を指定します。このオプションは、「タイプ」ドロップダウンリストから「アダプティブフォーム」または「読み取り専用アダプティブフォーム」を選択した場合に使用できます。アダプティブフォームは、ワークフローに送信されたもの、絶対パスで利用できるもの、変数内のパスで利用できるものを使用できます。パスを指定するには、String 型の変数を使用します。\
  複数のアダプティブフォームをワークフローに関連付けることができます。それにより、使用可能な入力メソッドを使用して、実行時にアダプティブフォームを指定できます。

* **インタラクティブ通信を使用：** 入力されたインタラクティブ通信を検索する方法を指定します。 インタラクティブな通信は、ワークフローに送信されたもの、絶対パスで利用できるもの、変数内のパスで利用できるものを使用できます。パスを指定するには、String 型の変数を使用します。このオプションは、「タイプ」ドロップダウンリストで「インタラクティブ通信エージェント UI」または「インタラクティブ通信 web チャンネルドキュメント」を選択した場合に使用できます。

>[!NOTE]
>
>AEM Inbox で Interactive Communications Agent UI にアクセスするには、cm-agent-users と workflow-users グループの割り当てが必要です。

* **アダプティブフォームまたはインタラクティブ通信パス**：アダプティブフォームまたはインタラクティブ通信のパスを指定します。 ワークフローに送信済み、または絶対パスで使用可能なアダプティブフォームを使用できます。または、文字列データタイプの変数に保存されたパスからアダプティブフォームを取得できます。
* **次を使用して入力 PDF を選択**：非インタラクティブ PDF ドキュメントのパスを指定します。このフィールドは、「タイプ」フィールドで非インタラクティブ PDF ドキュメントを選択した場合に使用できます。入力 PDF は、ペイロードに対する相対パス、絶対パスで保存されたもの、またはドキュメントデータ型の変数を使用して選択できます。例えば、[Payload_Directory]/Workflow/PDF/credit-card.pdf となります。このパスは crx リポジトリに存在しません。このパスは、使用する前に管理者が作成します。「レコードのドキュメント」オプションを有効にするか、「PDFパス」オプションを使用するには、フォームテンプレートベースのアダプティブフォームが必要です。
* **完了したタスクの場合は、アダプティブフォームを次のようにレンダリングします。**：タスクが完了とマークされると、アダプティブフォームを読み取り専用のアダプティブフォームまたはPDFドキュメントとしてレンダリングできます。 「レコードのドキュメント」オプションを有効にするか、アダプティブフォームをレコードのドキュメントとしてレンダリングするフォームテンプレートベースのアダプティブフォームが必要です。
* **埋め込み済み**：以下のフィールドは、タスクへの入力として使用できます。

   * **[!UICONTROL 次を使用して入力データファイルを選択]**：入力データファイルのパス（.json、.xml、.doc またはフォームデータモデル）。ペイロードに対する相対パスを使用して入力データファイルを取得したり、ドキュメント、XML、JSON データ型の変数に格納されたファイルを取得したりできます。例えば、ファイルには、AEM インボックスアプリケーションを介してフォームに送信されるデータが含まれています。一例として、[Payload_Directory]/workflow/data というパスを指定します。

   * **次を使用して入力添付ファイルを選択**：指定した場所にある添付ファイルは、タスクに関連付けられたフォームに添付されます。パスは、ペイロードを基準とした相対パスにすることもできますし、ドキュメントの ArrayList 型の変数に格納された添付ファイルを取得することもできます。一例として、[Payload_Directory]/attachments/ というパスを指定します。ペイロードを基準にして添付ファイルを指定するか、ドキュメントタイプ（配列リスト／ドキュメント）変数を使用して、アダプティブフォームの入力添付ファイルを指定できます。

      * **入力 JSON を選択：** ペイロードに対する相対パス、または Document、JSON、または Form Data Model データタイプの変数に格納されたパスを使用して、入力 JSON ファイルを選択します。 このオプションは、「タイプ」ドロップダウンリストで「インタラクティブ通信エージェント UI」または「インタラクティブ通信 web チャンネルドキュメント」を選択した場合に使用できます。
      * **カスタム事前入力サービスを選択**：事前入力サービスを選択してデータを取得し、インタラクティブ通信 web チャンネルドキュメントまたはエージェント UI に事前入力します。
      * **上で選択したインタラクティブ通信の事前入力サービスを使用**：このオプションを使用して、「インタラクティブ通信を使用」ドロップダウンリストで定義されたインタラクティブ通信の事前入力サービスを使用します。
      * **要求属性マッピング**：要求属性マッピングセクションを使用して、[要求属性の名前と値を定義](../../forms/using/work-with-form-data-model.md#bindargument)します。リクエストで指定された属性名と値に基づいて、データソースから詳細を取得します。リテラル値または String データ型の変数を使用して、要求属性値を定義できます。\
        事前入力サービスとリクエスト属性のマッピングオプションは、「タイプ」ドロップダウンリストで「インタラクティブ通信エージェント UI」または「インタラクティブ通信 web チャンネルドキュメント」を選択した場合にのみ使用できます。

* **送信される情報：**&#x200B;以下のフィールドは、タスクの出力先として使用できます。

   * **次を使用して出力データファイルを保存**：データファイル（.json、.xml、.doc またはフォームデータモデル）を保存します。このデータファイルには、関連付けられたフォームを介して送信された情報が含まれます。ペイロードに対する相対パスを使用して出力データファイルを保存するか、ドキュメント、XML または JSON データ型の変数に保存できます。例えば、[Payload_Directory]/Workflow/data のように指定します。ここで、data はファイルです。
   * **次を使用して添付ファイルを保存**：タスクに指定されたフォーム添付ファイルを保存します。ペイロードに対する相対パスを使用して添付ファイルを格納するか、ドキュメントデータタイプの配列リストの変数に保存できます。
   * **次を使用してレコードのドキュメントを保存**：レコードのドキュメントファイルの保存先のパス。例えば、[Payload_Directory]/DocumentofRecord/credit-card.pdf のように指定します。レコードのドキュメントは、ペイロードに対する相対パスを使用して保存するか、ドキュメントデータ型の変数に格納できます。「**ペイロードを基準とする**」オプションを選択した場合、パスフィールドを空のままにすると、レコードのドキュメントは生成されません。このオプションは、「タイプ」ドロップダウンリストから「アダプティブフォーム」を選択した場合にのみ使用できます。

   * **次を使用して web チャネルデータを保存：** ペイロードに対する相対パスを使用して web チャネルデータファイルを保存するか、ドキュメント、JSON、フォームデータモデルのいずれかのデータタイプの変数に格納します。このオプションは、「タイプ」ドロップダウンリストから「インタラクティブな通信エージェント UI」を選択した場合にのみ使用できます。
   * **次を使用して PDF ドキュメントを保存：** ペイロードに対する相対パスを使用して PDF ドキュメントを保存するか、ドキュメント データタイプの変数に格納します。このオプションは、「タイプ」ドロップダウンリストから「インタラクティブな通信エージェント UI」を選択した場合にのみ使用できます。
   * **次を使用してレイアウトテンプレートを保存：** ペイロードに対する相対パスを使用してレイアウトテンプレートを保存するか、ドキュメントデータタイプの変数に格納します。[レイアウトテンプレート](../../forms/using/layout-design-details.md) は、Forms Designer を使用して作成した XDP ファイルを参照します。このオプションは、「タイプ」ドロップダウンリストから「インタラクティブな通信エージェント UI」を選択した場合にのみ使用できます。

* 「**担当者／割り当て」オプション**：タスクをユーザーに割り当てる方法を指定します。参加者選択スクリプトを使用してタスクを動的にユーザーまたはグループに割り当てることも、タスクを特定の AEM ユーザーまたはグループに割り当てることもできます。
* **参加者選択：** このオプションは、 **ユーザーまたはグループに対して動的に** 「割り当てオプション」フィールドでオプションが選択されている。 ユーザーまたはグループを動的に選択するには、ECMAScript またはサービスを使用できます。詳しくは、[ユーザーへのワークフローの動的な割り当て](https://helpx.adobe.com/jp/experience-manager/kb/HowToAssignAWorkflowDynamicallyToParticipants.html)および[カスタムの Adobe Experience Manager 動的参加者ステップの作成](https://experienceleague.adobe.com/docs/experience-manager-learn/getting-started-wknd-tutorial-develop/overview.html?lang=ja&amp;CID=RedirectAEMCommunityKautuk)を参照してください。

* **参加者：**&#x200B;このフィールドは、「**参加者選択**」フィールドで「**[!UICONTROL com.adobe.granite.workflow.core.process.RandomParticipantChooser]**」オプションが選択されている場合に使用できます。このフィールドでは、RandomParticipantChooser オプションのユーザーまたはグループを選択できます。

* **担当者**：このフィールドは、「**参加者選択**」フィールドで「**[!UICONTROL com.adobe.fd.workspace.step.service.VariableParticipantChooser]**」オプションが選択されている場合に使用できます。「 」フィールドで、String データ型の変数を選択して、担当者を定義できます。

* **引数：**&#x200B;このフィールドは、「参加者選択」フィールドで RandomParticipantChoose スクリプト以外のスクリプトが選択されている場合に使用できます。「 」フィールドでは、参加者選択フィールドで選択したスクリプトのコンマ区切りの引数のリストを指定できます。

* **ユーザーまたはグループ：**&#x200B;選択したユーザーまたはグループにタスクが割り当てられます。このオプションは、「**割り当てオプション**」フィールドで「**特定のユーザーまたはグループに割り当て**」オプションを選択した場合に使用できます。このフィールドには、ワークフローユーザーグループのすべてのユーザーとグループが一覧表示されます。\
  「**ユーザーまたはグループ**」ドロップダウンメニューには、ログインユーザーおよびグループがアクセスできるリストが表示されます。ユーザー名の表示は、その特定のユーザーの crx-repository の **users** ノードに対するアクセス権限があるかどうかによって異なります。

* **[!UICONTROL 通知メールを送信]**： メール通知を担当者に送信するには、このオプションを選択します。この通知は、タスクがユーザーまたはグループに割り当てられたときに送信されます。「**[!UICONTROL 受信者のメールアドレス]**」オプションを使用して、メールアドレスを取得するメカニズムを指定できます。

* **[!UICONTROL 受信者のメールアドレス]**：メールアドレスは、変数に格納したり、リテラルを使用して永続的なメールアドレスを指定したり、担当者のプロファイルで指定したデフォルトのメールアドレスを使用したりできます。リテラルまたは変数を使用して、グループのメールアドレスを指定できます。変数オプションは、メールアドレスを動的に取得して使用する場合に便利です。「**[!UICONTROL 担当者のデフォルトのメールアドレスを使用する]**」オプションは、1 人の担当者に対してのみ使用できます。この場合、担当者のユーザープロファイルに保存されているメールアドレスが使用されます。

* **HTML メールテンプレート**： 通知メールのメールテンプレートを選択します。テンプレートを編集するには、crx リポジトリの /libs/fd/dashboard/templates/email/htmlEmailTemplate.txt にあるファイルを変更します。
* **委任先：** AEM Inbox には、割り当てられたワークフローを別のユーザーに委任する、ログインしたユーザーに対するオプションが用意されています。 同じグループ内または別のグループのワークフローユーザーにデリゲートできます。タスクが 1 人のユーザーに割り当てられ、「**担当者グループのメンバーへのデリゲーションを許可**」オプションが選択されている場合は、そのタスクを別のユーザーまたはグループにデリゲートできません。
* **共有設定**：AEM インボックスには、インボックス内の 1 つまたはすべてのタスクを他のユーザーと共有するオプションが用意されています。
   * 「**担当者がインボックスで明示的に共有することを許可する**」オプションが選択されている場合、ユーザーは AEM インボックスでタスクを選択し、別の AEM ユーザーと共有できます。
   * 「**担当者がインボックスの共有を使用して共有することを許可する**」オプションを選択し、ユーザーがインボックス項目を共有したり、他のユーザーがインボックス項目にアクセスできるようにした場合、前述のオプションが有効になっているタスクのみが他のユーザーと共有されます。

* **アクション／デフォルトのアクション**：標準提供されている送信、保存およびリセットなどのアクションを使用できます。すべてのアクションは、デフォルトで有効になっています。
* **ルート変数：** ルート変数の名前。 ユーザーが AEM インボックスで選択したカスタムアクションは、ルート変数で取得します。
* **ルート：** 1 つのタスクを別々のルートに分岐させることができます。 AEM インボックスで選択すると、ルートから値が返され、選択したルートに基づいてワークフローが分岐します。ルートは、文字列データ型の配列の変数に格納するか、**リテラル**&#x200B;を選択して手動でルートを追加できます。

* **タイトル**：ルートのタイトルを指定します。これは AEM インボックスに表示されます。
* **Coral アイコン**：Coral アイコンの HTML 属性を指定します。Adobe CoralUI ライブラリでは、多数のタッチファーストなアイコンを提供します。ルートのアイコンを選択して使用できます。アイコンは、タイトルと共に AEM インボックスに表示されます。変数にルートを格納した場合、ルートにはデフォルトの「タグ」Coral アイコンが使用されます。
* **担当者がコメントを追加することを許可**： タスクのコメントを有効にするには、このオプションを選択します。担当者は、タスクの送信時に AEM インボックス内からコメントを追加できます。
* **コメントを変数に保存**：コメントを文字列データタイプの変数に保存します。このオプションは、「**担当者がコメントを追加することを許可**」チェックボックスを選択した場合にのみ表示されます。

* **担当者が添付ファイルをタスクに追加することを許可**：タスクの添付ファイルを有効にする場合は、このオプションを選択します。 担当者は、タスクの送信時に AEM インボックス内から添付ファイルを追加できます。
* **次を使用して出力タスクの添付ファイルを保存**：添付ファイルフォルダーの場所を指定します。出力タスクの添付ファイルは、ペイロードに対する相対パスを使用するか、ドキュメントデータタイプの配列の変数に保存できます。このオプションは、「**担当者がタスクに添付ファイルを追加することを許可**」チェックボックスを選択し、「**フォーム／ドキュメント**」タブの「**タイプ**」ドロップダウンリストから、「**アダプティブフォーム**」、「**読み取り専用アダプティブフォーム**」、「**非インタラクティブ PDF ドキュメント**」のいずれかを選択した場合にのみ表示されます。

>[!NOTE]
>
>実行時にエージェント UI の「添付ファイル」タブを使用して、添付ファイルをインタラクティブ通信に関連付けます。関連付けられた添付ファイルは、作業項目を完了状態で開くと、サイドキックにタスクの添付ファイルとして表示されます。

* **カスタムメタデータを使用：** カスタムメタデータフィールドを有効にするには、このオプションを選択します。 カスタムメタデータは、メールのテンプレートで使用します。
* **カスタムメタデータ：**&#x200B;メールテンプレートのカスタムメタデータを選択します。カスタムメタデータは、crx リポジトリの apps/fd/dashboard/scripts/metadataScripts にあります。指定されたパスは crx リポジトリに存在しません。このパスは、使用する前に管理者が作成します。また、カスタムメタデータ用のサービスを使用することもできます。WorkitemUserMetadataService インターフェイスを拡張して、カスタムメタデータを提供することもできます。
* **前の手順のデータを表示**：このオプションを選択すると、以前の担当者、タスクに対して既に実行されたアクション、タスクに追加されたコメント、完了したタスクのレコードのドキュメントがある場合、担当者がそれらを表示できるようになります。
* **以降の手順のデータを表示する：**&#x200B;このオプションを選択すると、後続の担当者が実行したアクションと追加したコメントを、現在の担当者が表示できるようになります。また、現在の担当者が、完了したタスクのレコードのドキュメント（ある場合）を表示することもできます。
* **データタイプの表示：** デフォルトでは、担当者はレコードのドキュメント、担当者、実行されたアクション、および前後の担当者が追加したコメントを表示できます。 「データタイプの表示」オプションを使用すると、担当者に表示されるデータタイプを制限できます。

>[!NOTE]
>
>外部データストレージの [!DNL Adobe Experience Manager] ワークフローモデルを設定する場合、「タスクを割り当て」ステップをドラフトとして保存するオプションと、「タスクを割り当て」ステップの履歴を取得するオプションは無効です。また、インボックスでは、保存するオプションは無効になっています。

## 「メールを送信」ステップ {#send-email-step}

電子メールステップを使用して、電子メール ( レコードのドキュメントを含む電子メール、アダプティブフォームのリンク、インタラクティブPDFのリンク、添付通信ドキュメントなど ) を送信します。 メールを送信ステップは、[HTML メール](https://ja.wikipedia.org/wiki/HTML電子メール)をサポートします。HTML メールは、受信者のメールクライアントや画面サイズにレスポンシブに対応します。HTML メールテンプレートを使用して、メールの外観、カラースキーム、動作を定義できます。

メールステップは、Day CQ Mail Service を使用してメールを送信します。電子メールステップを使用する前に、 [電子メールサービス](../../forms/using/aem-forms-workflow.md) が設定されている。 メール手順には、次のプロパティがあります。

**タイトル：** ステップのタイトルは、ワークフローエディターでステップを識別するのに役立ちます。

**説明：**&#x200B;説明は、共通の開発環境で作業する他のプロセス開発者にとって有用です。

**メールの件名**：件名は、ワークフローのメタデータから取得することも、手動で指定することも、変数に格納されている値から取得することもできます。次のいずれかのオプションを選択します。

* **リテラル** - 件名を手動で指定します。
* **ワークフローメタデータから取得** - メタデータプロパティから件名を取得します。
* **変数** - 文字列データ型の変数に格納された値から件名を取得します。

**HTML メールテンプレート**：メールの HTML テンプレート。変数はメールテンプレートで指定できます。メールステップは、入力のため、テンプレートに含まれるすべての変数を抽出して表示します。

**メールテンプレートメタデータ**：メールテンプレートの変数の値は、ユーザー指定の値、オーサーサーバーまたはパブリッシュサーバー上のアセットのパス、画像、ワークフローメタデータプロパティのいずれにもすることができます。

* **リテラル：**&#x200B;このオプションは、指定する値が正確に分かっている場合に使用します。例えば、[example@example.com](mailto:example@example.com) と指定します。

* **ワークフローメタデータ：** 使用する値がワークフローのメタデータプロパティに保存されている場合は、このオプションを使用します。 オプションを選択した後、「ワークフローメタデータ」オプションの下にある空のテキストボックスに、メタデータプロパティ名を入力します。例えば、emailAddress と指定します。
* **アセット URL：**&#x200B;インタラクティブ通信の web リンクをメールに埋め込むには、このオプションを使用します。このオプションを選択したら、埋め込むインタラクティブ通信を参照して選択します。アセットは、オーサーまたはパブリッシュサーバー上に配置できます。
* **画像：** 画像を電子メールに埋め込むには、「 」オプションを使用します。 このオプションを選択したら、画像を参照して選択します。「画像」オプションは、メールテンプレートで使用できる画像タグ（&lt;img src=&quot;&#42;&quot;/>）に対してのみ使用できます。

**送信者/受信者の電子メールアドレス：** を選択します。 **リテラル** 電子メールアドレスを手動で指定するか、 **ワークフローメタデータから取得** オプションを使用して、メタデータプロパティから電子メールアドレスを取得できます。 「**ワークフローメタデータから取得**」オプションのメタデータプロパティ配列のリストを指定することもできます。「**変数**」オプションを選択して、文字列データ型の変数に格納されている値からメールアドレスを取得します。

**添付ファイル：**&#x200B;指定された場所で使用可能なアセットがメールに添付されます。アセットのパスは、ペイロードに対する相対パスまたは絶対パスのどちらでもかまいません。一例として、[Payload_Directory]/attachments/ というパスを指定します。

「**変数**」オプションを選択して、ドキュメント、XML、JSON データ型の変数に格納された添付ファイルを取得します。

**ファイル名：**&#x200B;メール添付ファイルの名前です。メールステップは、添付ファイルの元のファイル名を指定されたファイル名に変更します。この名前は、手動で指定することも、ワークフローメタデータのプロパティまたは変数から取得することもできます。指定する値が正確に分かっている場合は、「**リテラル**」オプションを使用します。「**変数**」オプションを使用して、文字列データ型の変数に格納された値からファイル名を取得します。使用する値がワークフローメタデータプロパティに保存されている場合は、「**ワークフローメタデータから取得**」オプションを使用します。

## レコードのドキュメントを生成ステップ {#generate-document-of-record-step}

フォームの入力時または送信時には、そのフォームを印刷物またはドキュメント形式で記録しておくことができます。これは、レコードのドキュメント (DoR) と呼ばれます。 レコードのドキュメントを生成の手順を使用して、アダプティブフォームの読み取り専用バージョンまたはインタラクティブPDFバージョンを作成できます。 PDFバージョンには、アダプティブフォームのレイアウトと共にフォームに入力された情報が含まれています。

レコードのドキュメントステップには、次のプロパティがあります。

**アダプティブフォームを使用：**&#x200B;入力するアダプティブフォームを検索する方法を指定します。アダプティブフォームは、ワークフローに送信されたもの、絶対パスで利用できるもの、変数内のパスで利用できるものを使用できます。文字列データ型の変数を使用して、「**変数を選択して解決**」フィールドのパスを指定できます。\
複数のアダプティブフォームをワークフローに関連付けることができます。それにより、使用可能な入力メソッドを使用して、実行時にアダプティブフォームを指定できます。

**アダプティブフォームのパス**：アダプティブフォームのパスを指定します。このフィールドは、「**アダプティブフォームを使用**」フィールドから「**絶対パスで使用可能**」オプションを選択した場合に使用できます。

**次を使用して入力データを選択：**&#x200B;アダプティブフォームの入力データのパス。ペイロードに対して相対的な場所にデータを保持したり、データの絶対パスを指定したり、ドキュメント、JSON または XML データ型の変数に格納されたデータを取得したりできます。入力データは、レコードのドキュメントを作成するためにアダプティブフォームとマージされます。

**次を使用して入力添付ファイルのパスを選択：**&#x200B;添付ファイルのパス。これらの添付ファイルは「レコードのドキュメント」に含まれます。添付ファイルは、ペイロードに対する相対的な場所に保持したり、添付ファイルの絶対パスを指定したり、ドキュメントデータ型配列の変数に格納された添付ファイルを取得したりできます。

フォルダーのパスを指定すると、添付ファイルなど、そのフォルダー内で直接使用可能なすべてのファイルがレコードのドキュメントに添付されます。指定された添付ファイルのパスに直接存在するフォルダー内に使用できるファイルがある場合、そのファイルはレコードのドキュメントに添付ファイルとして含まれます。直接存在するフォルダー内にフォルダーがある場合、それらはスキップされます。

**生成されたレコードのドキュメントを次のオプションを使用して保存**：レコードのドキュメントファイルを保持する場所を指定します。ペイロードフォルダーを上書き、ペイロードディレクトリ内の任意の場所にレコードのドキュメントを配置、ドキュメントデータタイプの変数にレコードのドキュメントを格納することを選択できます。

**ロケール**：レコードのドキュメントの言語を指定します。ドロップダウンリストからロケールを選択する場合は「**リテラル**」を選択し、文字列データ型の変数に格納されている値からロケールを取得する場合は「**変数**」を選択します。ロケールの値を変数に格納する際は、ロケールコードを定義する必要があります。例えば、英語は **en_US**、フランス語は **fr_FR** と指定します。

## フォームデータモデルサービスを呼び出しステップ {#invoke-form-data-model-service-step}

[AEM Forms のデータ統合](../../forms/using/data-integration.md)機能により、複数の異なるデータソースを設定して接続することができます。これらのデータソースは、データベース、Web サービス、REST サービス、OData サービス、CRM ソリューションにすることができます。 AEM Formsデータ統合を使用すると、様々なサービスを含むフォームデータモデルを作成して、設定済みのデータベースに対してデータの取得、追加、更新操作を実行できます。 **データモデルサービスの呼び出し手順**&#x200B;を使用して、フォームデータモデル（FDM）を選択し、FDM のサービスを使用すると、各種データソースの取得、更新、追加を行うことができます。

手順のフィールドの入力を説明するために、次のデータベーステーブルと JSON ファイルを例として使用します。

**CustomerDetails テーブルの例**

<table>
 <tbody> 
  <tr> 
   <td>プロパティ</td> 
   <td>値<br /> </td> 
  </tr> 
  <tr> 
   <td>FirstName<br /> </td> 
   <td>Sarah<br /> </td> 
  </tr> 
  <tr> 
   <td>LastName</td> 
   <td>Rose</td> 
  </tr> 
  <tr> 
   <td>顧客 ID</td> 
   <td>1</td> 
  </tr> 
  <tr> 
   <td>メールアドレス<br /> </td> 
   <td>srose@we.info</td> 
  </tr> 
 </tbody> 
</table>

**サンプル JSON ファイル**

```json
  { 
    customer: { 
     firstName: "Sarah", 
     lastName:"Rose", 
     customerId: "1", 
     emailAddress:"srose@we.info" 
   }, 
    insurance: {
     customerId: "1", 
    policyType: "Premium,
    policyNumber: "Premium-521499",
    customerDetails: { 
     firstName: "Sarah",
     lastName: "Rose",
     customerId: "1",
     emailAddress: "srose@we.info" 
    }
   }
  }
```

フォームデータモデルサービスを呼び出しステップには、以下に一覧されたフィールドがあり、フォームデータモデルの操作に役立ちます。

* **タイトル：** ステップのタイトル。 ワークフローエディターでステップを識別するのに役立ちます。
* **説明：**&#x200B;説明は、共通の開発環境で作業する他のプロセス開発者にとって有用です。

* **フォームデータモデルのパス：**&#x200B;サーバー上のフォームデータモデルを参照して選択します。

* **サービス：**&#x200B;選択したフォームデータモデルのサービスのリストです。
* **サービスの入力／リテラル、変数またはワークフローメタデータおよび JSON ファイルを使用して入力データを指定**：サービスには複数の引数を持たせることができます。ワークフローメタデータプロパティ、JSON オブジェクト、変数からサービス引数の値を取得するか、用意されたテキストボックスに直接値を入力するには、このオプションを選択します。

   * **リテラル：**&#x200B;指定する値が正確に分かっている場合は、このオプションを使用します。例えば、srose@we.info と指定します。
   * **変数**：変数に格納された値を取得するには、このオプションを使用します。
   * **ワークフローメタデータから取得：** 使用する値がワークフローのメタデータプロパティに保存されている場合は、このオプションを使用します。 例えば、emailAddress と指定します。
   * **[!UICONTROL ペイロードに相対的]**：ペイロードへの相対パスに保存された添付ファイルを取得するには、オプションを使用します。オプションを選択し、添付ファイルを含むフォルダー名を指定するか、テキストボックスで添付ファイル名を指定します。

     例えば、CRX リポジトリの「ペイロードに相対的」フォルダーの `attachment\attachment-folder` の場所にファイル添付ファイルが含まれている場合、「**[!UICONTROL ペイロードに相対的]**」オプションを選択した後、テキストボックスで `attachment\attachment-folder` を指定します。
   * **JSON ドット表記法：**&#x200B;使用する値が JSON ファイル内にある場合は、このオプションを使用します。例えば、insurance.customerDetails.emailAddress と指定します。「JSON ドット表記法」オプションを使用できるのは、「入力 JSON からのマップ入力フィールド 」オプションが選択されている場合だけです。
   * **入力 JSON からのマップ入力フィールド：** JSON ファイルのパスを指定して、その JSON ファイルから一部のサービスの引数の入力値を取得します。JSON ファイルのパスは、ペイロードとの相対パス、絶対パスにするか、JSON またはフォームデータモデル型の変数を使用して入力 JSON ドキュメントを選択できます。

* **サービスの入力／変数または JSON ファイルを使用して入力データを指定：**&#x200B;絶対パス、ペイロードに対する相対パスまたは変数に保存された JSON ファイルからすべての引数の値を取得する場合は、このオプションを選択します。
* **次を使用して入力 JSON ドキュメントを選択**：すべてのサービス引数の値が含まれる JSON ファイル。JSON ファイルのパスは、**ペイロードに対する相対パス**&#x200B;または&#x200B;**絶対パスのどちらでもかまいません。**&#x200B;また、JSON またはフォームデータモデルデータ型の変数を使用して、入力 JSON ドキュメントを取得することもできます。

* **JSON ドット表記法：** 指定した JSON ファイルのすべてのオブジェクトをサービス引数の入力として使用する場合は、このフィールドを空白のままにします。 指定した JSON ファイルからサービス引数の入力として特定の JSON オブジェクトを読み取るには、JSON オブジェクトにドット表記法を指定します。例えば、この節の冒頭に一覧表示されている JSON に似た JSON を使用している場合は、insurance.customerDetails を指定して、顧客のすべての詳細をサービスへの入力として提供します。
* **サービスの出力／マップして出力値を変数またはメタデータに書き込む：** CRX リポジトリ内のワークフローインスタンスのメタデータノードのプロパティとして出力値を保存するには、このオプションを選択します。メタデータプロパティの名前を指定し、メタデータプロパティにマップされる対応するサービス出力属性を選択します。例えば、出力サービスが返す phone_number をワークフローメタデータの phone_number プロパティでマッピングします。同様に、出力は Long データ型の変数に格納できます。を選択した場合、 **[!UICONTROL マッピングするサービス出力属性]** 」オプションを選択した場合、選択したプロパティのデータを格納できる変数のみが **[!UICONTROL 出力を次に保存：]** オプション。

* **サービスの出力／出力を変数または JSON ファイルに保存**：出力値を絶対パス、ペイロードに対する相対パス、または変数内の JSON ファイルに保存する場合は、このオプションを選択します。
* **以下のオプションを使用して出力 JSON ドキュメントを保存する：**&#x200B;出力 JSON ファイルを保存します。出力 JSON ファイルのパスは、ペイロードに対する相対パスまたは絶対パスのどちらでもかまいません。また、JSON またはフォームデータモデルデータ型の変数を使用して、出力 JSON ファイルを保存することもできます。

## ドキュメントに署名ステップ {#sign-document-step}

ドキュメントに署名ステップでは、Adobe Sign を使用してドキュメントに署名できます。ドキュメントへの署名手順には、次のプロパティがあります。

* **契約名：**&#x200B;契約のタイトルを指定します。契約名は、受信者に送信される E メールの件名と本文に含まれます。 名前は文字列データ型の変数に格納するか、**リテラル**&#x200B;を選択して手動で追加できます。

* **ロケール：**&#x200B;メールと検証オプションの言語を指定します。ロケールは文字列データ型の変数に格納するか、**リテラル**&#x200B;を選択して、使用可能なオプションのリストからロケールを選択できます。ロケールの値を変数に格納する際は、ロケールコードを定義する必要があります。例えば、英語は **en_US**、フランス語は **fr_FR** と指定します。

* **Adobe Sign クラウド設定：** Adobe Sign クラウド設定を選択します。Adobe Sign を AEM Forms 用に設定していない場合は、[Adobe Sign と AEM Forms の統合](../../forms/using/adobe-sign-integration-adaptive-forms.md)を参照してください。

* **次を使用して署名するドキュメントを選択**：ペイロードに対する相対的な場所からドキュメントを選択、ドキュメントとしてペイロードを使用、ドキュメントの絶対パスを指定、またはドキュメントデータタイプの変数に格納されたドキュメントを取得できます。


* **次を使用して入力添付ファイルのパスを選択：**&#x200B;添付ファイルのパス。これらの添付ファイルは、署名ドキュメントに含まれます。 添付ファイルは、ペイロードに対する相対的な場所に保持したり、添付ファイルの絶対パスを指定したり、ドキュメントデータ型配列の変数に格納された添付ファイルを取得したりできます。


  フォルダー（例：attachments）のパスを指定する場合、そのフォルダーに直接存在するすべてのファイルが署名ドキュメントに添付されます。指定された添付ファイルパスに直接存在するフォルダー内に使用できるファイルがある場合、そのファイルは署名ドキュメントに添付ファイルとして含まれます。直接存在するフォルダー内にフォルダーがある場合、それらはスキップされます。

* **期限までの日数：**「**期限までの日数**」フィールドに指定された日数の間にタスクのアクティビティがない場合、ドキュメントは期限切れとマークされます。日数は、ドキュメントが署名のためにユーザーに割り当てられた後にカウントされます。
* **リマインダーメールの頻度：**&#x200B;リマインダーメールを日単位または週単位で送信できます。この週は、ユーザーに署名用にドキュメントが割り当てられた日から数えられます。
* **署名プロセス：** ドキュメントに連続または並列の順序で署名するよう選択できます。 連続して、1 人の受信者が署名用に一度にドキュメントを受け取ります。 最初の受信者がドキュメントの署名を完了すると、ドキュメントは 2 番目の受信者に送信され、以降も同様です。 同時に複数の受信者が 1 つのドキュメントに同時に署名することができます。
* **リダイレクト URL :** リダイレクト URL を指定します。 ドキュメントへの署名が完了したら、担当者を URL にリダイレクトできます。通常、この URL には、感謝のメッセージやその後の手順が含まれています。
* **ワークフローステージ：** 1 つのワークフローに複数のステージを含めることができます。これらのステージは、AEM インボックスに表示されます。これらのステージは、モデルのプロパティ（サイドキック／ページ／ページのプロパティ／ステージ）で定義できます。
* **受信者を選択：** ドキュメントの受信者を選択する方法を指定します。 ワークフローをユーザーやグループに動的に割り当てたり、受信者の詳細を手動で追加したりできます。 ドロップダウンで「手動」を選択すると、受信者の詳細（電子メール、役割、認証方法など）が追加されます。

  >[!NOTE]
  >
  >* 「役割」セクションで、受信者の役割として「署名者」、「承認者」、「同意者」、「認証済み受信者」、「フォーム入力者」および「委任者」を指定できます。
  >* 「役割」オプションで「委任者」を選択した場合、委任者は署名タスクを別の受信者に割り当てることができます。
  >* 次の認証方法を設定済みの場合： [!DNL Adobe Sign]設定に基づいて、電話による認証、ソーシャル ID に基づく認証、ナレッジベースの認証、政府機関の ID に基づく認証などの認証方法を選択します。


* **受信者を選択するスクリプトまたはサービス：** このオプションは、「受信者を選択」フィールドで「動的」オプションを選択した場合にのみ使用できます。 ドキュメントの受信者と検証オプションを選択する ECMAScript またはサービスを指定できます。
* **受信者の詳細：** このオプションは、「受信者を選択」フィールドで「手動」オプションが選択されている場合にのみ使用できます。 メールアドレスを指定し、オプションの検証メカニズムを選択します。2 段階検証メカニズムを選択する前に、設定済みの Adobe Sign アカウントに対応する検証オプションが有効になっていることを確認してください。文字列データタイプの変数を使用して、「**[!UICONTROL メール]**」、「**[!UICONTROL 国コード]**」、「**[!UICONTROL 電話番号]**」の各フィールドの値を定義できます。「**[!UICONTROL 国コード]**」と「**[!UICONTROL 電話番号]**」フィールドは、「**[!UICONTROL 2 段階認証]**」ドロップダウンリストから「**[!UICONTROL 電話の検証]**」を選択した場合にのみ表示されます。
* **ステータス変数：** Adobe Sign 対応ドキュメントでは、ドキュメントの署名ステータスが文字列データタイプの変数に格納されます。ステータス変数の名前（adobeSignStatus）を指定します。インスタンスのステータス変数は、変数のステータスが格納されている CRXDE の /etc/workflow/instances/&lt;server>/&lt;date-time>/&lt;instance of workflow model>/workItems/&lt;node>/metaData から利用できます。
* **[!UICONTROL 署名済みドキュメント]**：署名済みドキュメントのステータスを変数に保存できます。 電子署名監査証跡を追加して、よりセキュリティと合法性を確保するには、監査レポートを含めることができます。 署名済みドキュメントは、変数フォルダーまたはペイロードフォルダーを使用して保存できます。
  >[!NOTE]
  >
  > 署名済みドキュメントの最後のページに監査レポートが追加されます。
<!--
* **Save signed document using below options:** Specify the location to keep signed documents. You can choose to overwrite the payload file, place the signed document at a location within the payload directory, or store the signed document in a variable of Document type.
-->

## ドキュメントサービスの手順 {#document-services-steps}

AEM Document Services は、PDFドキュメントを作成、組み立て、および保護するための一連のサービスです。 AEM Forms は、それぞれのドキュメントサービスに対して個別の AEM ワークフローステップを提供します。

タスクの割り当て、電子メールの送信、ドキュメントの署名など、他のAEM Formsワークフローステップと同様に、すべてのAEM Document Services ステップで変数を使用できます。 変数の作成と管理については、[AEM ワークフローの変数](../../forms/using/variable-in-aem-workflows.md)を参照してください。

### ドキュメントのタイムスタンプステップを適用 {#apply-document-time-stamp-step}

ドキュメントにタイムスタンプを追加します。 ドキュメントの詳細（入力ドキュメントのパス、入力ドキュメント名、書き出されたデータを保存する場所など）を指定します。 既存のペイロードファイルを上書きするか、別のファイル名を選択してデータをペイロードフォルダーの下の別のファイルに格納するか、データへの絶対パスを指定するか、データをドキュメントデータタイプの変数に格納するかを選択できます。

### 画像に変換ステップ {#convert-to-image-step}

PDF ドキュメントを画像のリストに変換します。サポートされている画像形式は、JPEG、JPEG2000、PNG および TIFF です。次の情報は、画像画像への変換に適用されるTIFFです。

* 複数ページのTIFFファイルが生成されます。
* 一部の注釈は、注釈画像に含まれません。TIFF。 外観の生成にAcrobatが必要な注釈は含まれません。

### PDF/A に変換ステップ {#convert-to-pdf-a-step}

指定したオプションを使用して PDF ドキュメントを PDF/A 形式に変換します。PDF/A バージョンの Portable Document Format（PDF）は、ドキュメントのアーカイブおよび長期保存に特化しています。

### PS に変換ステップ {#convert-to-ps-step}

PDF ドキュメントを PostScript に変換します。PostScript に変換する場合は、変換操作を使用して、変換元のドキュメントと、PostScript レベル 2 または 3 のどちらに変換するかを指定できます。 PostScript ファイルに変換するPDFドキュメントは、非インタラクティブである必要があります。

### 指定したタイプのステップからPDFを作成 {#create-pdf-from-specified-type-step}

入力ファイルから PDF ドキュメントを生成します。入力ドキュメントは、ペイロードに対する相対パス、絶対パス、ペイロード自体を持つこと、または Document データ型の変数に格納することができます。

### URL/HTML/ZIP ステップからPDFを作成 {#create-pdf-from-url-html-zip-step}

指定された URL、PDF、ZIP ファイルからHTMLドキュメントを生成します。

### データの書き出し手順 {#export-data-step}

PDF formsまたは XDP ファイルからデータを書き出します。 入力ドキュメントのファイルパスと Export Data Format を入力する必要があります。 「Export Data Format」のオプションは、Auto、XDP および XmlData です。

### Export PDFを指定したタイプのステップに {#export-pdf-to-specified-type-step}

PDFドキュメントを選択した形式に変換します。

### 非インタラクティブPDFの生成手順 {#generatenoninteractive}

非インタラクティブ PDF を生成します。様々なカスタマイズオプションが用意されています。

>[!NOTE]
>
>変数を使用して、入力ドキュメントのテンプレートファイルを指定できます。文字列データタイプの変数にテンプレートファイルのパスを格納します。

### データのインポート手順 {#import-data-step}

フォームデータをPDFフォームに結合します。 フォームデータは、フォームフォームにPDFできます。

### DDX を呼び出しステップ {#invokeddx}

入力ドキュメントの指定されたマップ上で DDX ファイルを実行し、操作された PDF ドキュメントを返します。

>[!NOTE]
>
>変数を使用して、入力ドキュメントの DDX ファイルを指定できます。 DDX ファイルを Document または XML データタイプの変数に格納します。

### Optimize PDF手順 {#optimize-pdf-step}

PDFファイルのサイズを縮小して最適化します。 この変換の結果、PDFファイルは元のバージョンよりも小さくなる場合があります。 また、この操作では、PDF ドキュメントが最適化パラメーターで指定された PDF バージョンに変換されます。

最適化設定では、ファイルの最適化方法を指定します。 次に設定例を示します。

* ターゲットPDFのバージョン
* JavaScript アクションや埋め込みページのサムネールなどのオブジェクトの破棄
* コメントや添付ファイルなどのユーザーデータの破棄
* 無効または未使用の設定の破棄
* 非圧縮データの圧縮、またはより効率的な圧縮アルゴリズムの使用
* 埋め込みフォントの削除
* 透明度の値を設定する

### レンダリングPDFフォームステップ {#renderpdf}

フォームデザイナー（XDP）で作成したフォームを PDF フォームにレンダリングします。

>[!NOTE]
>
>変数を使用して、入力ドキュメントのテンプレートファイルを指定できます。文字列データタイプの変数にテンプレートファイルのパスを格納します。

### ドキュメントの保護ステップ {#secure-document-step}

ドキュメントを暗号化、署名、および認証します。 AEM Formsは、パスワードベースの暗号化と証明書ベースの暗号化の両方をサポートしています。 また、ドキュメントに署名するための様々なアルゴリズムの中から選択することもできます。 例えば、SHA-256 や SH-512 などです。 ワークフローステップを使用して、拡張ワークフロードキュメントを読み取ることもPDFできます。 このワークフローステップには、バーコードのデコード、デジタル署名、PDF データの読み込みと書き出しなどのオプションを有効にするためのオプションが用意されています。

### プリンターに送信ステップ {#send-to-printer-step}

ドキュメントを直接プリンターに送信します。 次の印刷アクセスメカニズムをサポートしています。

* **直接アクセス可能なプリンター**：同じコンピューターにインストールされているプリンターは、直接アクセス可能なプリンターと呼ばれ、そのコンピューターの名前はプリンターホストです。 この種類のプリンターは、コンピューターに直接接続されているローカルプリンターでもかまいません。
* **間接アクセス型プリンター**：プリントサーバーにインストールされているプリンターは、他のコンピューターからアクセスします。 ネットワークプリンタに接続するには、共通の UNIX®印刷システム (CUPS) や Line Printer Daemon(LPD) プロトコルなどのテクノロジーを使用できます。 間接アクセス型プリンタにアクセスするには、プリントサーバーの IP またはホスト名を指定します。 このメカニズムを使用すると、ネットワークで LPD が実行されている場合に、ドキュメントを LPD URI に送信できます。 このメカニズムを使用すると、LPD が実行されているネットワークに接続されているすべてのプリンタにドキュメントをルーティングできます。

### 印刷出力ステップを生成 {#generatePrintedOutput}

指定したフォームデザインとデータファイルに対して PCL、PostScript、ZPL、IPL、TPCL または DPL の出力を生成します。データファイルはフォームデザインとマージされ、印刷用にフォーマットされます。この操作で生成された出力はプリンターに直接送信したり、ファイルとして保存したりできます。この操作はフォームデザインやデータをアプリケーションから使用する場合に実行することをお勧めします。フォームデザインまたはフォームデザインがネットワーク上、ローカルファイルシステム上、または HTTP 上の場所にある場合は、「generatePrintedOutput」操作を使用します。

例えば、アプリケーションでフォームデザインをデータファイルとマージする必要があるとします。データには数百件のレコードがあります。さらに、ZPL をサポートしているプリンターに出力を送信する必要があります。フォームデザインと入力データはアプリケーション内にあります。generatePrintedOutput 操作を使用して、レコードをフォームデザインとマージし、ZPL がサポートされるプリンターに出力を送信します。

「印刷出力を生成」ステップには、次のプロパティがあります。

**Input プロパティ**

* **[!UICONTROL 次を使用してテンプレートファイルを選択]**：テンプレートファイルのパスを指定します。 テンプレートファイルは、ペイロードに対する相対パス、絶対パスで保存されたもの、またはドキュメントデータタイプの変数を使用して選択できます。例： [Payload_Directory]/Workflow/data.xml。パスが crx-repository に存在しない場合、管理者はパスを作成してから使用できます。 さらに、ペイロードを入力データファイルとして受け入れることもできます。

* **[!UICONTROL 次を使用してデータドキュメントを選択]**：入力データファイルのパスを指定します。入力データファイルは、ペイロードに対する相対パス、絶対パスで保存されたもの、またはドキュメントデータタイプの変数を使用して選択できます。例： [Payload_Directory]/Workflow/data.xml。パスが crx-repository に存在しない場合、管理者はパスを作成してから使用できます。

* **[!UICONTROL プリンター形式]**：XDC ファイルがない場合に出力ストリームの生成に使用するページ説明言語を指定する値。リテラル値を指定する場合、次のいずれかの値を選択します。

   * **[!UICONTROL Custom PCL]**：PCL 用のカスタム XDC ファイルを指定するには、このオプションを使用します。
   * **[!UICONTROL Custom PostScript]**：PostScript のカスタム XDC ファイルを指定するには、このオプションを使用します。
   * **[!UICONTROL Custom ZPL]**:ZPL のカスタム XDC ファイルを指定するには、このオプションを使用します。
   * **[!UICONTROL Generic Color PCL (5c)]**：汎用カラー PCL（5c）を使用します。
   * **[!UICONTROL Generic PostScript Level3]**：汎用の PostScript レベル 3 を使用します。
   * **[!UICONTROL ZPL 300 DPI]**：ZPL 300 DPI を使用します。 zpl300.xdc が使用されます。
   * **[!UICONTROL ZPL 600 DPI]**：ZPL 600 DPI を使用します。 zpl600.xdc ファイルが使用されます。
   * **[!UICONTROL Custom IPL]**：IPL のカスタム XDC ファイルを指定するには、このオプションを使用します。
   * **[!UICONTROL IPL 300 DPI]**：IPL 300 DPI を使用します。 ipl300.xdc が使用されます。
   * **[!UICONTROL IPL 400 DPI]**：IPL 400 DPI を使用します。 ipl400.xdc ファイルが使用されます。
   * **[!UICONTROL Custom TPCL]**：TPCL 用のカスタム XDC ファイルを指定するには、このオプションを使用します。
   * **[!UICONTROL TPCL 305 DPI]**：TPCL 300 DPI を使用します。 tpcl305.xdc ファイルが使用されます。
   * **[!UICONTROL PCL 600 DPI]**：TPCL 600 DPI を使用します。 tpcl600.xdc ファイルが使用されます。
   * **[!UICONTROL Custom DPL]**：カスタム XDC ファイル DPL を指定するには、このオプションを使用します。
   * **[!UICONTROL DPL300DPI]**：DPL 300 DPI を使用します。 dpl300.xdc ファイルが使用されます。
   * **[!UICONTROL DPL406DPI]**：DPL 400 DPI を使用します。 dpl406.xdc が使用されます。
   * **[!UICONTROL DPL600DPI]**：DPL 600 DPI を使用します。 dpl600.xdc が使用されます。

**出力プロパティ**

* **[!UICONTROL 次を使用して出力ドキュメントを保存]**：出力ファイルを保存する場所を指定します。 出力ファイルは、ペイロードに対する相対位置の変数に保存するか、出力ファイルを保存する絶対位置を指定することができます。 パスが crx-repository に存在しない場合、管理者はパスを作成してから使用できます。

**詳細プロパティ**

* **[!UICONTROL 次を使用してコンテンツルートの場所を選択]**：コンテンツルートは、フォームデザインで使用される相対アセットを取得するための、リポジトリ内の URI、絶対参照、または場所を指定する文字列値です。 例えば、../myImage.gifなど、画像を相対的に参照するフォームデザインの場合、myImage.gif はrepository://に配置する必要があります。 デフォルト値はrepository://で、リポジトリのルートレベルを指します。

  アプリケーションからアセットを選択するとき、コンテンツルート URI パスは正確な構造になっている必要があります。例えば、フォームを SampleApp というアプリケーションから選択し、SampleApp/1.0/forms/Test.xdp に配置する場合、コンテンツルート URI は repository://administrator@password/Applications/SampleApp/1.0/forms/ または repository:/Applications/SampleApp/1.0/forms/（認証機関情報が NULL の場合）と指定する必要があります。この方法でコンテンツルート URI を指定すると、フォーム内で参照されているすべてのアセットのパスがこの URI に対して解決されます。

* **[!UICONTROL を使用して XCI ファイルを選択]**：XCI ファイルは、フォームデザイン要素に使用されるフォントやその他のプロパティを記述するために使用されます。 XCI ファイルは、ペイロードに対する相対パス、絶対パス、またはドキュメントデータタイプの変数を使用して保持できます。

* **[!UICONTROL ロケール]**：PDF ドキュメントの生成に使用する言語を設定します。リテラル値を指定する場合、リストから言語を選択するか、次のいずれかの値を選択します。
   * **Use Server Default**：
（デフォルト）AEM Forms サーバー上で設定されているロケール設定を使用します。ロケール設定は、管理コンソールを使用して設定します（「[Designer ヘルプ](https://www.adobe.com/go/learn_aemforms_designer_65_jp)」を参照）。

   * **カスタム値を使用するには**：
リテラルボックスにロケールコードを入力するか、ロケールコードを含む文字列変数を選択します。サポートされているすべてのロケールコードのリストについては、https://java.sun.com/j2se/1.5.0/docs/guide/intl/locale.doc.html を参照してください。

* **[!UICONTROL Copies]**：出力の作成部数を指定する整数値。デフォルト値は 1 です。

* **[!UICONTROL Duplex Printing]**：両面印刷か片面印刷かを指定する Pagination 値。この値は、PostScript と PCL をサポートするプリンターで使用されます。リテラル値を指定する場合、次のいずれかの値を選択します。
   * **[!UICONTROL Duplex Long Edge]**：両面印刷を使用し、長辺のページネーションを使用して印刷します。
   * **[!UICONTROL Duplex Short Edge]**：両面印刷を使用し、短辺のページネーションを使用して印刷します。
   * **[!UICONTROL Simplex]**：片面印刷を使用します。