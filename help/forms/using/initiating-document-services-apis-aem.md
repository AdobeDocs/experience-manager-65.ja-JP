---
title: AEM ワークフローからの Document Services API の開始
seo-title: Initiate Document Services APIs from AEM Workflow
description: DDX または指定された入力でAEM Document Services を呼び出す方法について説明します。 PDFをPDF/A に変換する方法も参照
seo-description: Learn how to invoke AEM Document services on DDX or supplied inputs. Also see hwo to convert PDF to PDF/A
uuid: aacec2df-1ad6-4ff2-a99d-ef206efcdc09
content-type: reference
products: SG_EXPERIENCEMANAGER/6.5/FORMS
topic-tags: document_services
discoiquuid: 8b85bdc7-3864-49c9-81b0-cf15b8e986d9
exl-id: 123087a2-9d09-4579-9185-2ccd7d25bf8d
source-git-commit: 50d29c967a675db92e077916fb4adef6d2d98a1a
workflow-type: tm+mt
source-wordcount: '1167'
ht-degree: 53%

---

# AEM ワークフローからの Document Services API の開始  {#initiate-document-services-apis-from-aem-workflow}

## Assembler {#assembler}

AEM Forms は、カスタムワークフローを提供し、以下の Assembler サービス API を呼び出します。

* **呼び出し**：指定された入力で、入力 DDX で指定された操作を呼び出します。
* **toPDFA**：入力PDFドキュメントをPDF/A ドキュメントに変換します。

### DDX ワークフローを呼び出し {#invoke-ddx-workflow}

**DDX を呼び出し**&#x200B;ワークフローは、`Invoke` Assembler サービス API を呼び出します。この API を使用して、ドキュメントの作成や分解、PDF への透かしの追加などを行うことができます。

1. 次の項目をドラッグ： **[!UICONTROL DDX を呼び出し]** ワークフローの「Forms Workflow」タブのSidekick手順
1. 追加したワークフローステップをダブルクリックして、コンポーネントを編集します。
1. コンポーネントを編集ダイアログで、入力ドキュメント、環境オプション、出力ドキュメントを設定し、 **[!UICONTROL OK]**.

#### 入力ドキュメント {#input-documents}

Invoke DDX ワークフローには次の入力ドキュメントが必要です。

* **DDX**：これは Invoke DDX ワークフローステップの必須の入力で、 DDX input ドロップダウンから次のいずれかのオプションを選択して指定できます。

   * *ペイロードとの関連*：DDX 入力ファイルは、ワークフロー項目のペイロードフォルダーに関連しています。
   * *ペイロードを使用*：ワークフロー項目のペイロードは、入力 DDX ドキュメントとして使用されます。
   * *絶対パス*:CRX リポジトリ内の DDX ドキュメントへの絶対パス。

* **ペイロードからマップを作成**：選択すると、ペイロードフォルダーの下のすべてのドキュメントが、Assembler の `invoke` API 用に入力ドキュメントマップに追加されます。各ドキュメントのノード名は、マップのキーとして使用されます。

* **入力ドキュメントマップ**：入力ドキュメントマップを指定します。任意の数のエントリを追加できます。各エントリは、マップ内のドキュメントのキーとドキュメントのソースを指定します。

#### 環境オプション {#environment-options}

「環境オプション」タブでは、呼び出し API に対して様々な処理オプションを設定できます。

* *ジョブのログレベル*：処理ログのログレベルを指定します。
* *Validate Only*：入力DDXの有効性をチェックします。

* *エラー時に失敗*：エラーが発生した場合に Assembler サービスの呼び出しが失敗するかどうかを指定します。 デフォルト値は False です。

#### 出力ドキュメント {#output-documents}

入力 DDX に応じて、呼び出し API は複数の出力ドキュメントを生成できます。 「出力ドキュメント」タブでは、出力ドキュメントを保存する場所を選択できます。

1. *ペイロードでの出力ドキュメント保存*：ペイロードフォルダーの下で出力ドキュメントを保存したり、ペイロードがファイルの場合はペイロードを上書きしたりします。
1. *出力ドキュメントのマップ*：出力ドキュメントごとに 1 つのエントリを追加して、各出力ドキュメントの保存場所を明示的に指定できます。 各エントリは、ドキュメントと保存場所を指定します。 出力ドキュメントは、ペイロードを上書きしたり、ペイロードフォルダーの下に保存したりできます。 複数の出力ドキュメントがあると役に立ちます。

1. *ジョブのログ*：トラブルシューティングエラーに役立つジョブログドキュメントを保存する場所を指定します。

### PDF/A ワークフローに変換 {#convert-to-pdf-a-workflow}

PDF/Aワークフローステップへの変換は、「 Assembler Service API」を呼び出します。`toPDFA`PDF/Aに準拠した文書をPDFに変換するのに使用します。

1. Sidekickのフォームワークフロータブの下にある&#x200B;**[!UICONTROL ConvertToPDFA]**&#x200B;ワークフローステップをドラッグします。

1. 追加したワークフローステップをダブルクリックして、コンポーネントを編集します。
1. コンポーネントを編集ダイアログで、入力ドキュメント、変換オプション、出力ドキュメントを設定し、 **[!UICONTROL OK]**.

#### 入力ドキュメント {#input-documents-1}

次のいずれかの方法で、PDF/A 準拠の文書に変換する文書のソースを指定します。

* *ペイロードを基準とする*：入力ドキュメントは、ワークフロー項目のペイロードフォルダーを基準とした相対パスです。
* *ペイロードを使用*：ワークフロー項目のペイロードは、入力ドキュメントとして使用されます。
* *絶対パス*：CRXリポジトリの中の入力ドキュメントへの絶対パスです。

#### 変換オプション {#conversion-options}

コンバージョンオプションを使用すると、PDF/A の変換処理を変更するオプションを指定できます。

* *準拠* ：出力PDFA が準拠する必要があるPDFA 標準を指定します。
* *結果レベル*：PDF/A変換ログに使用するログレベルを指定します。
* *署名* ：変換時に入力ドキュメント内の署名をどのように処理する必要があるかを指定します。
* *カラースペース* ：事前に定義された出力PDF/A ドキュメントのカラースペースを指定します。
* 変換の&#x200B;*検証*：変換された PDF/A ドキュメントが変換後に PDF/A に準拠しているかどうかを明記します。
* *ジョブのログレベル*：処理ログのログレベルを指定します。

* *Metadata Extension Schema*：PDF文書のメタデータのXMPプロパティに使用するMetadata extension schemaを指定します。

#### 出力ドキュメント {#output-documents-1}

「出力ドキュメント」タブでは、出力ドキュメントの出力先を指定できます

* *PDFA ドキュメント*：変換後のPDF/A ドキュメントを保存する場所を指定します。 ペイロードドキュメントを上書きするか、ペイロードフォルダーの下に保存することができます。
* *変換ログ*：変換ログが保存されている場所を明確にします。ペイロード文書に上書きするか、ペイロードフォルダーに保存できます。

## Forms {#forms}

Render PDF Formワークフローは、`renderPDFForm`Forms service APIの周りのラッパーで、XDPテンプレートおよびデータxmlを使用してPDFフォームを作成します。

### レンダリングPDFフォームワークフロー {#render-pdf-form-workflow}

1. 「Sidekick」の「PDF」タブの下にある「Forms Workflowフォームをレンダリング」ワークフローステップをドラッグします。
1. 追加したワークフローステップをダブルクリックして、コンポーネントを編集します。
1. 編集コンポーネントダイアログでは、入力ドキュメント、出力ドキュメントおよびその他のパラメーターを設定して、**[!UICONTROL OK]** をクリックします。

#### 入力ドキュメント {#input-documents-2}

* *テンプレートファイル*：XDP テンプレートの場所を指定します。このフィールドは必須です。

* *データドキュメント*：テンプレートとの結合が必要なデータ xml の場所を指定します。

#### 出力ドキュメント {#output-documents-2}

* *出力ドキュメント*: — 生成されたPDFフォームの名前を指定します。

#### 追加のパラメーター {#additional-parameters}

* *コンテンツルート*：入力 XDP テンプレートで使用されるフラグメントまたは画像が保存されるリポジトリ内のフォルダーのパスを指定します。
* *URL を送信*：生成された送信フォームのデフォルトの送信 URL をPDFします。
* *ロケール*：生成されるロケールフォームのデフォルトPDFを指定します。
* *Acrobat のバージョン*：生成された PDF フォームのターゲットの Acrobat バージョンを指定します。
* *タグ付き PDF*：生成された PDF をアクセシビリティ対応にするかどうかを指定します。
* *XCI ドキュメント*：XCI ファイルへのパスを指定します。

## 出力 {#output}

Generate Non Interactive PDFワークフローは、`generatePDFOutput`OutputサービスAPIの周りのラッパーです。XDP テンプレートおよびデータ xml から非インタラクティブ PDF ドキュメントを生成するのに使用されます。

### 非インタラクティブPDF出力ワークフローを生成   {#generate-non-interactive-pdf-output-workflow-nbsp}

1. サイドキックの「Forms Workflow」タブの下にある、「非インタラクティブ PDF 出力を生成」ワークフローをドラッグします。
1. 追加したワークフローステップをダブルクリックして、コンポーネントを編集します。
1. 編集コンポーネントダイアログでは、入力ドキュメント、出力ドキュメントおよびその他のパラメーターを設定して、**[!UICONTROL OK]** をクリックします。

#### 入力ドキュメント {#input-documents-3}

* *テンプレートファイル*：XDP テンプレートの場所を指定します。このフィールドは必須です。

* *データドキュメント*：テンプレートとマージする必要があるデータ xml の場所を指定します。

#### 出力ドキュメント {#output-document}

*出力ドキュメント*：生成された PDF フォームの名前を指定します。

#### 追加のパラメーター {#additional-parameters-1}

* *コンテンツルート*：入力 XDP テンプレートで使用されるフラグメントまたは画像が保存されるリポジトリ内のフォルダーのパスを指定します。
* *ロケール*：生成された PDF フォームのデフォルトのロケールを指定します。
* *Acrobat のバージョン*：生成された PDF フォームのターゲットの Acrobat バージョンを指定します。
* Linearized PDF：Web表示のために生成されたPDFフォームを最適化するかどうかを指定します。
* *タグ付き PDF*：生成された PDF をアクセシビリティ対応にするかどうかを指定します。
* *XCI ドキュメント*：XCI ファイルへのパスを指定します。
