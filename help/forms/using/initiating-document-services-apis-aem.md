---
title: AEM ワークフローから Document Services API を開始
description: DDX または指定された入力で AEM Document Services を呼び出す方法について説明します。PDF を PDF/A に変換する方法も参照してください。
content-type: reference
products: SG_EXPERIENCEMANAGER/6.5/FORMS
topic-tags: document_services
exl-id: 123087a2-9d09-4579-9185-2ccd7d25bf8d
solution: Experience Manager, Experience Manager Forms
role: User, Developer
source-git-commit: f6771bd1338a4e27a48c3efd39efe18e57cb98f9
workflow-type: tm+mt
source-wordcount: '1167'
ht-degree: 100%

---

# AEM ワークフローからの Document Services API の開始  {#initiate-document-services-apis-from-aem-workflow}

## Assembler {#assembler}

AEM Forms は、カスタムワークフローを提供し、以下の Assembler サービス API を呼び出します。

* **呼び出し**：提供されたインプット上の入力 DDX で指定された操作を呼び出します。
* **toPDFA**：入力 PDF ドキュメントを PDF/A ドキュメントに変換します。

### DDX を呼び出しワークフロー {#invoke-ddx-workflow}

**DDX を呼び出し**&#x200B;ワークフローは、`Invoke` Assembler サービス API を呼び出します。この API を使用して、ドキュメントの作成や分解、PDF への透かしの追加などを行うことができます。

1. サイドキックの「Forms Workflow」タブの下にある **[!UICONTROL DDX を呼び出し]**&#x200B;ワークフローステップをドラッグします。
1. 追加したワークフローステップをダブルクリックして、コンポーネントを編集します。
1. エディターコンポーネントダイアログで、入力ドキュメント、環境オプションおよび出力ドキュメントを設定して「**[!UICONTROL OK]**」をクリックします。

#### 入力ドキュメント {#input-documents}

DDX を呼び出しワークフローには以下の入力ドキュメントが必要です。

* **DDX**：DDX を呼び出しワークフローステップの必須入力項目で、以下の DDX オプションのうち 1 つを選択することで指定できます。

   * *ペイロードとの関連*：DDX 入力ファイルは、ワークフロー項目のペイロードフォルダーに関連しています。
   * *ペイロードの使用*：ワークフロー項目のペイロードは入力 DDX ドキュメントとして使用します。
   * *絶対パス*：CRX リポジトリの DDX ドキュメントへの絶対パスです。

* **ペイロードからマップを作成**：選択すると、ペイロードフォルダーの下のすべてのドキュメントが、Assembler の `invoke` API 用に入力ドキュメントマップに追加されます。各ドキュメントのノード名は、マップのキーとして使用されます。

* **入力ドキュメントマップ**：入力ドキュメントマップを指定します。任意の数のエントリを追加できます。各エントリではマップのキーと、ドキュメントのソースを指定します。

#### 環境オプション {#environment-options}

「環境オプション」タブでは呼び出し API のための様々な処理オプションを設定できます。

* *ジョブのログレベル*：処理ログのログレベルを指定します。
* *Validate Only*：入力DDXの有効性をチェックします。

* *エラー時に失敗*：エラーが発生した場合に Assembler サービスの呼び出しが失敗するかどうかを指定します。デフォルト値は false です。

#### 出力ドキュメント {#output-documents}

入力 DDX に応じて、呼び出し API は複数の出力ドキュメントを生成することができます。「出力ドキュメント」タブでは、出力ドキュメントを保存する場所を選択できます。

1. *ペイロードでの出力ドキュメント保存*：ペイロードフォルダーの下で出力ドキュメントを保存したり、ペイロードがファイルの場合はペイロードを上書きしたりします。
1. *出力ドキュメントのマップ*：出力ドキュメントごとに 1 つのエントリを追加して、各出力ドキュメントの保存場所を明示的に指定できます。各エントリでは、ドキュメントと保存場所を指定します。出力ドキュメントは、ペイロードを上書きしたり、ペイロードフォルダーの下に保存したりできます。複数の出力ドキュメントがあると役に立ちます。

1. *ジョブのログ*：エラーのトラブルシューティングに役立つ、ジョブのログドキュメントを保存する場所を指定します。

### PDF/A ワークフローへの変換 {#convert-to-pdf-a-workflow}

PDF/Aワークフローステップへの変換は、「 Assembler Service API」を呼び出します。`toPDFA`PDF/Aに準拠した文書をPDFに変換するのに使用します。

1. Sidekickのフォームワークフロータブの下にある&#x200B;**[!UICONTROL ConvertToPDFA]**&#x200B;ワークフローステップをドラッグします。

1. 追加したワークフローステップをダブルクリックして、コンポーネントを編集します。
1. 編集コンポーネントダイアログで、入力ドキュメント、変換オプションおよび出力ドキュメントを設定して「**[!UICONTROL OK]**」をクリックします。

#### 入力ドキュメント {#input-documents-1}

以下のいずれかの方法で PDF/A に準拠したドキュメントに変換するソースドキュメントを指定します。

* *ペイロードとの関連*：入力ドキュメントは、ワークフロー項目のペイロードフォルダーに関連しています。
* *ペイロードの使用*：ワークフロー項目のペイロードを入力ドキュメントとして使用します。
* *絶対パス*：CRXリポジトリの中の入力ドキュメントへの絶対パスです。

#### 変換オプション {#conversion-options}

変換オプションでは、PDF/A への変換プロセスを変更するオプションを指定できます。

* *互換性*：出力 PDF/A ドキュメントが準拠しなければならない PDF/A 標準を指定します。
* *結果レベル*：PDF/A変換ログに使用するログレベルを指定します。
* *署名*：変換時に入力ドキュメント内の署名をどのように処理する必要があるかを指定します。
* *カラースペース*：出力 PDF/A ドキュメントに使用する、事前定義済みのカラースペースを指定します。
* 変換の&#x200B;*検証*：変換された PDF/A ドキュメントが変換後に PDF/A に準拠しているかどうかを明記します。
* *ジョブのログレベル*：処理ログのログレベルを指定します。

* *Metadata Extension Schema*：PDF文書のメタデータのXMPプロパティに使用するMetadata extension schemaを指定します。

#### 出力ドキュメント {#output-documents-1}

「出力ドキュメント」タブでは、出力ドキュメントの出力先を指定できます。

* *PDFA ドキュメント*：変換された PDF/A ドキュメントを保存する場所を指定します。ペイロードドキュメントを上書きするか、ペイロードフォルダーに保存することができます。
* *変換ログ*：変換ログが保存されている場所を明確にします。ペイロード文書に上書きするか、ペイロードフォルダーに保存できます。

## Forms {#forms}

Render PDF Formワークフローは、`renderPDFForm`Forms service APIの周りのラッパーで、XDPテンプレートおよびデータxmlを使用してPDFフォームを作成します。

### PDF フォームをレンダリングワークフロー {#render-pdf-form-workflow}

1. サイドキックの「Forms Workflow」タブの下にある PDF フォームをレンダリングワークフローステップをドラッグします。
1. 追加したワークフローステップをダブルクリックして、コンポーネントを編集します。
1. 編集コンポーネントダイアログでは、入力ドキュメント、出力ドキュメントおよびその他のパラメーターを設定して、**[!UICONTROL OK]** をクリックします。

#### 入力ドキュメント {#input-documents-2}

* *テンプレートファイル*：XDP テンプレートの場所を指定します。このフィールドは必須です。

* *データドキュメント*：テンプレートとマージする必要があるデータ xml の場所を指定します。

#### 出力ドキュメント {#output-documents-2}

* *出力ドキュメント*：生成された PDF フォームの名前を指定します。

#### その他のパラメーター {#additional-parameters}

* *コンテンツルート*：入力 XDP テンプレートで使用されるフラグメントまたは画像が保存されるリポジトリ内のフォルダーのパスを指定します。
* *送信 URL*：生成された PDF フォームのデフォルト送信 URL を指定します。
* *ロケール*：生成された PDF フォームのデフォルトのロケールを指定します。
* *Acrobat のバージョン*：生成された PDF フォームのターゲットの Acrobat バージョンを指定します。
* *タグ付き PDF*：生成された PDF をアクセシビリティ対応にするかどうかを指定します。
* *XCI ドキュメント*：XCI ファイルへのパスを指定します。

## 出力 {#output}

Generate Non Interactive PDFワークフローは、`generatePDFOutput`OutputサービスAPIの周りのラッパーです。XDP テンプレートおよびデータ xml から非インタラクティブ PDF ドキュメントを生成するのに使用されます。

### 非インタラクティブ PDF 出力を生成ワークフロー {#generate-non-interactive-pdf-output-workflow-nbsp}

1. サイドキックの「Forms Workflow」タブの下にある、「非インタラクティブ PDF 出力を生成」ワークフローをドラッグします。
1. 追加したワークフローステップをダブルクリックして、コンポーネントを編集します。
1. 編集コンポーネントダイアログでは、入力ドキュメント、出力ドキュメントおよびその他のパラメーターを設定して、**[!UICONTROL OK]** をクリックします。

#### 入力ドキュメント {#input-documents-3}

* *テンプレートファイル*：XDP テンプレートの場所を指定します。このフィールドは必須です。

* *データドキュメント*：テンプレートとマージする必要があるデータ xml の場所を指定します。

#### 出力ドキュメント {#output-document}

*出力ドキュメント*：生成された PDF フォームの名前を指定します。

#### 追加のパラメーター {#additional-parameters-1}

* *コンテンツルート*：入力 XDP テンプレートで使用されるフラグメントまたは画像が保存されるリポジトリ内のフォルダーのパスを指定します。
* *ロケール*：生成された PDF フォームのデフォルトのロケールを指定します。
* *Acrobat のバージョン*：生成された PDF フォームのターゲットの Acrobat バージョンを指定します。
* 線形化された PDF：Web表示のために生成されたPDFフォームを最適化するかどうかを指定します。
* *タグ付き PDF*：生成された PDF をアクセシビリティ対応にするかどうかを指定します。
* *XCI ドキュメント*：XCI ファイルへのパスを指定します。
