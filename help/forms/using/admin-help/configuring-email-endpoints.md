---
title: メールエンドポイントの設定
description: メールエンドポイントの設定方法について説明します。メールエンドポイントを使用すると、1 個または複数のドキュメントを指定したメールアカウントに送信することで、サービスを呼び出すことができます。
contentOwner: admin
content-type: reference
geptopics: SG_AEMFORMS/categories/managing_endpoints
products: SG_EXPERIENCEMANAGER/6.5/FORMS
exl-id: 33583a12-4f20-4146-baa4-c9854e454bbf
solution: Experience Manager, Experience Manager Forms
feature: Adaptive Forms
role: User, Developer
source-git-commit: 6a9806d8f40f711a610c130c63d9ab9b2460d075
workflow-type: tm+mt
source-wordcount: '3808'
ht-degree: 99%

---

# メールエンドポイントの設定 {#configuring-email-endpoints}

>[!NOTE]
> 
> ユーザーが管理者コンソールにアクセスする管理者権限を持っていることを確認します。

メールエンドポイントを使用すると、1 個または複数のドキュメントをメールに添付し、指定したメールアカウントに送信することで、サービスを呼び出すことができます。メールのインボックスは添付ファイルの収集ポイントとして機能します。サービスによってインボックスが監視され、添付ファイルが処理されます。変換の結果は、エンドポイントで定義されたユーザーに転送されます。

メールエンドポイントの場合、許可されたユーザーは、適切なアカウントにメールでファイルを送信することによってプロセスを呼び出すことができます。結果は、送信元のユーザー（デフォルト）またはエンドポイントの設定で定義されたユーザーに返されます。

メールエンドポイントを設定する前に、エンドポイントに使用する POP3 または IMAP メールアカウントを作成します。変換処理の種類ごとに個別のアカウントを設定します。例えば、受信添付ファイルから標準の PDF ドキュメントを生成するために 1 つのアカウントを設定し、セキュリティが確保された PDF ドキュメントを生成するために別のアカウントを設定することができます。

>[!NOTE]
>
>各メールアドレスは、1 つのメールエンドポイントにのみマップする必要があります。追加のメールエンドポイントが無効な場合でも、1 つのメールアドレスに複数のメールエンドポイントを設定することはできません。

すべてのメールエンドポイントは、メールインボックス向けの認証されたユーザー名とパスワードを使用して設定されます。このユーザー名とパスワードはサービスを呼び出すときに必要になります。メールアカウントは、そのメールアカウントの設定が行われているメールサーバーシステムによって保護されます。

ユーザーがファイルおよび変換パス名の中で西ヨーロッパ言語の文字を使用してドキュメントを送信する場合は、必要なエンコードの種類（Latin1 [ISO-8859-1]、西ヨーロッパ言語 [Windows] または UTF-8）をサポートするメールアプリケーションを使用する必要があります。詳しくは、使用しているアプリケーションサーバー版の *AEM Forms のインストールおよびデプロイ*&#x200B;ドキュメントを参照してください。

メールエンドポイントを設定する前に、メールサービスを設定します（[ デフォルトのメールエンドポイント設定の指定 ](configuring-email-endpoints.md#configure-default-email-endpoint-settings) を参照）。メールサービスの設定パラメーターには、次の 2 つの目的があります。

* すべてのメールエンドポイントに共通する属性を設定すること
* すべてのメールエンドポイントで使用されるデフォルト値を指定すること

## メールエンドポイントに対する SSL を設定する {#configure-ssl-for-an-email-endpoint}

メールエンドポイントに Secure Sockets Layer（SSL）を使用するように POP3、IMAP または SMTP を設定することができます。

1. メールサーバーで、製造元のドキュメントに従って POP3、IMAP または SMTP に対して SSL を有効にします。
1. メールサーバーからクライアント証明書を書き出します。
1. keytool プログラムを使用して、クライアント証明書ファイルをアプリケーションサーバーの Java 仮想マシン（JVM）証明書ストアに読み込みます。この手順は、JVM とクライアントのインストールパスによって異なります。

   例えば、Microsoft Windows Server® 2003 で JDK 1.5.0 を使用してデフォルトの Oracle WebLogic Server インストール環境を使用している場合は、コマンドプロンプトで次のように入力します。

   `keytool -import -file client_certificate -alias myalias -keystore BEA_HOME\jdk150_04\jre\security\cacerts`

1. パスワードの入力を求められたら、適切なパスワードを入力します（Java の場合、デフォルトのパスワードは `changeit` です）。証明書が正しく読み込まれたことを示すメッセージが表示されます。
1. メールエンドポイントをサービスに追加するには、管理コンソールを使用します。
1. 管理コンソールでメールエンドポイントを作成します。エンドポイントを設定する際に、受信メッセージに対しては「POP3/IMAP SSL を有効にする」オプションを選択し、送信メッセージに対しては「SMTP SSL を有効にする」オプションを選択して、ポートのプロパティを変更します。

>[!NOTE]
>
>ヒント：SSL を使用しているときに問題が発生した場合は、Microsoft Outlook などのメールクライアントを使用して、SSL を介してメールサーバーにアクセスできるかどうかを確認してください。メールクライアントでメールサーバーにアクセスできない場合は、証明書かメールサーバーのいずれかの設定に問題があります。

## デフォルトのメールエンドポイントの設定を指定する {#configure-default-email-endpoint-settings}

サービスの管理ページを使用して、すべてのメールエンドポイントに共通する属性を設定し、すべてのメールエンドポイントのデフォルト値を設定することができます。

Forms Workflow でユーザーからのメールメッセージを受信および処理するには、Complete Task サービス用のメールエンドポイントを作成する必要があります。このメールエンドポイントには、[Complete Task サービス用のメールエンドポイントを作成](configuring-email-endpoints.md#create-an-email-endpoint-for-the-complete-task-service)で説明するように、追加の設定が必要です。

### メールエンドポイントのデフォルト値を変更する {#change-the-default-values-for-email-endpoints}

1. 管理コンソールで、サービス／アプリケーションおよびサービス／サービスの管理をクリックします。
1. サービスの管理ページで、「Email: 1.0」をクリックします（コンポーネント ID は、com.adobe.idp.dsc.provider.service.email.Email です）。
1. 「設定」タブで、デフォルトのメールエンドポイント設定を指定して、「保存」をクリックします。

### デフォルトのメールエンドポイントの設定 {#default-email-endpoint-settings}

**Cron 式：** Quartz が入力ディレクトリのポーリングをスケジュールするために使用する Cron 式。

**繰り返し間隔：**&#x200B;ディレクトリのポーリングを繰り返す間隔です。エンドポイントの設定でこの値を指定しない場合は、デフォルトの繰り返し間隔（秒単位）が使用されます。デフォルト値は 10 です。この値を 10 未満にすることはできません。

**繰り返し回数：**&#x200B;入力ディレクトリのポーリング回数です。エンドポイントの設定でこの値を指定しない場合は、デフォルトの繰り返し回数が使用されます。-1 を指定すると、ディレクトリは無限にスキャンされます。デフォルト値は -1 です。

**ジョブ開始時の遅延：**&#x200B;エンドポイントをスキャンするジョブを開始するまでに待機する時間（秒単位）のデフォルト値。デフォルト値は 0 です。

**バッチサイズ：**&#x200B;最適なパフォーマンスを得るために、受信者が 1 回のスキャンで処理するメールの数。-1 を指定すると、すべてのメールが処理されます。デフォルト値は 2 です。

**非同期：**&#x200B;呼び出しタイプを非同期または同期として識別します。一過性および同期型のプロセスは、同期型でのみ呼び出すことができます。デフォルト値は「asynchronous」です。

**ドメインパターン：**&#x200B;受信メールをフィルタリングするために使用されるドメイン名パターン。例えば、adobe.com を使用すると、adobe.com から受信したメールのみが処理され、それ以外のドメインからのメールは無視されます。

**ファイルパターン：**&#x200B;プロバイダーが受け入れる受信ファイルの添付パターン。これには、特定の拡張子（&amp;ast;.dat, &amp;ast;.xml）、特定の名前（data）、名前と拡張子に複合式（.[dD][aA]&#39;port&#39;）を持つファイルが含まれます。デフォルト値は &amp;ast; です。&amp;ast;。

**ジョブの成功の通知先：**&#x200B;ジョブの正常終了を示すメールの送信に使用する 1 つ以上のメールアドレス。デフォルトでは、ジョブ正常終了メッセージは常に最初のジョブの送信者に送信されます。最大 100 人の受信者を指定できます。この設定を無効にするには、フィールドを空白のままにします。

**ジョブの失敗の通知先：**&#x200B;ジョブの失敗を示すメールの送信に使用する 1 つ以上のメールアドレス。デフォルトでは、ジョブ失敗メッセージは常に最初のジョブの送信者に送信されます。最大 100 人の受信者を指定できます。この設定を無効にするには、フィールドを空白のままにします。

**インボックスホスト：**&#x200B;メールプロバイダーがスキャンの対象とするインボックスのホスト名または IP アドレス。

**インボックスポート：**&#x200B;メールプロバイダーがスキャンの対象とするインボックスのポート番号。この値が 0 の場合は、デフォルトの IMAP ポートまたは POP3 ポートが使用されます。

**インボックスプロトコル：**&#x200B;メールエンドポイントがインボックスをスキャンする際に使用するメールプロトコル。IMAP または POP3 を選択できます。指定のプロトコルはインボックスホストメールサーバーでサポートされている必要があります。

**インボックスタイムアウト：**&#x200B;インボックスに接続しようとする際に、エンドポイントが操作をキャンセルするまでに待機する時間を指定します。タイムアウト値に達する前に接続が確立されない場合、インボックスはポーリングされません。

**インボックスユーザー：**&#x200B;メールアカウントにログインするために必要なユーザー名。メールサーバーと設定によって、メールのユーザー名の部分だけを指定する場合と、完全なメールアドレスを指定する場合があります。

**インボックスのパスワード：** インボックスユーザーのパスワード。

**POP3/IMAP SSL を有効にする：**&#x200B;選択すると、SSL が有効になります。

**SMTP ホスト：**&#x200B;メールプロバイダーが結果やエラーメッセージの送信時に使用するメールサーバーのホスト名。例えば、mail.example.com のように指定します。

**SMTP ポート：**&#x200B;メールサーバーへの接続に使用されるポート。デフォルト値は 25 です。

**SMTP ユーザー：**&#x200B;メールプロバイダーが結果やエラーを通知するメールの送信時に使用するユーザーアカウント。

**SMTP パスワード：** SMTP アカウントのパスワード。 SMTP パスワードが不要なメールサーバーもあります。

**送信者：**&#x200B;結果およびエラーのメール通知を送信するときに使用するメールアドレス（user@company.com など）。「送信者」の値を指定しない場合、メールサーバーでは、「SMTP ユーザー」設定で指定されている値と、メールサーバーで設定されているデフォルトのドメインを組み合わせて、メールアドレスを決定します。使用しているメールサーバーにデフォルトのドメインがなく、「送信者」の値を指定しない場合は、エラーが発生することがあります。メールメッセージに正しい送信元アドレスが表示されるように、「送信者」設定の値を指定してください。

**SMTP SSL を有効にする：**&#x200B;選択すると、SSL over SMTP が有効になります。

**元のメール本文を添付ファイルとして含める：**&#x200B;デフォルトでは、Forms サーバーにメールを送信すると、元のメッセージのテキストはメッセージの本文に含まれます。代わりに、テキストを添付ファイルとして含めるには、このオプションを選択します。

**結果のメールに元の件名を使用：**&#x200B;デフォルトでは、Forms サーバーは結果のメールメッセージを送信する際の件名として、「成功のメールの件名」と「エラーのメールの件名」の設定で指定された値を使用します。代わりに、サーバーに送信された元のメールと同じ件名行を使用するには、このオプションを選択します。

**成功のメールの件名：**&#x200B;メールをメールエンドポイントに送信してプロセスを開始または続行すると、AEM Forms サーバーから返信のメールメッセージを受け取ります。送信したメールに問題がなかった場合は、成功のメールを受け取ります。送信したメールに問題があった場合は、問題の内容を知らせる失敗のメールを受け取ります。この設定により、このエンドポイントに対して送信される成功のメールメッセージの件名行を指定できます。

**成功のメールの本文：**&#x200B;この設定により、このエンドポイントに対して送信される成功のメールメッセージの本文を指定できます。

**エラーのメールの件名プレフィックス：**&#x200B;この設定により、このエンドポイントに対して送信される失敗のメールメッセージの件名の先頭に使用されるテキストを指定できます。

**エラーのメールの件名：**&#x200B;この設定により、このエンドポイントに対して送信される失敗のメールメッセージの件名を指定できます。このテキストは、エラーのメールの件名プレフィックスの後に表示されます。

**エラーのメールの本文：** この設定により、このエンドポイントに対して送信される失敗のメールメッセージの本文の最初の行を指定できます。

**メールの概要情報：**&#x200B;各成功または失敗のメッセージには、Forms サーバーに送信された元のメールのテキストを含むセクションがあります。この設定では、そのセクションの上に表示するテキストを指定します。

**このエンドポイントの作成／更新の前にインボックスを検証：**&#x200B;このオプションを選択すると、Forms サーバーはエンドポイントを作成する前に SMTP/POP3 の設定が正しいかどうかを確認します。「追加」をクリックすると、インボックスアカウントが有効かどうかを示すメッセージが表示されます。このオプションを選択しなかった場合、AEM Forms サーバーはインボックスを確認せずにエンドポイントを作成します。

**文字セットエンコーディング：**&#x200B;メールメッセージに使用するエンコード形式。デフォルトは UTF-8 です。日本以外のほとんどのユーザーはこれを使用します。日本語環境のユーザーは、ISO2022-JP を選択できます。

**送信失敗メールフォルダー：** SMTP メールサーバーが動作していない場合に結果を保存するディレクトリを指定します。

## メールエンドポイントの設定 {#email-endpoint-settings}

メールエンドポイントを設定するには、次の設定を使用します。

**名前：**&#x200B;エンドポイントを識別する必須の設定。&lt; は含めないでください。含めると、Workspace に表示される名前の一部が省略されます。エンドポイント名として URL を入力する場合は、RFC1738 で指定された構文規則に準拠していることを確認します。

**説明：**&#x200B;エンドポイントの説明。&lt; は含めないでください。含めると、Workspace に表示される説明の一部が省略されます。

**Cron 式：** Cron 式を使用してメールをスケジュールする必要がある場合に Cron 式を入力。

**繰り返し回数：**&#x200B;メールエンドポイントでフォルダーまたはディレクトリをスキャンする回数。-1 を指定すると、無限にスキャンされます。デフォルト値は -1 です。

**繰り返し間隔：**&#x200B;受信側が受信メールの有無をチェックするために使用するスキャン頻度。

**ジョブ開始時の遅延：**&#x200B;スケジューラーを開始してからスキャンを実行するまでの待機時間。

**バッチサイズ：**&#x200B;最適なパフォーマンスを得るために、受信者が 1 回のスキャンで処理するメールの数。-1 を指定すると、すべてのメールが処理されます。デフォルト値は 2 です。

**ユーザー名：**&#x200B;必須の設定で、メールからターゲットサービスを呼び出す際に使用するユーザー名。デフォルト値は「SuperAdmin」です。

**ドメイン名：**&#x200B;必須の設定で、ユーザーのドメイン。デフォルト値は「DefaultDom」です。

**ドメインパターン：**&#x200B;プロバイダーが受け入れる受信メールのドメインパターンを指定します。例えば、adobe.com を使用すると、adobe.com から受信したメールのみが処理され、それ以外のドメインからのメールは無視されます。

**ファイルパターン：**&#x200B;プロバイダーが受け入れる受信メールの添付ファイルのパターンを指定します。これには、特定の拡張子を持つファイル（&amp;ast;.dat や &amp;ast;.xml）、特定の名前のファイル（data）、名前と拡張子が混在する式に一致するファイル（&amp;ast;.[dD][aA]&#39;port&#39;）が該当します。

**ジョブの成功の受信者：**&#x200B;ジョブの正常終了を示すメッセージの送信先になるメールアドレスです。デフォルトでは、ジョブの正常終了を示すメッセージは常に送信者に送信されます。sender と入力すると、メールの結果は送信者に送信されます。最大 100 人の受信者を指定できます。追加の受信者をメールアドレスで指定するときは、カンマ（,）で区切ります。

この設定を無効にするには、設定を空白のままにします。結果のメール通知を送信しないで、プロセスを起動することが必要な場合もあります。

**失敗したジョブの受信者**：ジョブの失敗を示すメッセージの送信先になるメールアドレスです。デフォルトでは、ジョブ失敗メッセージは常に送信者に送信されます。sender と入力すると、メールの結果は送信者に送信されます。最大 100 人の受信者を指定できます。追加の受信者をメールアドレスで指定するときは、カンマ（,）で区切ります。

この設定を無効にするには、設定を空白のままにします。結果のメール通知を送信しないで、プロセスを起動することが必要な場合もあります。

**インボックスホスト：**：メールプロバイダーがスキャンの対象とするインボックスのホスト名または IP アドレスです。

**インボックスポート：**&#x200B;メールサーバーが使用するポートです。POP3 のデフォルト値は 110 で、IMAP のデフォルト値は 143 です。SSL が有効になっている場合は、POP3 のデフォルト値は 995 で、IMAP のデフォルト値は 993 です。

**インボックスプロトコル：**&#x200B;メールエンドポイントがインボックスをスキャンするときに使用するメールプロトコルです。値は IMAP または POP3 です。指定のプロトコルはインボックスホストメールサーバーでサポートされている必要があります。

**インボックスタイムアウト：**&#x200B;メールプロバイダーがインボックスの応答を待機する時間（秒単位）です。

**インボックスユーザー：**&#x200B;メールアカウントにログインするためのユーザー名です。メールサーバーと設定によって、メールのユーザー名の部分だけを指定する場合と、完全なメールアドレスを指定する場合があります。

**インボックスのパスワード：**&#x200B;インボックスユーザーのパスワードです。

**POP3/IMAP SSL を有効にする：**&#x200B;この設定を選択すると、メールプロバイダーはインボックスのスキャンに SSL を使用します。メールサーバーで SSL がサポートされている必要があります。

**SMTP ホスト：**&#x200B;メールプロバイダーが結果やエラーメッセージを送信するメールサーバーのホスト名です。

**SMTP ポート：** SMTP ポートのデフォルト値は 25 です。

**SMTP ユーザー：**&#x200B;メールプロバイダーが結果およびエラーのメール通知を送信するときに使用するユーザーアカウントです。

**SMTP パスワード：** SMTP アカウントのパスワードです。 SMTP パスワードが不要なメールサーバーもあります。

**送信者：**&#x200B;結果およびエラーのメール通知を送信するときに使用するメールアドレス（user@company.com など）。「送信者」の値を指定しない場合、メールサーバーでは、「SMTP ユーザー」設定で指定されている値と、メールサーバーで設定されているデフォルトのドメインを組み合わせて、メールアドレスを決定します。使用しているメールサーバーにデフォルトのドメインがなく、「送信者」の値を指定しない場合は、エラーが発生することがあります。メールメッセージに正しい送信元アドレスが表示されるように、「Send From」設定の値を指定してください。

**SMTP SSL を有効にする：**&#x200B;この設定を選択すると、メールプロバイダーはインボックスのスキャンに SSL を使用します。メールサーバーで SSL がサポートされている必要があります。

**送信が失敗したメールのフォルダー：** SMTP メールサーバーが動作していない場合に結果を保存するディレクトリを指定します。

**非同期：**「同期」に設定すると、すべての入力ドキュメントが処理された後に 1 回の応答が返されます。「asynchronous」（非同期）に設定すると、1 つのドキュメントの処理が完了するたびに応答が返されます。

例えば、1 つの Word ドキュメントを受け取って PDF ファイルとして返すサービスにメールエンドポイントを作成します。複数（3 つ）の Word ドキュメントが含まれるメールをエンドポイントのインボックスに送信できます。エンドポイントが「同期」に設定されている場合は、3 つドキュメントのすべてが処理されると、1 つの応答メールに 3 つのドキュメントのすべてが添付されて送信されます。エンドポイントが非同期の場合、1 つの Word ドキュメントが PDF に変換されるごとに、応答メールが送信されます。その結果、それぞれ 1 つの PDF ファイルが添付された 3 件のメールが送信されます。

デフォルト値は asynchronous（非同期）です。

**元のメール本文を添付ファイルとして含める：** デフォルトでは、Forms サーバーにメールを送信すると、元のメッセージのテキストはメッセージの本文に含まれます。代わりにテキストを添付ファイルとして含めるには、このオプションを選択します。

**結果のメールに元の件名を使用する：** デフォルトでは、Forms サーバーは結果のメールメッセージを送信する際に、件名行として、「成功のメールの件名」と「エラーのメールの件名」の設定に指定された値を使用します。代わりにサーバーに送信された元のメールと同じ件名行を使用するには、このオプションを選択します。

**成功のメールの件名：**&#x200B;メールをメールエンドポイントに送信してプロセスを開始または続行すると、AEM Forms サーバーから返信のメールメッセージを受け取ります。送信したメールに問題がなかった場合は、成功のメールを受け取ります。送信したメールに問題があった場合は、問題の内容を知らせる失敗のメールを受け取ります。この設定により、このエンドポイントに対して送信される成功のメールメッセージの件名行を指定できます。

**成功のメールの本文：**&#x200B;この設定により、このエンドポイントに対して送信される成功のメールメッセージの本文を指定できます。

**エラーのメールの件名プレフィックス：**&#x200B;この設定により、このエンドポイントに対して送信される失敗のメールメッセージの件名の先頭に使用されるテキストを指定できます。

**エラーのメールの件名：**&#x200B;この設定により、このエンドポイントに対して送信される失敗のメールメッセージの件名を指定できます。このテキストは、エラーのメールの件名プレフィックスの後に表示されます。

**エラーのメールの本文：** この設定により、このエンドポイントに対して送信される失敗のメールメッセージの本文の最初の行を指定できます。

**メールの概要情報：**&#x200B;各成功または失敗のメッセージには、Forms サーバーに送信された元のメールのテキストを含むセクションがあります。この設定では、そのセクションの上に表示するテキストを指定します。

**このエンドポイントの作成／更新の前にインボックスを検証する：**&#x200B;このオプションを選択した場合、エンドポイントを作成する前に、SMTP／POP3 の設定が正しいかどうかを Forms サーバーが確認します。「追加」をクリックすると、インボックスアカウントが有効かどうかを示すメッセージが表示されます。このオプションを選択しなかった場合、AEM Forms サーバーはインボックスを確認せずにエンドポイントを作成します。

**操作名：**&#x200B;この設定は必須です。メールエンドポイントに割り当てることができる操作のリストです。ここで選択した操作によって、「入力パラメーターのマッピング」および「出力パラメーターのマッピング」のセクションに表示されるフィールドが決定されます。

**入力パラメーターのマッピング：** サービスおよび操作を処理するために必要な入力を設定するために使用します。入力には、リテラルと変数の 2 種類があります。

**リテラル：** メールでは、フィールドに入力された値を表示どおりに使用します。

**変数：** メールの件名、本文、ヘッダーまたは送信者のメールアドレスから文字列をマップできます。これを行うには、キーワード %SUBJECT%、%BODY%、%HEADER%、%SENDER% のいずれかを使用します。例えば、%SUBJECT% を使用すると、メールの件名の内容が入力パラメーターとして使用されます。添付ファイルを取得するには、メールエンドポイントが使用できるファイルパターンを入力します。このパターンによって、添付ドキュメントが選択されます。例えば、&amp;ast;.pdf と入力すると、ファイル名に拡張子 .pdf を持つ添付ドキュメントがすべて選択されます。&amp;ast; と入力すると、添付ドキュメントがすべて選択されます。example.pdf と入力すると、example.pdf という名前の添付ドキュメントがすべて選択されます。

**出力パラメーターのマッピング：** サービスおよび操作の出力を設定するために使用します。出力パラメーターに次の文字を使用すると、マップされた値が添付ファイル名に展開されます。

**%F** ソースファイルのファイル名（拡張子は除く）を表します。

**%E**&#x200B;ソースファイルの拡張子を表します。

バックスラッシュ（\）は %% に置き換えられます。

***注意&#x200B;**：サービス要求メッセージに複数の添付ファイルが含まれている場合、エンドポイントの出力パラメーターのマッピングプロパティの値に、%F パラメーターおよび %E パラメーターを使用することはできません。サービス応答が複数の添付ファイルを返す場合、2 つ以上の添付ファイルに同じファイル名を指定することはできません。これらの推奨事項に従わない場合は、返されるファイルには、呼び出されたサービスにより名前が付けられるので、予期できない名前になります。*

使用可能な値を次に示します。

**単一のオブジェクト：** メールプロバイダーはソースフォルダーの宛先を持たないので、結果は添付ファイルとして返されます。パターンは「Result/%F.ps」です。結果は、「Result%%sourcefilename.ps」という名前の添付ファイルとして返されます。

**リスト：**&#x200B;パターンは「Result/%F/」です。結果は、「Result%%sourcefilename%%file1」という名前の添付ファイルとして返されます。

**マップ：** パターンは、「Result/%F/」です。ソースの宛先は、「Result%%sourcefilename%%file1」および「Result%%sourcefilename%%file2」です。複数のオブジェクトがマップにあり、パターンが「Result/%F.ps」である場合、応答添付ファイルは「Result%%sourcefilename1.ps」（出力 1）および「Result%%sourcefilename2.ps」（出力 2）になります。

## Complete Task サービス用にメールエンドポイントを作成する {#create-an-email-endpoint-for-the-complete-task-service}

Forms Workflow でユーザーからのメールメッセージを受信および処理するには、Complete Task サービス用のメールエンドポイントを作成する必要があります。

1. 管理コンソールで、サービス／アプリケーションおよびサービス／サービスの管理をクリックします。
1. サービスの管理ページで、「Complete Task」サービスをクリックします。
1. 「エンドポイント」タブで、ドロップダウンリストから「メール」を選択して、「追加」をクリックします。
1. 「インボックスホスト」ボックスに、メールサーバーのホスト名または IP アドレスを入力します。
1. 「インボックスユーザー」ボックスに、フォーム送信処理用に作成したメールアカウントへのログインに必要なユーザー名を入力します。メールサーバーと設定によって、この名前は、メールのユーザー名の部分のみである場合と、完全なメールアドレスである場合があります。
1. 「インボックスパスワード」ボックスに、インボックスユーザーのパスワードを入力します。
1. 「SMTP ホスト」ボックスに、電子メールプロバイダーが結果やエラーメッセージを送る際の送信元となるメールサーバーのホスト名または IP アドレスを入力します。
1. 「SMTP ユーザー」ボックスに、電子メールプロバイダーが結果およびエラーの電子メールを送信する際に使用するユーザーアカウントを入力します。このユーザーアカウントには、インボックスユーザーに使用するのと同じ値を使用できます。
1. 「SMTP パスワード」ボックスに、SMTP アカウントのパスワードを入力します。
1. 操作名リストで、「invoke」を選択します。
1. 「attachmentMap」リストで「変数」を選択し、隣のボックスに`*.*`と入力します。これで、受信メールメッセージのすべての添付ファイルが Complete Task プロセスのマップ変数に送信されます。
1. 「mailBody」リストで「変数」を選択し、隣のボックスに`%BODY%`と入力します。
1. 「mailFrom」リストで「変数」を選択し、隣のボックスに `%SENDER%` と入力します。これで、送信者のアドレスが Complete Task プロセスデータにマップされます。
1. 結果のボックスに、`results` と入力します。これで、Complete Task または Start Process から結果の文字列が返されます。
1. 「追加」をクリックします。
