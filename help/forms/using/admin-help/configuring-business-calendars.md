---
title: 業務カレンダーの設定
description: 業務カレンダーでは、組織の稼働日と非稼働日を定義します。業務カレンダーの設定方法について説明します。
contentOwner: admin
content-type: reference
geptopics: SG_AEMFORMS/categories/configuring_forms_workflow
products: SG_EXPERIENCEMANAGER/6.5/FORMS
exl-id: 4282718a-41f1-411a-9cd7-8c470005107d
solution: Experience Manager, Experience Manager Forms
role: User, Developer
source-git-commit: f6771bd1338a4e27a48c3efd39efe18e57cb98f9
workflow-type: ht
source-wordcount: '1889'
ht-degree: 100%

---

# 業務カレンダーの設定 {#configuring-business-calendars}

*業務カレンダー*&#x200B;では、組織の稼働日と非稼働日（法定休日、週末、会社定休日など）を定義します。業務カレンダーを使用する際、AEM Forms では特定の日付計算の実行時に非稼働日がスキップされます。Workbench では、タスクのリマインダー、締め切り日、エスカレーションなどのユーザー関連のイベントに業務カレンダーを使用するか、タイマーイベントや待機サービスなどのユーザーに関連しないアクションに業務カレンダーを使用するかを指定できます。

例えば、タスクリマインダーが、ユーザーへのタスクの割り当ての 3 稼動日後に発生するように設定されているとします。タスクは木曜日に割り当てられます。以降の 3 日間は、金曜日が祝日、その翌 2 日は週末なので非稼働日です。したがって、リマインダーは翌週の水曜日に送信されます。

>[!NOTE]
>
>業務カレンダーを使用して日付と時刻を計算する場合、AEM forms は実行中のサーバーの日時を使用し、タイムゾーン間の時差の調整は行いません。例えば、ロンドンで稼動しているサーバーで午前 10 時にタスクリマインダーを送信するようにスケジュールされていて、リマインダーの受信ユーザーがニューヨークにいる場合、ユーザーは現地時間の午前 5 時にリマインダーを受け取ることになります。

## デフォルトの業務カレンダーの使用 {#using-the-default-business-calendar}

AEM Forms には、土曜日と日曜日が非稼働日に指定されている「*組み込みカレンダー*」というデフォルトの業務カレンダーがあります。組織内のすべてのユーザーの非稼働日が同じ場合は、組織に合わせてデフォルトの業務カレンダーを更新できます。デフォルトの業務カレンダーのみを使用する場合は、User Management で業務カレンダーを有効にしたり、マッピングを指定したりする必要はありません。他の業務カレンダーが定義されていない場合、AEM forms ではデフォルトの業務カレンダーが使用されます。

## 複数の業務カレンダーの設定 {#setting-up-multiple-business-calendars}

組織内の一部のユーザーの非稼働日が異なる場合は、複数の業務カレンダーを定義し、ユーザーの業務カレンダーの実行時解決を許可するマッピングを構成できます。

### 複数の業務カレンダーを定義 {#define-multiple-business-calendars}

1. ユーザーに適切な業務カレンダーを割り当てる方法を決定します。ユーザーに業務カレンダーを関連付ける方法は 2 つあります。

   **グループメンバーシップ：** ユーザーのグループメンバーシップに基づいて、ユーザーに業務カレンダーを割り当てることができます。この場合、グループ内の各ユーザーは同じ業務カレンダーを使用します。

   ユーザーが 2 つの異なるグループのメンバーで、それらのグループが 2 つの異なる業務カレンダーにマッピングされている場合、AEM forms では検索結果で見つかった最初のカレンダーが使用されます。この場合、業務カレンダーキーを使用してユーザーを業務カレンダーに関連付けることを検討します。

   **業務カレンダーキー：** User Management で指定された設定である業務カレンダーキーに基づいて、ユーザーに業務カレンダーを割り当てることができます。次に、業務カレンダーキーを Forms Workflow の業務カレンダーにマッピングします。

   業務カレンダーキーをユーザーに割り当てる方法は、エンタープライズドメイン、ローカルドメイン、ハイブリッドドメインのいずれを使用しているかによって異なります。ドメインの設定について詳しくは、[ドメインの追加](/help/forms/using/admin-help/adding-domains.md#adding-domains)を参照してください。

   ローカルドメインまたはハイブリッドドメインを使用している場合、ユーザーに関する情報は User Management データベースにのみ格納されます。これらのユーザーに業務カレンダーキーを設定するには、User Management でユーザーを追加または編集する際に、「業務カレンダーキー」フィールドに文字列を入力します（[ユーザーの追加および設定](/help/forms/using/admin-help/adding-configuring-users.md#adding-and-configuring-users)を参照してください）。次に、業務カレンダーキー（文字列）を Forms Workflow の業務カレンダーにマッピングします（詳しくは、[業務カレンダーへのユーザーおよびグループのマッピング](configuring-business-calendars.md#mapping-users-and-groups-to-a-business-calendar)を参照してください）。

   エンタープライズドメインを使用している場合、ユーザーに関する情報は、User Management が User Management データベースと同期する LDAP ディレクトリなど、サードパーティのストレージシステムに存在します。これによって、業務カレンダーキーを LDAP ディレクトリのフィールドにマッピングできるようになります。例えば、ディレクトリ内の各ユーザーレコードに「国」フィールドが含まれ、ユーザーが所在する国に基づいて業務カレンダーを割り当てる場合は、ディレクトリのユーザー設定を指定する際に「国」フィールド名を「業務カレンダーキー」フィールドに指定します（詳しくは、[ディレクトリの設定](/help/forms/using/admin-help/configuring-directories.md#configuring-directories)を参照してください）。その後、業務カレンダーキー（LDAP ディレクトリの「国」フィールドに対して定義された値）を Forms Workflow の業務カレンダーにマッピングできます（詳しくは、[業務カレンダーへのユーザーおよびグループのマッピング](configuring-business-calendars.md#mapping-users-and-groups-to-a-business-calendar)を参照してください）。

1. Forms Workflow で、同じ非稼働日を共有するユーザーの各セットに対してカレンダーを定義します（詳しくは、[業務カレンダーを作成または更新](configuring-business-calendars.md#create-or-update-a-business-calendar)を参照してください）。
1. Forms Workflow で、業務カレンダーキーまたはグループのメンバーシップを各カレンダーにマッピングします（詳しくは、[業務カレンダーへのユーザーおよびグループのマッピング](configuring-business-calendars.md#mapping-users-and-groups-to-a-business-calendar)を参照してください）。
1. Workbench では、プロセス開発者がリマインダー、デッドラインおよびエスカレーションに業務カレンダーを使用するかどうかを選択します（詳しくは、[Workbench ヘルプ](https://www.adobe.com/go/learn_aemforms_workbench_63_jp)を参照してください）。

   プロセス開発者が業務カレンダーの使用を選択した場合、AEM Forms は User Management 設定と管理コンソールで定義された業務カレンダーマッピングに基づいて適切な業務カレンダーを動的に選択します。マッピングが存在しない場合は、デフォルトのカレンダーを使用します。

   プロセス開発者が業務カレンダーを使用しない場合、イベントの日付計算では毎日が稼働日として扱われます。例えば、タスクの期限は、タスクがユーザーに割り当てられてから 3 日後に発生するように設定されます。タスクは木曜日に割り当てられます。タスクの期限は、週末であるにもかかわらず、日曜日に発生します。

## 業務カレンダーの作成または更新 {#create-or-update-a-business-calendar}

組織内に非稼働日が異なる様々なユーザーのグループがある場合は、複数の業務カレンダーを定義できます。AEM Forms で提供されているデフォルトの組み込みカレンダーを含む、既存のカレンダーを変更することもできます。

>[!NOTE]
>
>業務カレンダーを作成しない場合は、デフォルトの業務カレンダーが使用されます。

1. 管理コンソールで、サービス／Forms ワークフロー／業務カレンダーをクリックします。
1. 新しい業務カレンダーを追加するには、![bus_cal_plus](assets/bus_cal_plus.png) をクリックします。*新しいカレンダー*&#x200B;というテキストがドロップダウンリストに表示されます。テキストを選択し、カレンダーに別の名前を入力します。

   既存の業務カレンダーを編集するには、ドロップダウンリストからそのカレンダーを選択します。

1. 「デフォルトの非稼働日」で、週末などの毎週発生する任意の非稼働日を選択します。
1. [オプション] 「業務時間を使用する」を選択して、稼働日の開始および終了時刻を指定します。

   このオプションを選択すると、指定した時間範囲の前に発生するイベントは時間範囲の最初に移動され、時間範囲の後に発生するイベントは次の稼働日の開始時刻に移動されます。

   例えば、ユーザーが火曜日の午前 2 時にタスクを割り当てられ、このタスクのリマインダーが 2 稼働日後に設定されているとします。業務時間が指定されていない場合、リマインダーは木曜日の午前 2 時に発生します。業務時間が午前 8 時から午後 5 時に設定されている場合、リマインダーは木曜日の午前 8 時にプッシュされます。業務時間が指定されておらず、リマインダーのイベントが火曜日の午後 6 時に作成された場合、リマインダーは木曜日の業務時間後に発生します。業務時間が午前 8 時から午後 5 時に設定されている場合、リマインダーは金曜日の午前 8 時に発生します。

1. 左側のカレンダーで、祝日など、他の非稼働日をダブルクリックします。過去の日付は選択できません。選択した非稼働日が右側のリストに表示され、日付が 1 行に 2 回表示されます。左側の日付を選択して、非営業日の名前または説明を入力します。

   非稼働日をリストから削除するには、日付の横にある ![bus_cal_trash](assets/bus_cal_trash.png) をクリックします。

1. [オプション] このカレンダーをデフォルトのカレンダーにする場合は、「デフォルトのカレンダー」を選択します。デフォルトのカレンダーは、ユーザー関連のイベントに他のカレンダーマッピングが存在しない場合や、タイマーイベントまたは待機サービスに業務カレンダーが指定されていない場合に使用されます。デフォルトのカレンダーは削除できません。
1. 非稼働日の定義が完了したら、「カレンダーを有効化」を選択してカレンダーをアクティブにし、「保存」をクリックします。

   既存のカレンダーを更新する場合、新しいバージョンは直ちに有効になり、既に実行中のタスクを含むすべての業務カレンダーの計算に使用されます。

   >[!NOTE]
   >
   >カレンダーを有効にしない場合は、デフォルトのカレンダーが使用されます。

## 業務カレンダーへのユーザーおよびグループのマッピング {#mapping-users-and-groups-to-a-business-calendar}

ユーザーに業務カレンダーを関連付けるには、2 つの方法を使用できます。ユーザーへの業務カレンダーの割り当ては、業務カレンダーキーまたはユーザーが属するディレクトリグループに基づいて行うことができます。「マッピング」タブを使用すると、AEM Forms で使用する方法を指定したり、業務カレンダーキーおよびグループを業務カレンダーにマッピングしたりできます。業務カレンダーキーとユーザーの関連付けについて詳しくは、[複数の業務カレンダーの設定](configuring-business-calendars.md#setting-up-multiple-business-calendars)を参照してください。

### 業務カレンダーキーに基づく業務カレンダーとユーザーの関連付け {#associate-business-calendars-with-users-based-on-business-calendar-keys}

1. 管理コンソールで、サービス／Forms ワークフロー／業務カレンダーをクリックし、「マッピング」タブをクリックします。
1. IntheSystem Will Use リストで、「User Manager Business Calendar Key Resolution」を選択します。
1. 「ユーザーマネージャーの業務カレンダーキーを表示」を選択します。表示されるリストには、User Management で定義した業務カレンダーキーの一意のセットが含まれています。

   ローカルドメインおよびハイブリッドドメインでは、User Management の「業務カレンダーキー」フィールドに入力された値がリストに表示されます。エンタープライズ（LDAP）ドメインでは、LDAP ドメイン設定で設定された「LDAP」フィールド（「国」など）から返される一意のセットがリストに表示されます。

   User Management 管理者が業務カレンダーキーを定義していない場合は、空のリストが表示されます。

1. UM 業務カレンダーキーリストの各項目に対して、「カレンダー」を選択します。
1. 「保存」をクリックします。

### ディレクトリサービスグループに基づいた業務カレンダーとユーザーおよびグループの関連付け {#associate-business-calendars-with-users-and-groups-based-on-directory-service-groups}

1. 管理コンソールで、サービス／Forms ワークフロー／業務カレンダーをクリックし、「マッピング」タブをクリックします。
1. System Will Use リストで、「Groups Defined By The Directory Server」を選択します。
1. 「マッピング」タブで、「ディレクトリサービスグループを表示」を選択します。表示されるリストには、User Management で定義したグループが含まれています（[ディレクトリ設定](/help/forms/using/admin-help/configuring-directories.md#directory-settings)を参照）。

   >[!NOTE]
   >
   >Workbench で、業務カレンダーを使用するように User サービスを設定し、そのサービスがグループに割り当てられた場合、AEM Forms は、ここで指定したグループマッピングを使用してグループのカレンダーを解決します。AEM Forms では、業務カレンダーキーを使用してユーザーのカレンダーを解決する場合でも、常にグループマッピングを使用してグループのカレンダーを解決します。グループマッピングが見つからない場合は、デフォルトの業務カレンダーが使用されます。

1. ディレクトリサービスグループリストの各項目に対して、カレンダーを 1 つずつ選択します。
1. 「保存」をクリックします。

## 業務カレンダーの書き出しと読み込み {#exporting-and-importing-business-calendars}

AEM Forms では、業務カレンダーを XML ファイルとして書き出したり読み込んだりすることができます。この機能を使用して、カレンダーをステージングシステムから実稼動システムに移動できます。

>[!NOTE]
>
>この機能では、AEM Forms で提供されるデフォルトの業務カレンダーを含む、定義済みのすべての業務カレンダーの書き出しと読み込みが行われます。読み込んだ業務カレンダーが既存のカレンダーと同じ名前である場合、既存のカレンダーは上書きされます。

### 業務カレンダーを書き出し {#export-business-calendars}

1. 管理コンソールで、サービス／Forms ワークフロー／業務カレンダーをクリックします。
1. 「書き出し」をクリックし、XML ファイルを保存します。

### 業務カレンダーを読み込み {#import-business-calendars}

1. 管理コンソールで、サービス／Forms ワークフロー／業務カレンダーをクリックします。
1. 「読み込み」をクリックします。
1. 書き出した業務カレンダーを含む XML ファイルを選択し、「開く」をクリックします。

## 業務カレンダーを削除 {#delete-a-business-calendar}

組織で不要になった業務カレンダーを削除できます。ユーザーおよびグループにマッピングされたままの業務カレンダーを削除した場合は、デフォルトのカレンダーが使用されます。

1. 管理コンソールで、サービス／Forms ワークフロー／業務カレンダーをクリックします。
1. カレンダーを選択します。
1. 「削除」をクリックします。
