---
title: 業務カレンダーの設定
seo-title: 業務カレンダーの設定
description: 業務カレンダーによって、組織の稼働日と非稼働日が定義されます。業務カレンダーの設定方法について説明します。
seo-description: 業務カレンダーによって、組織の稼働日と非稼働日が定義されます。業務カレンダーの設定方法について説明します。
uuid: 0ba610b8-72a8-480c-8783-70d98cbe890a
contentOwner: admin
content-type: reference
geptopics: SG_AEMFORMS/categories/configuring_forms_workflow
products: SG_EXPERIENCEMANAGER/6.5/FORMS
discoiquuid: 7a85e13d-4800-47c4-812a-5c6e2355298a
translation-type: tm+mt
source-git-commit: 58fa0f05bae7ab5ba51491be3171b5c6ffbe870d
workflow-type: tm+mt
source-wordcount: '1928'
ht-degree: 93%

---


# 業務カレンダーの設定 {#configuring-business-calendars}

*業務カレンダー*&#x200B;は、組織の稼働日と非稼働日（法定休日、週末、会社定休日など）を定義します。業務カレンダーを使用している場合、AEM Forms では特定の日付計算の実行時に非稼働日がスキップされます。Workbench では、タスクリマインダー、デッドライン、エスカレーションなどのユーザー関連イベント、または、タイマーイベントや待機サービスなどのユーザー関連ではないアクションに対して業務カレンダーを使用するかどうかを指定できます。

例えば、タスクリマインダーが、ユーザーへのタスクの割り当ての 3 稼働日後に発生するように設定されているとします。タスクが木曜日に割り当てられます。以降の 3 日間は、金曜日が祝日、その翌 2 日は週末なので非稼働日です。したがって、リマインダーは翌週の水曜日に送られます。

>[!NOTE]
>
>業務カレンダーを使用して日付と時刻を計算する際、AEM Forms では実行しているサーバーの日付と時間が使用され、タイムゾーンとの差異に対しての調整は行われません。例えば、タスクリマインダーが、ロンドンで稼働中のサーバーで午前 10 時に発生するようにスケジュールされており、リマインダーを受け取るユーザーがニューヨークにいる場合、ユーザーは現地時刻の午前 5 時にリマインダーを受け取ります。

## デフォルトの業務カレンダーの使用 {#using-the-default-business-calendar}

AEM Forms には、土曜日と日曜日が非稼働日に指定されている「*組み込みカレンダー*」というデフォルトの業務カレンダーがあります。組織内のすべてのユーザーの非稼働日が同じ場合は、自分の組織に合わせてデフォルトの業務カレンダーを更新することができます。デフォルトの業務カレンダーのみを使用する場合は、User Management で業務カレンダーを有効にしたり、マッピングを指定する必要はありません。その他の業務カレンダーが定義されていない場合、AEM Forms ではデフォルトの業務カレンダーが使用されます。

## 複数の業務カレンダーの設定 {#setting-up-multiple-business-calendars}

組織の一部のユーザーの非稼働日が異なる場合は、複数の業務カレンダーを定義し、ユーザーの業務カレンダーの実行時解決を許可するマッピングを設定できます。

### 複数の業務カレンダーの定義 {#define-multiple-business-calendars}

1. ユーザーに適切な業務カレンダーを割り当てる方法を決定します。ユーザーに業務カレンダーを関連付ける方法は 2 つあります。

   **グループのメンバーシップ：** ユーザーのグループメンバーシップに基づいて、ユーザーに業務カレンダーを割り当てることができます。 この場合、グループ内の各ユーザーは同じ業務カレンダーを使用します。

   ユーザーが 2 つの異なるグループのメンバーであり、これらのグループが 2 つの異なる業務カレンダーにマップされている場合、AEM Forms では、検索結果の最初のカレンダーが使用されます。この場合、業務カレンダーキーを使用してユーザーを業務カレンダーに関連付けることを検討します。

   **業務カレンダーキー：** User Managementで指定した設定である業務カレンダーキーに基づいて、ユーザーに業務カレンダーを割り当てることができます。 その後、業務カレンダーキーを forms ワークフローの業務カレンダーにマップします。

   業務カレンダーキーをユーザーに割り当てる方法は、エンタープライズドメイン、ローカルドメイン、ハイブリッドドメインを使用しているかどうかによって異なります。様々な種類のドメインの設定について詳しくは、[ドメインを追加](/help/forms/using/admin-help/adding-domains.md#adding-domains)を参照してください。

   ローカルドメインまたはハイブリッドドメインを使用している場合は、ユーザーに関する情報は、User Management データベースにのみ保存されます。これらのユーザーに業務カレンダーキーを設定するには、User Management でユーザーを追加または編集する際に「業務カレンダーキー」フィールドに文字列を入力します（[ユーザーの追加および設定](/help/forms/using/admin-help/adding-configuring-users.md#adding-and-configuring-users)を参照）。その後、業務カレンダーキー（文字列）を forms ワークフローの業務カレンダーにマップします（[業務カレンダーへのユーザーおよびグループのマッピング](configuring-business-calendars.md#mapping-users-and-groups-to-a-business-calendar)を参照）。

   エンタープライズドメインを使用している場合は、ユーザーに関する情報は、User Management が User Management データベースと同期する LDAP ディレクトリなど、サードパーティのストレージシステムに格納されます。これによって、業務カレンダーキーを LDAP ディレクトリのフィールドにマップできるようになります。例えば、ディレクトリ内の各ユーザーレコードに「国」フィールドがあり、ユーザーの所在地に基づいて業務カレンダーを割り当てる場合は、ディレクトリのユーザー設定を指定する際に、「業務カレンダーキー」フィールドで「国」フィールド名を指定します（「[ディレクトリの設定](/help/forms/using/admin-help/configuring-directories.md#configuring-directories)」を参照）。その後、業務カレンダーキー（LDAP ディレクトリの「国」フィールドに対して定義された値）を Forms ワークフローの業務カレンダーにマップできます（[業務カレンダーへのユーザーおよびグループのマッピング](configuring-business-calendars.md#mapping-users-and-groups-to-a-business-calendar)を参照）。

1. forms ワークフローでは、同じ非稼働日を共有する各セットのユーザーにカレンダーを定義します（[業務カレンダーの作成または更新](configuring-business-calendars.md#create-or-update-a-business-calendar)を参照）。
1. forms ワークフローでは、業務カレンダーキーまたはグループのメンバーシップを各カレンダーにマップします（[業務カレンダーへのユーザーおよびグループのマッピング](configuring-business-calendars.md#mapping-users-and-groups-to-a-business-calendar)を参照）。
1. プロセス開発者は、Workbench で、リマインダー、デッドラインおよびエスカレーションに業務カレンダーを使用するかどうかを選択します（[Workbench ヘルプ](https://www.adobe.com/go/learn_aemforms_workbench_63)を参照）。

   プロセス開発者が業務カレンダーの使用を選択すると、AEM Forms では、User Management の設定と管理コンソールで定義されている業務カレンダーのマッピングに基づいて、適切な業務カレンダーが動的に選択されます。マッピングが存在しない場合は、デフォルトのカレンダーが使用されます。

   プロセス開発者が業務カレンダーを使用しない場合、イベントの日付計算では毎日が稼働日として処理されます。例えば、タスクのデッドラインが、ユーザーへのタスクの割り当ての 3 日後に発生するように設定されているとします。タスクが木曜日に割り当てられます。タスクのデッドラインは、週末であっても日曜日に発生します。

## 業務カレンダーの作成または更新 {#create-or-update-a-business-calendar}

組織内に非稼働日が異なる様々なユーザーのグループがある場合は、複数の業務カレンダーを定義できます。AEM Forms で提供されているデフォルトの組み込みカレンダーを含む、既存のカレンダーを変更することもできます。

>[!NOTE]
>
>新しい業務カレンダーを作成しない場合、デフォルトの業務カレンダーが使用されます。

1. 管理コンソールで、サービス／Forms ワークフロー／業務カレンダーをクリックします。
1. 新しい業務カレンダーを追加するには、[ ![bus_cal_plus](assets/bus_cal_plus.png)]をクリックします。 ドロップダウンリストに、*新しいカレンダー*&#x200B;と表示されます。それを選択して、カレンダーの名前を入力します。

   既存の業務カレンダーを編集するには、ドロップダウンリストからそのカレンダーを選択します。

1. 「デフォルトの非稼働日」で、週末など、週ごとの非稼働日を選択します。
1. [オプション] :「業務時間を使用」を選択し、稼働日の開始と終了時間を指定します。

   このオプションを選択すると、指定された時間範囲の前に発生するイベントは時間範囲の最初に移動され、時間範囲の後に発生するイベントは次の稼働日の開始時刻に移動されます。

   例えば、ユーザーが火曜日の午前 2 時にタスクを割り当てられ、このタスクのリマインダーが 2 稼働日に設定されているとします。業務時間がなければ、リマインダーは木曜日の午前 2 時に発生します。業務時間を午前 8 時から午後 5 時に設定すると、リマインダーは木曜日の午前 8 時に進められます。業務時間がなく、リマインダーのイベントが火曜日の午後 6 時に作成された場合、リマインダーは木曜日の業務時間後に発生します。業務時間が午前 8 時から午後 5 時に設定されていれば、リマインダーは金曜日の午前 8 時に発生します。

1. 左側にあるカレンダーで、祝日など、その他の非稼働日をダブルクリックします。過去の日付は選択できません。選択した非稼働日が右側のリストに表示され、1 行に日付が 2 回示されます。左側の日付を選択し、非稼働日の名前または説明を入力します。

   To remove a non-business day from the list, click ![bus_cal_trash](assets/bus_cal_trash.png) beside the day.

1. [オプション] ：このカレンダーをデフォルトのカレンダーにする場合は、「デフォルトのカレンダー」を選択します。 デフォルトのカレンダーは、ユーザー関連イベントのための他のカレンダーマッピングが存在しない場合、またはタイマーイベントや待機サービスのための業務カレンダーが指定されていない場合に使用されます。デフォルトのカレンダーは削除できません。
1. 非稼働日の定義を終えたら、「カレンダーは有効です」を選択してカレンダーをアクティブにし、「保存」をクリックします。

   既存のカレンダーを更新している場合、新しいバージョンは直ちに有効になり、既に実行中のタスクを含めたすべての業務カレンダーの計算に使用されます。

   >[!NOTE]
   >
   >カレンダーを有効にしない場合、デフォルトのカレンダーが使用されます。

## 業務カレンダーへのユーザーおよびグループのマッピング {#mapping-users-and-groups-to-a-business-calendar}

ユーザーに業務カレンダーを関連付けるには、2 つの方法を使用できます。ユーザーへの業務カレンダーの割り当ては、業務カレンダーキーに基づいて行うか、ユーザーが属するディレクトリグループに基づいて行うことができます。「マッピング」タブを使用して AEM Forms で使用する方法を指定し、業務カレンダーキーおよびグループを業務カレンダーにマップします。業務カレンダーキーとユーザーの関連付けについて詳しくは、「[複数の業務カレンダーの設定](configuring-business-calendars.md#setting-up-multiple-business-calendars)」を参照してください。

### 業務カレンダーキーに基づいた業務カレンダーとユーザーの関連付け {#associate-business-calendars-with-users-based-on-business-calendar-keys}

1. 管理コンソールで、サービス／Forms ワークフロー／業務カレンダーをクリックし、「マッピング」タブをクリックします。
1. 「システムはリストを使用します」で、「User Manager業務カレンダーキーの解決」を選択します。
1. 「表示：ユーザーマネージャーの業務カレンダーキー」を選択します。表示されるリストには、User Management で定義した一意のセットの業務カレンダーキーが含まれています。

   ローカルドメインおよびハイブリッドドメインでは、User Management の「業務カレンダーキー」フィールドに入力された値がリストに表示されます。エンタープライズ（LDAP）ドメインでは、LDAP ドメイン設定で設定された「LDAP」フィールド（「国」など）から返される一意のセットがリストに表示されます。

   User Management 管理者が業務カレンダーキーを定義していない場合は、空のリストが表示されます。

1. 「UM 業務カレンダーキー」リストの各項目に、「カレンダー」を選択します。
1. 「保存」をクリックします。

### ディレクトリサービスグループに基づいた業務カレンダーとユーザーおよびグループの関連付け {#associate-business-calendars-with-users-and-groups-based-on-directory-service-groups}

1. 管理コンソールで、サービス／Forms ワークフロー／業務カレンダーをクリックし、「マッピング」タブをクリックします。
1. 「System Will Use Directory」リストで、「Groups Defined By The Directory Server」を選択します。
1. 「マッピング」タブで、「表示：ディレクトリサービスグループ」を選択します。表示されるリストには、User Management で定義したグループが含まれています（「[ディレクトリ設定](/help/forms/using/admin-help/configuring-directories.md#directory-settings)」を参照）。

   >[!NOTE]
   >
   >Workbench で、業務カレンダーを使用するように User サービスを設定し、サービスがグループに割り当てられている場合、AEM Forms では、ここで指定されたグループマッピングを使用してグループのカレンダーを解決します。AEM Forms では、業務カレンダーキーを使用してユーザーのカレンダーを解決する場合も、常にグループマッピングを使用してグループのカレンダーが解決されます。グループマッピングが見つからない場合は、デフォルトの業務カレンダーが使用されます。

1. 「ディレクトリサービスグループ」リストの各項目に、「カレンダー」を選択します。
1. 「保存」をクリックします。

## 業務カレンダーの書き出しと読み込み {#exporting-and-importing-business-calendars}

AEM Forms では、業務カレンダーを XML ファイルとして書き出したり、読み込むことができます。この機能を使用して、カレンダーをステージングシステムから実稼働システムに移動することができます。

>[!NOTE]
>
>この機能では、AEM Forms で提供されているデフォルトの業務カレンダーを含む、定義済みのすべての業務カレンダーの書き出しおよび読み込みが行われます。既存のカレンダーと同じ名前で読み込まれた業務カレンダーによって、既存のカレンダーが上書きされます。

### 業務カレンダーの書き出し {#export-business-calendars}

1. 管理コンソールで、サービス／Forms ワークフロー／業務カレンダーをクリックします。
1. 「書き出し」をクリックして、XML ファイルを保存します。

### 業務カレンダーの読み込み {#import-business-calendars}

1. 管理コンソールで、サービス／Forms ワークフロー／業務カレンダーをクリックします。
1. 「読み込み」をクリックします。
1. 書き出した業務カレンダーを含む XML ファイルを選択して、「開く」をクリックします。

## 業務カレンダーの削除 {#delete-a-business-calendar}

組織内で不必要となった業務カレンダーを削除することができます。ユーザーおよびグループにマップされている業務カレンダーを削除した場合、デフォルトのカレンダーが使用されます。

1. 管理コンソールで、サービス／Forms ワークフロー／業務カレンダーをクリックします。
1. カレンダーを選択します。
1. 「削除」をクリックします。

