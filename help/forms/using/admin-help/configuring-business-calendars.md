---
title: 業務カレンダーの設定
description: 業務カレンダーは、組織の業務日と非業務日を定義します。 業務カレンダーの設定方法を説明します。
contentOwner: admin
content-type: reference
geptopics: SG_AEMFORMS/categories/configuring_forms_workflow
products: SG_EXPERIENCEMANAGER/6.5/FORMS
exl-id: 4282718a-41f1-411a-9cd7-8c470005107d
source-git-commit: fc2f26a69c208947c14e8c6036825bb217901481
workflow-type: tm+mt
source-wordcount: '1898'
ht-degree: 9%

---

# 業務カレンダーの設定 {#configuring-business-calendars}

*業務カレンダー* 組織の営業日と非営業日（法定休日、週末、会社のシャットダウン日など）を定義します。 業務カレンダーを使用する場合、AEM Forms では、特定の日付計算の実行時に非稼働日がスキップされます。 Workbench では、タスクのリマインダー、デッドライン、エスカレーションなどのユーザー関連のイベントに業務カレンダーを使用するか、タイマーイベントや待機サービスなどのユーザーに関連しないアクションに業務カレンダーを使用するかを指定できます。

例えば、タスクリマインダーは、タスクがユーザーに割り当てられてから 3 営業日後に発生するように設定されます。 タスクは木曜日に割り当てられます。 ただし、次の 3 日間は、金曜日が祝日で、次の 2 日は週末なので、営業日ではありません。 したがって、リマインダーは来週の水曜日に送信されます。

>[!NOTE]
>
>業務カレンダーを使用して日付と時刻を計算する場合、AEM forms は、実行中のサーバーの日時を使用し、タイムゾーン間の差に対しては調整しません。 例えば、ロンドンで稼働しているサーバーで午前 10 時にタスクリマインダーが発生するようにスケジュールされていて、リマインダーを受け取ったユーザーがニューヨーク市にいる場合、ユーザーは現地時間の午前 5 時にリマインダーを受け取ります。

## デフォルトの業務カレンダーの使用 {#using-the-default-business-calendar}

AEM Forms には、土曜日と日曜日が非稼働日に指定されている「*組み込みカレンダー*」というデフォルトの業務カレンダーがあります。組織内のすべてのユーザーの非稼働日が同じ場合は、組織に合わせてデフォルトの業務カレンダーを更新できます。 デフォルトの業務カレンダーのみを使用する場合は、User Management で業務カレンダーを有効にしたり、マッピングを指定したりする必要はありません。 他の業務カレンダーが定義されていない場合、AEM forms ではデフォルトの業務カレンダーが使用されます。

## 複数の業務カレンダーの設定 {#setting-up-multiple-business-calendars}

組織内の一部のユーザーの非稼働日が異なる場合は、複数の業務カレンダーを定義し、ユーザーの業務カレンダーの実行時解決を許可するマッピングを構成できます。

### 複数の業務カレンダーの定義 {#define-multiple-business-calendars}

1. 適切な業務カレンダーをユーザーに関連付ける方法を決定します。 ビジネスカレンダーをユーザーに関連付ける方法は 2 つあります。

   **グループのメンバーシップ：** ユーザーのグループメンバーシップに基づいて、ユーザーに業務カレンダーを割り当てることができます。 この場合、グループ内の各ユーザーは同じ業務カレンダーを使用します。

   ユーザーが 2 つの異なるグループのメンバーで、それらのグループが 2 つの異なる業務カレンダーにマッピングされている場合、AEM forms では、検索結果で見つかった最初のカレンダーが使用されます。 この場合、業務カレンダーキーを使用してユーザーを業務カレンダーに関連付けることを検討します。

   **業務カレンダーキー：** User Management で指定された設定である業務カレンダーキーに基づいて、ユーザーに業務カレンダーを割り当てることができます。次に、業務カレンダーキーを forms ワークフローの業務カレンダーにマップします。

   業務カレンダーキーをユーザーに割り当てる方法は、エンタープライズドメイン、ローカルドメイン、ハイブリッドドメインのいずれを使用しているかによって異なります。ドメインの設定について詳しくは、 [ドメインの追加](/help/forms/using/admin-help/adding-domains.md#adding-domains).

   ローカルドメインまたはハイブリッドドメインを使用している場合、ユーザーに関する情報は User Management データベースにのみ格納されます。これらのユーザーに業務カレンダーキーを設定するには、User Management でユーザーを追加または編集する際に、「業務カレンダーキー」フィールドに文字列を入力します。 ( 詳しくは、 [ユーザーの追加と設定](/help/forms/using/admin-help/adding-configuring-users.md#adding-and-configuring-users).) 次に、業務カレンダーキー（文字列）を forms ワークフローの業務カレンダーにマップします。 ( 詳しくは、 [業務カレンダーへのユーザーおよびグループのマッピング](configuring-business-calendars.md#mapping-users-and-groups-to-a-business-calendar).)

   エンタープライズドメインを使用している場合、ユーザーに関する情報は、User Management データベースと同期する LDAP ディレクトリなど、サードパーティのストレージシステムに存在します。 これにより、業務カレンダーキーを LDAP ディレクトリ内のフィールドにマッピングできます。 たとえば、ディレクトリ内の各ユーザーレコードに「国」フィールドが含まれ、ユーザーの所在地に基づいて業務カレンダーを割り当てる場合は、ディレクトリのユーザー設定を指定する際に「国」フィールド名を「業務カレンダーキー」フィールドに指定します。 ( 詳しくは、 [ディレクトリの設定](/help/forms/using/admin-help/configuring-directories.md#configuring-directories).) その後、業務カレンダーキー（LDAP ディレクトリの「国」フィールドに対して定義された値）を forms ワークフローの業務カレンダーにマップできます。 ( 詳しくは、 [業務カレンダーへのユーザーおよびグループのマッピング](configuring-business-calendars.md#mapping-users-and-groups-to-a-business-calendar).)

1. Forms ワークフローで、同じ非稼働日を共有するユーザーの各セットに対してカレンダーを定義します。 ( 詳しくは、 [業務カレンダーの作成または更新](configuring-business-calendars.md#create-or-update-a-business-calendar).)
1. Forms ワークフローで、業務カレンダーキーまたはグループのメンバーシップを各カレンダーにマップします。 ( 詳しくは、 [業務カレンダーへのユーザーおよびグループのマッピング](configuring-business-calendars.md#mapping-users-and-groups-to-a-business-calendar).)
1. Workbench では、プロセス開発者は、リマインダー、デッドラインおよびエスカレーションに業務カレンダーを使用するかどうかを選択します。 ( 詳しくは、 [Workbench ヘルプ](https://www.adobe.com/go/learn_aemforms_workbench_63_jp).)

   プロセス開発者が業務カレンダーの使用を選択した場合、AEM forms は User Management 設定と管理コンソールで定義された業務カレンダーマッピングに基づいて適切な業務カレンダーを動的に選択します。マッピングが存在しない場合は、デフォルトのカレンダーを使用します。

   プロセス開発者が業務カレンダーを使用しない場合、イベントの日付計算では毎日が稼働日として扱われます。 例えば、タスクの期限は、タスクがユーザーに割り当てられてから 3 日後に発生するように設定されます。 タスクは木曜日に割り当てられます。 タスクの期限は、週末であるにもかかわらず、日曜日に発生します。

## 業務カレンダーの作成または更新 {#create-or-update-a-business-calendar}

組織に含まれるユーザーのセットが異なる非稼働日の場合は、複数の業務カレンダーを定義できます。 AEM forms で提供されるデフォルトの組み込みカレンダーを含む、既存のカレンダーを変更することもできます。

>[!NOTE]
>
>業務カレンダーを作成しない場合は、デフォルトのカレンダーが使用されます。

1. 管理コンソールで、サービス/Formsワークフロー/業務カレンダーをクリックします。
1. 新しい業務カレンダーを追加するには、![bus_cal_plus](assets/bus_cal_plus.png) をクリックします。テキスト *新しいカレンダー* がドロップダウンリストに表示されます。 テキストを選択し、カレンダーに別の名前を入力します。

   既存の業務カレンダーを編集するには、ドロップダウンリストから選択します。

1. 「デフォルトの非稼働日」で、週末など、任意の非稼働日を選択します。
1. [オプション] 「業務時間を使用する」を選択して、稼働日の開始および終了時刻を指定します。

   このオプションを選択すると、指定した時間範囲の前に発生したイベントが時間範囲の先頭に移動し、時間範囲の後に発生したイベントが次の営業日の開始時刻に移動します。

   例えば、ユーザーに火曜日の午前 2 時にタスクが割り当てられ、そのタスクのリマインダーが 2 営業日に設定されているとします。 営業時間がない場合、リマインダーは木曜日の午前 2 時に発生します。 営業時間が午前 8:00 ～午後 5:00 に設定されている場合、リマインダーは木曜日の午前 8:00 にプッシュされます。 業務時間がない場合、リマインダーイベントが火曜日の午後 6 時に作成された場合、リマインダーは木曜日の営業時間の後に発生します。 営業時間を午前 8:00 ～午後 5:00 に設定した場合、リマインダーは金曜日の午前 8:00 に発生します。

1. 左側のカレンダーで、休日など、他の非稼働日をダブルクリックします。 過去の日数は選択できません。 選択した非稼働日が右側のリストに表示され、日付が 1 行に 2 回表示されます。 左側の日付を選択して、非営業日の名前または説明を入力します。

   非稼働日をリストから削除するには、日付の横にある ![bus_cal_trash](assets/bus_cal_trash.png) をクリックします。

1. [オプション] このカレンダーをデフォルトのカレンダーにする場合は、「デフォルトのカレンダー」を選択します。デフォルトのカレンダーは、ユーザー関連のイベントに他のカレンダーマッピングが存在しない場合や、タイマーイベントまたは待機サービスに業務カレンダーが指定されていない場合に使用されます。 デフォルトのカレンダーは削除できません。
1. 非稼働日の定義が終了したら、[ カレンダーの有効化 ] を選択して有効にし、[ 保存 ] をクリックします。

   既存のカレンダーを更新する場合、新しいバージョンがすぐに有効になり、既に実行中のタスクを含め、すべての業務カレンダーの計算に使用されます。

   >[!NOTE]
   >
   >カレンダーを有効にしない場合は、デフォルトのカレンダーが使用されます。

## 業務カレンダーへのユーザーおよびグループのマッピング {#mapping-users-and-groups-to-a-business-calendar}

業務カレンダーをユーザーに関連付ける方法は 2 つあります。 業務カレンダーは、業務カレンダーキーに基づいて、またはユーザーが属するディレクトリグループに基づいて、ユーザーに割り当てることができます。 「マッピング」タブを使用して、AEM forms で使用する方法を指定し、業務カレンダーキーおよびグループを業務カレンダーにマッピングします。 業務カレンダーキーとユーザーの関連付けについて詳しくは、 [複数の業務カレンダーの設定](configuring-business-calendars.md#setting-up-multiple-business-calendars).

### 業務カレンダーキーに基づく業務カレンダーとユーザーの関連付け {#associate-business-calendars-with-users-based-on-business-calendar-keys}

1. 管理コンソールで、サービス/Forms ワークフロー/業務カレンダーをクリックし、「マッピング」タブをクリックします。
1. IntheSystem Will Use リストで、「User Manager Business Calendar Key Resolution」を選択します。
1. [ ユーザーマネージャの業務カレンダーキーを表示する ] を選択します。 リストが表示され、User Management で定義された一意の業務カレンダーキーのセットが含まれます。

   ローカルドメインおよびハイブリッドドメインの場合、リストには、User Management の「業務カレンダーキー」フィールドに入力された値が表示されます。 エンタープライズ (LDAP) ドメインの場合、LDAP ドメイン設定で設定された LDAP フィールド（「国」など）から返される一意のセットがリストに表示されます。

   User Management 管理者が業務カレンダーキーを定義していない場合、リストは空になります。

1. [UM 業務カレンダーキー ] リストの各項目に対して、[ カレンダー ] を選択します。
1. 「保存」をクリックします。

### ディレクトリサービスグループに基づいて業務カレンダーとユーザーおよびグループを関連付ける {#associate-business-calendars-with-users-and-groups-based-on-directory-service-groups}

1. 管理コンソールで、サービス/Forms ワークフロー/業務カレンダーをクリックし、「マッピング」タブをクリックします。
1. System Will Use リストで、「Groups Defined By The Directory Server」を選択します。
1. 「マッピング」タブで、「ディレクトリサービスグループの表示」を選択します。 リストが表示され、User Management で定義したグループが含まれます。 ( 詳しくは、 [ディレクトリ設定](/help/forms/using/admin-help/configuring-directories.md#directory-settings).)

   >[!NOTE]
   >
   >Workbench で、業務カレンダーを使用するように User サービスを設定し、サービスをグループに割り当てた場合、AEM forms は、ここで指定したグループマッピングを使用して、グループのカレンダーを解決します。 AEM forms では、業務カレンダーキーを使用してユーザーのカレンダーを解決する場合でも、常にグループマッピングを使用してグループのカレンダーを解決します。 グループマッピングが見つからない場合は、デフォルトの業務カレンダーが使用されます。

1. 「ディレクトリ・サービス・グループ」リストの各項目に対して、カレンダーを選択します。
1. 「保存」をクリックします。

## 業務カレンダーの書き出しと読み込み {#exporting-and-importing-business-calendars}

AEM forms では、業務カレンダーを XML ファイルとして書き出し、読み込むことができます。 この機能を使用して、カレンダーをステージングシステムから実稼動システムに移動できます。

>[!NOTE]
>
>この機能では、AEM forms で提供されるデフォルトの業務カレンダーを含む、定義済みのすべての業務カレンダーの書き出しと読み込みが行われます。 インポートした業務カレンダーは、既存のカレンダーと同じ名前で、既存のカレンダーを上書きします。

### 業務カレンダーの書き出し {#export-business-calendars}

1. 管理コンソールで、サービス/Forms ワークフロー/業務カレンダーをクリックします。
1. 「書き出し」をクリックし、XML ファイルを保存します。

### 業務カレンダーの読み込み {#import-business-calendars}

1. 管理コンソールで、サービス/Forms ワークフロー/業務カレンダーをクリックします。
1. 「読み込み」をクリックします。
1. 書き出した業務カレンダーを含む XML ファイルを選択し、「開く」をクリックします。

## 業務カレンダーの削除 {#delete-a-business-calendar}

組織で不要になった業務カレンダーを削除できます。 ユーザーとグループにマッピングされた業務カレンダーを削除した場合は、デフォルトのカレンダーが使用されます。

1. 管理コンソールで、サービス/Formsワークフロー/業務カレンダーをクリックします。
1. カレンダーを選択します。
1. 「削除」をクリックします。
