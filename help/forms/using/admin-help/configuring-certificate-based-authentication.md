---
title: 証明書ベースの認証の設定
description: 認証局（CA）証明書をトラストストアに読み込みし、証明書ベースの認証用の証明書マッピングを作成します。
contentOwner: admin
content-type: reference
geptopics: SG_AEMFORMS/categories/configuring_user_management
products: SG_EXPERIENCEMANAGER/6.5/FORMS
exl-id: 9cbea8c8-4d42-446b-b98d-c090709624d7
solution: Experience Manager, Experience Manager Forms
role: User, Developer
source-git-commit: f6771bd1338a4e27a48c3efd39efe18e57cb98f9
workflow-type: ht
source-wordcount: '718'
ht-degree: 100%

---

# 証明書ベースの認証の設定 {#configuring-certificate-based-authentication}

User Management は通常、ユーザー名とパスワードを使用して認証を実行します。User Management は、証明書ベースの認証もサポートしています。これを使用して、Acrobat を介してユーザーを認証したり、プログラムでユーザーを認証したりできます。プログラムによるユーザー認証について詳しくは、[AEM Forms を使用したプログラミング](https://www.adobe.com/go/learn_aemforms_programming_63_jp)を参照してください。

証明書ベースの認証を使用するには、信頼する認証局（CA）証明書をトラストストアに読み込み、証明書マッピングを作成します。

## CA 証明書をインポートする {#import-the-ca-certificate}

証明書を読み込むときに、「証明書認証のための信頼」オプションと「ID のための信頼」オプション、および必要なその他のオプションを選択します。証明書の読み込みについて詳しくは、[証明書の管理](/help/forms/using/admin-help/certificates.md#managing-certificates)を参照してください。

## 証明書マッピングの構成 {#configuring-certificate-mapping}

ユーザーの証明書ベースの認証を有効にするには、証明書マッピングを作成します。*証明書のマッピング*&#x200B;は、証明書の属性とドメイン内のユーザーの属性の間のマップを定義します。複数の証明書を同じドメインにマッピングできます。

証明書をテストする場合、User Management は証明書チェックをアップロードして、証明書が次の要件を満たしていることを確認します。

* 証明書が有効なこと。
* 指定した発行者は証明書を検証できます。
* 証明書にはマッピングに必要な属性が含まれています。
* 指定したマッピングにより、証明書は AEM Forms データベース内の 1 人のユーザーのみにマッピングされます。現在のユーザーと古い（削除された）ユーザーの両方がチェックされ、マッピング基準に一致するかどうかが判断されます。したがって、廃止されたユーザーを含む複数のユーザーが対象の属性値を持っている場合、証明書テストは失敗します。

>[!NOTE]
>
>既存の証明書マッピングは編集できません。

**証明書マッピングを追加**

1. 管理コンソールで、設定／User Management／設定／システム属性の詳細設定をクリックしてください。
1. 「新しい証明書マッピング」をクリックし、「発行者向け」リストで、トラストストア管理で構成された証明書のエイリアスを選択します。
1. 証明書の属性の 1 つをユーザーの属性にマップします。例えば、証明書の共通名をユーザーのログイン ID にマップできます。

   証明書の属性の内容がユーザー管理データベースのユーザーの属性の内容と異なる場合は、Java 正規表現 (regex) を使用して 2 つの属性を照合できます。例えば、証明書の共通名が *Alex Pink (Authentication)* および *Alex Pink (Signing)* のような名前で、User Management データベース内の共通名が *Alex Pink* の場合、正規表現を使用して証明書属性の必要な部分を抽出します（この例では、*Alex Pink*）。指定する正規表現は、Java 正規表現仕様に準拠している必要があります。

   「カスタム順序」ボックスでグループの順序を指定することにより、式を変換できます。カスタムオーダーは、`java.util.regex.Matcher.replaceAll()` メソッドで使用します。表示される動作はそのメソッドの動作に対応しており、それに応じて入力文字列（カスタム順序）を指定する必要があります。

   正規表現をテストするには、「テストパラメーター」ボックスに値を入力し、「テスト」をクリックします。

   正規表現では次の文字を使用できます。

   * 。（任意の文字）
   * &amp;ast;（0 回または何回かの出現）
   * ()（括弧内にグループを指定）
   * \（正規表現文字を通常の文字にエスケープするために使用）
   * $n（n 番目のグループを参照するために使用）

   正規表現の例：

   * 「Alex Pink (Authentication)」から「Alex Pink」を抽出するには

     **正規表現：** (.&amp;ast;) \(認証\)

   * 「Alex（認証）Pink」から「Alex Pink」を抽出するには

     **正規表現：** (.&amp;ast;)\(認証\) (.&amp;ast;)

   * 「Alex (Authentication) Pink」から「Pink Alex」を抽出するには

     **正規表現：** (.&amp;ast;)\(認証\) (.&amp;ast;)

     カスタム順序：$2 $1（空白文字でキャプチャされた、最初のグループに連結された 2 番目のグループを返します）

   * 「smtp:apink@sampleorg.com」から「apink@sampleorg.com」を抽出するには

     **Regex:** smtp:(.&amp;ast;)

   正規表現の使用について詳しくは、[正規表現に関する Java チュートリアル](https://java.sun.com/docs/books/tutorial/essential/regex/)を参照してください。

1. ドメインリストで、ユーザーのドメインを選択します。
1. この構成をテストするには、「参照」をクリックしてサンプルのユーザー証明書をアップロードし、「証明書のテスト」をクリックし、構成が正しい場合は「OK」をクリックします。

**既存の証明書マッピングを編集する**

1. 管理コンソールで、設定／User Management／構成をクリックします。
1. 「証明書のマッピング」をクリックします。
1. 編集する証明書マッピングを選択し、その構成を編集します。正規表現とカスタム順序を更新できます。
1. 変更をテストするには、「参照」をクリックしてサンプル証明書をアップロードし、「証明書をテスト」をクリックして、「OK」をクリックします。

**証明書マッピングを削除**

1. 管理コンソールで、設定／User Management／設定／システム属性の詳細設定をクリックしてください。
1. 削除する証明書のマッピングのチェックボックスをオンにして「削除」をクリックし、「OK」をクリックします。
