---
title: AEM Forms のアセットとドキュメントの移行
description: 移行ユーティリティを使用すると、Adobe Experience Manager（AEM）Forms のアセットとドキュメントを AEM 6.3 Forms またはそれ以前のバージョンから AEM 6.4 Forms に移行できます。
content-type: reference
topic-tags: correspondence-management, installing
geptopics: SG_AEMFORMS/categories/jee
products: SG_EXPERIENCEMANAGER/6.5/FORMS
content-strategy: max-2018
docset: aem65
role: Admin
exl-id: 0f9aab7d-8e41-449a-804b-7e1bfa90befd
solution: Experience Manager, Experience Manager Forms
source-git-commit: 76fffb11c56dbf7ebee9f6805ae0799cd32985fe
workflow-type: tm+mt
source-wordcount: '1736'
ht-degree: 100%

---

# AEM Forms のアセットとドキュメントの移行 {#migrate-aem-forms-assets-and-documents}

移行ユーティリティを実行すると、[アダプティブフォームのアセット](../../forms/using/introduction-forms-authoring.md)、[クラウドの設定](/help/sites-developing/extending-cloud-config.md)、[Correspondence Management のアセット](/help/forms/using/cm-overview.md)が、旧バージョンの AEM Forms で使用されていた形式から、AEM 6.5 Forms で使用される形式に変換されます。移行ユーティリティを実行すると、以下の項目が移行されます。

* アダプティブフォームのカスタムコンポーネント
* アダプティブフォームと Correspondence Management テンプレート
* クラウドの設定情報
* Correspondence Management とアダプティブフォームのアセット

>[!NOTE]
>
>アウトオブプレースアップグレードの場合（Correspondence Management アセットを移行する場合）は、アセットを読み込むたびに移行を実行できます。Correspondence Management を移行するには、Forms 互換性パッケージがインストールされている必要があります。

## 移行のアプローチ {#approach-to-migration}

AEM Forms 6.4、6.3 または 6.2 を最新バージョンである AEM Forms 6.5 に[アップグレード](../../forms/using/upgrade.md)することも、新規インストールを実行することもできます。以前のインストールをアップグレードしたか、新規インストールを実行したかに応じて、次のいずれかを実行する必要があります。

**インプレースアップグレードの場合**

インプレースアップグレードを実行した場合、アップグレードされたインスタンスには既にアセットとドキュメントが含まれています。ただし、アセットやドキュメントを使用する前に、[AEMFD 互換性パッケージ](https://experienceleague.adobe.com/docs/experience-manager-release-information/aem-release-updates/forms-updates/aem-forms-releases.html?lang=ja)（Correspondence Management 互換性パッケージを含む）をインストールする必要があります。

その後、[移行ユーティリティを実行](#runningmigrationutility)して、アセットとドキュメントを更新する必要があります。

**アウトオブプレースインストールの場合**

アウトオブプレース（新規）インストールを実行した場合は、アセットやドキュメントを使用する前に、[AEMFD 互換性パッケージ](https://experienceleague.adobe.com/docs/experience-manager-release-information/aem-release-updates/forms-updates/aem-forms-releases.html?lang=ja)（Correspondence Management 互換性パッケージを含む）をインストールする必要があります。

その後、アセットパッケージ（zip ファイルまたは cmp ファイル）を新しい設定環境に読み込み、[移行ユーティリティを実行](#runningmigrationutility)してアセットとドキュメントを更新する必要があります。アドビでは、移行ユーティリティを実行した後にのみ、新しい設定で新しいアセットを作成することを推奨しています。

[後方互換性に関する要件](/help/sites-deploying/backward-compatibility.md)の変更に伴い、CRX リポジトリ内のいくつかのフォルダーの場所が変更されています。以前の設定環境の依存関係（カスタムライブラリとカスタムアセット）を手動で書き出して、新しい環境に手動で読み込みます。

## 移行を進める前に {#prerequisites}

Correspondence Management のアセットを移行する場合は、以下の点に注意してください。

* 旧バージョンのプラットフォームからインポートしたアセットの場合、「**fd:version=1.0**」というプロパティが追加されます。
* AEM 6.1 Forms 以降、コメントは初期状態では使用できません。以前に追加されたコメントはアセット内で使用できますが、インターフェイスには自動で表示されません。コメントを表示させるには、AEM Forms のユーザーインターフェイスで extendedProperties プロパティをカスタマイズします。
* LiveCycle ES4 などの以前のバージョンの一部では、テキストの編集に Flex RichTextEditor を使用していましたが、AEM 6.1 Forms 以降では HTML エディターを使用します。このレンダリングとフォントの外観、フォントサイズ、フォントマージンは、作成者ユーザーインターフェイスの以前のバージョンとは異なる場合があります。ただし、レンダリング時のレターは同じように表示されます。
* テキストモジュール内のリストが改善され、別の方法でレンダリングされるようになりました。視覚的な違いが生じる場合があります。アドビでは、テキストモジュールでリストを使用している場所のレターをレンダリングして確認することをお勧めします。
* 移行中に画像コンテンツモジュールが DAM アセットおよびレイアウトに変換され、フラグメントがフォームに追加されるため、これらのモジュールの更新者プロパティは管理者に変更されます。
* アセットのバージョン履歴は移行されず、移行後は使用できません。移行後のバージョン履歴は保持されます。
* AEM 6.1 Forms 以降では、「発行準備完了」の状態は廃止されました。このため、「発行準備完了」の状態にあったすべてのアセットは、変更済みの状態に変更されます。
* AEM Forms 6.3 ではユーザーインターフェイスが更新されているため、カスタマイズを実行する手順も異なります。6.3 以前のバージョンから移行する場合は、カスタマイズをやり直します。
* レイアウトフラグメントは `/content/apps/cm/layouts/fragmentlayouts/1001` から `/content/apps/cm/modules/fragmentlayouts` へ移動します。アセットのデータディクショナリ参照では、データディクショナリの名前ではなくパスが表示されます。
* テキストモジュールの調整にタブスペースを使用した場合は、再調整する必要があります。詳しくは、[Correspondence Management - タブスペースを使用したテキスト調整](https://helpx.adobe.com/jp/aem-forms/kb/cm-tab-spacing-limitations.html)を参照してください。
* Asset Composer の設定は、Correspondence Management 設定に変更されました。
* アセットは、「Existing Text」や「Existing List」などの名前のフォルダーに移動されます。

## 移行ユーティリティの使用 {#using-the-migration-utility}

### 移行ユーティリティの実行 {#runningmigrationutility}

アセットの変更および作成を実行する前に、移行ユーティリティを実行します。アドビでは、アセットを変更または作成した後で、ユーティリティを実行しないことをお勧めします。移行プロセスの実行中は、Correspondence Management アセットまたはアダプティブフォームアセットのユーザーインターフェイスが開いていないことを確認してください。

移行ユーティリティをはじめて実行する場合、`\[aem-installation-directory]\cq-quickstart\logs\aem-forms-migration.log` というパスと名前でログが作成されます。それ以降は、Correspondence Management とアダプティブフォームの移行に関する情報（アセットの移行に関する情報など）がこのログファイルに記録されます。

>[!NOTE]
>
>移行ユーティリティを実行する前に、必ず CRX リポジトリのバックアップを作成してください。

1. ブラウザーセッションで、AEM オーサーインスタンスに管理者としてログインします。

1. ブラウザーで次の URL を開きます。

   https://[*hostname*]:[*port*]/[*context_path*]/libs/fd/foundation/gui/content/migration.html

   ブラウザーに、以下に示す 4 つのオプションが表示されます。

   * AEM Forms アセットの移行
   * アダプティブフォームカスタムコンポーネントの移行
   * アダプティブフォームテンプレートの移行
   * AEM Forms クラウド設定の移行

1. 移行するには、次の手順を実行します。

   * **アセット**&#x200B;を移行する場合は、「AEM Forms アセットの移行」を選択し、次の画面で「**移行を開始**」を選択します。次のものが移行されます。

      * アダプティブフォーム
      * ドキュメントフラグメント
      * テーマ
      * レター
      * データディクショナリ

   >[!NOTE]
   >
   >アセットの移行中、「競合が見つかりました」のような警告メッセージが表示される場合があります。このようなメッセージは、アダプティブフォームのコンポーネントのいくつかのルールを移行できなかったことを示します。例えば、コンポーネントにルールとスクリプトの両方がある場合、スクリプトの後にルールが発生した場合はそのコンポーネントのルールは移行されません。アダプティブフォームのオーサリングで[ルールエディターを開いて、このようなルールを移行](#migrate-rules)できます。

   * アダプティブフォームのカスタムコンポーネントを移行する場合は、「**アダプティブフォームカスタムコンポーネントの移行**」を選択し、カスタムコンポーネントの移行ページで「**移行を開始**」を選択します。次のものが移行されます。

      * アダプティブフォーム用に作成されたカスタムコンポーネント
      * コンポーネントオーバーレイ（存在する場合）。

   * アダプティブフォームのテンプレートを移行する場合は、「**アダプティブフォームテンプレートの移行**」を選択し、カスタムコンポーネントの移行ページで「**移行を開始**」を選択します。次のものが移行されます。

      * AEM テンプレートエディターを使用して `/apps` フォルダーまたは `/conf` フォルダー内に作成されたアダプティブフォームテンプレート。

   * 新しいコンテキスト認識クラウドサービスパラダイムを使用するには、AEM Forms クラウド設定サービスを移行する必要があります。このメカニズムには、タッチ操作対応 UI が用意されています（`/conf` に保管されています）。AEM Forms クラウド設定サービスを移行すると、`/etc` 内のクラウドサービスが `/conf` に移動します。移行前のパス（`/etc`）に依存するクラウドサービスがカスタマイズされていない場合は、バージョン 6.5 にアップグレードした後ですぐに移行ユーティリティを実行し、クラウド設定のタッチ操作対応 UI を使用して作業を行うことをお勧めします。既存のクラウドサービスがカスタマイズされている場合は、移行後のパス（`/conf`）に合わせてカスタマイズ内容を更新するまでは、アップグレード後のセットアップ環境で既存の UI を使用してください。カスタマイズ内容の更新が完了したら、移行ユーティリティを実行してください。

   以下を含む **AEM Forms クラウドサービス**&#x200B;を移行するには、「AEM Forms クラウド設定の移行」を選択します（クラウド設定の移行は AEMFD 互換性パッケージとは独立して実行されます）。次に「AEM Forms クラウド設定の移行」をもう一度選択して、設定の移行ページで「**移行を開始**」を選択します。

   * フォームデータモデルのクラウドサービス

      * ソースパス：`/etc/cloudservices/fdm`
      * ターゲットパス：`/conf/global/settings/cloudconfigs/fdm`

   * reCAPTCHA

      * ソースパス：`/etc/cloudservices/recaptcha`
      * ターゲットパス：`/conf/global/settings/cloudconfigs/recaptcha`

   * Adobe Sign

      * ソースパス：`/etc/cloudservices/echosign`
      * ターゲットパス：`/conf/global/settings/cloudconfigs/echosign`

   * Typekit クラウドサービス

      * ソースパス：`/etc/cloudservices/typekit`
      * ターゲットパス：`/conf/global/settings/cloudconfigs/typekit`

   移行プロセスの実行時は、ブラウザーウィンドウに以下が表示されます。

   * アセットを更新したとき：アセットは正しく更新されました。
   * 移行が完了したとき：アセットの移行が完了しました。

   移行ユーティリティを実行すると、以下の操作が実行されます。

   * **タグをアセットに追加**：タグ「Correspondence Management：移行済みアセット」または「アダプティブフォーム：移行済みアセット」を移行済みのアセットに追加します。これにより、ユーザーは移行済みアセットを識別できます。移行ユーティリティを実行するときは、システム内の既存のアセットはすべて移行済みとしてマークされます。
   * **タグを生成**：以前のシステムに存在するカテゴリおよびサブカテゴリはタグとして作成され、これらのタグは AEM 内で関連する Correspondence Management アセットに関連付けられます。例えば、レターテンプレートのカテゴリ（「要求」）とサブカテゴリ（「要求」）は、タグとして生成されます。

1. 移行ユーティリティが実行を終了した後、[ハウスキーピングタスク](#housekeepingtasks)に進みます。

#### ルールエディターを使用したルールの移行 {#migrate-rules}

これらのコンポーネントは、アダプティブフォームのルールエディターで開くことで移行できます。

* カスタムコンポーネントのルールとスクリプトを移行する場合は、「アダプティブフォームカスタムコンポーネントの移行」を選択し、次の画面で「移行を開始」を選択します（バージョン 6.3 をアップグレードする場合は、この移行手順を実行する必要はありません）。次のものが移行されます。

   * ルールエディターで作成されたルールとスクリプト（6.1 FP1 以降）

   * 6.1 以前の UI の「スクリプト」タブで作成されたスクリプト

* テンプレートを移行する場合は、「アダプティブフォームテンプレートの移行」を選択し、次の画面で「移行を開始」を選択します（バージョン 6.3 および 6.4 をアップグレードする場合は、この移行手順を実行する必要はありません）。次のものが移行されます。

   * 古いテンプレート - AEM 6.1 Forms 以前を使用して /apps に作成されたアダプティブフォームテンプレート。これには、テンプレートコンポーネントに定義されたスクリプトも含まれます。

   * 新しいテンプレート - テンプレートエディターを使用して `/conf` に作成されたアダプティブフォームテンプレート。これには、ルールエディターで作成されたルールとスクリプトが含まれます。

### 移行ユーティリティ実行後のハウスキーピングタスク {#housekeepingtasks}

移行ユーティリティを実行した後、次のハウスキーピングタスクを行います。

1. レイアウトおよびフラグメントレイアウトの XFA バージョンが 3.3 以降であることを確認してください。旧バージョンのレイアウトおよびフラグメントレイアウトを使用している場合、レターのレンダリングで問題が発生する可能性があります。旧バージョンの XFA を最新バージョンの XFA に更新するには、以下の手順を行います。

   1. Forms ユーザーインターフェイスから [XFA を zip ファイルとしてダウンロード](../../forms/using/import-export-forms-templates.md#p-import-and-export-assets-in-correspondence-management-p)します。
   1.  ファイルを解凍します。
   1. 最新の Designer で XFA ファイルを開き、保存します。XFA が最新バージョンに更新されます。
   1. XFA を Forms ユーザーインターフェイスでアップロードします。

1. 移行前に以前のシステムで発行されたすべてのアセットを公開します。移行ユーティリティは、オーサーインスタンスでのみアセットを更新して、アセットを公開する必要のあるパブリッシュインスタンスでアセットを更新します。

1. AEM Forms 6.4 および 6.5 では、フォームユーザーグループの権限が一部変更されています。ユーザーが XDP やスクリプトを含むアダプティブフォームをアップロードしたりコードエディターを使用したりできるようにするには、そのユーザーを forms-power-users グループに追加する必要があります。同様に、template-authors グループのユーザーは、ルールエディターのコードエディターを使用できなくなります。ユーザーがコードエディターを使用できるようにするには、そのユーザーを af-template-script-writers グループに追加します。ユーザーをグループに追加する方法については、[ユーザーとユーザーグループの管理](/help/communities/users.md)を参照してください。
