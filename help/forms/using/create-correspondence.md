---
title: 通信を作成
description: 作成したレターテンプレートは、データ、コンテンツおよび添付ファイルを管理することにより、AEM Forms で通信を作成する際に使用することができます。
products: SG_EXPERIENCEMANAGER/6.5/FORMS
topic-tags: correspondence-management
docset: aem65
feature: Correspondence Management
exl-id: da966787-a3b9-420f-8b7c-f00d05c61d43
solution: Experience Manager, Experience Manager Forms
role: Admin, User, Developer
source-git-commit: f6771bd1338a4e27a48c3efd39efe18e57cb98f9
workflow-type: tm+mt
source-wordcount: '3832'
ht-degree: 100%

---

# 通信を作成{#create-correspondence}

## 通信を作成ユーザーインターフェイスでの通信の作成 {#create-correspondence-in-the-create-correspondence-user-interface}

[Correspondence Management](../../forms/using/create-letter.md) でレターテンプレートが作成されたら、エンドユーザー／エージェント／要求処理担当者は、レターを通信作成用ユーザーインターフェイスで開き、データを入力してコンテンツを設定し、添付ファイルを管理することによって、通信を作成できます。最終的に、要求処理担当者またはエージェントはプレビューモードでコンテンツを管理し、レターを送信します。

### 通信のプレビュー {#preview-a-correspondence}

プレビューするレターを次の手順で選択します。

1. レターページで、「**選択**」を選択します。
1. 必要なレターをタップして選択します。

   ![レターを選択](assets/1_selectletter.png)

   レターを選択

1. データディクショナリベースのレターでは、**プレビュー**／**プレビュー**&#x200B;を選択します。データディクショナリベース以外のレターでは、「**プレビュー**」を選択します。また、レターにポインターを合わせ（選択せずに）、レターのプレビューアイコンを選択してプレビューできます。

   >[!NOTE]
   >
   >データディクショナリがレターに関連付けられていない場合は、レターのプレビューが開きます。または、レターがデータディクショナリベースの場合、Correspondence Management には、プレビューメニューにプレビューとカスタムオプションが表示され、2 つのいずれかのオプションを選択することができます。テストデータをデータディクショナリに関連付けることもできます。[テストデータがデータディクショナリに関連付けられている](../../forms/using/data-dictionary.md#p-working-with-test-data-p)場合は、「プレビュー」オプションを選択すると、テストデータが自動入力された状態で通常のプレビューが開きます。

1. プレビュー中に通信をレンダリングできるようにするには、管理者であるか次のグループのいずれかのメンバーである必要があります。

   * forms-users（オーサーインスタンスをプレビューする場合）
   * cm-agent-users（発行インスタンスをレンディションする場合）

   必要なアクセス権を持っていない場合は、管理者に適切なアクセス権を要求します。ユーザーの作成またはグループへの追加についての詳細は、[グループへのユーザーまたはグループの追加](/help/sites-administering/security.md)を参照してください。適切な権限を持たずに通信をレンダリングしようとすると、404 エラーページが表示されます。

1. **プレビュー**／**カスタム**&#x200B;を選択した場合は、ダイアログが開きます。ダイアログで、データディクショナリに対応するデータファイルを選択し、レターをプレビューしてから、「**プレビュー**」を選択します。特定のレターのデータディクショナリに基づいてデータファイルが作成されます。データファイルについて詳しくは、[データディクショナリ](../../forms/using/data-dictionary.md#p-working-with-test-data-p)を参照してください。

   ![レターをプレビュー](assets/8_previewcustomdatafile.png)

1. デフォルトでは、使用中の「データ」タブでレターの HTML プレビュー（モバイルフォームプレビュー）が開きます。

   モバイルフォームとサポートされる機能について詳しくは、[モバイルフォームと PDF フォームの違い](https://helpx.adobe.com/jp/livecycle/help/mobile-forms/feature-differentiation-mobile-forms-pdf.html)を参照してください。

   3 つのタブ（データ、コンテンツ、添付ファイル）があります。データ要素（プレースホルダー変数およびレイアウトフィールド）がない場合、レターは直接開き、「コンテンツ」タブが表示されます。「添付ファイル」タブは、添付ファイルが存在するかライブラリアクセスが有効な場合にのみ使用できます。

   >[!NOTE]
   >
   >レタープレビューの HTML または PDF レンディションモードの切り替えについて詳しくは、[レターのレンディションモードの切り替え](#changerenditionmode)を参照してください。Correspondence Management と AEM での PDF サポートについて詳しくは、[NPAPI ブラウザープラグインのサポート終了とその影響](https://helpx.adobe.com/jp/acrobat/kb/change-in-support-for-acrobat-and-reader-plug-ins-in-modern-web-.html)を参照してください。<!-- and [PDF Forms to HTML5 Forms](https://helpx.adobe.com/aem-forms/kb/pdf-forms-to-html5-forms.html). THIS URL IS A 404 AND NO SUITABLE REPLACEMENT TOPIC WAS FOUND. CONSIDER DELETING OR ADDING NEW LINK. COMMENTING OUT SO USERS DON'T CLICK IT. -->

### データの入力 {#enterdata}

「データ」タブで、使用可能なレイアウトフィールドとプレースホルダーを入力します。

1. 必要に応じて、フィールドにデータやコンテンツ変数を入力します。アスタリスク（&#42;）の付いた必須フィールドをすべて入力し、「**送信**」ボタンを有効にします。

   HTML レタープレビューのデータフィールド値を選択して、対応するデータフィールドを「データ」タブにハイライト表示します。

   ![レター内にデータを入力](assets/2_enterdata.png) ![2_1_enterdata](assets/2_1_enterdata.png)

### コンテンツを管理 {#managecontent}

「コンテンツ」タブで、レター内のドキュメントフラグメントやコンテンツ変数などのコンテンツを管理します。

1. 「**コンテンツ**」を選択します。Correspondence Management は、レターの「コンテンツ」タブを表示します。

   ![「コンテンツ」タブ - コンテンツ内のモジュールをハイライト](assets/3_content.png)

1. 「コンテンツ」タブで、コンテンツモジュールを必要に応じて編集します。コンテンツ階層内の関連するコンテンツモジュールにフォーカスするには、関連する行または段落をレタープレビューで選択するか、コンテンツモジュールをコンテンツ階層で直接選択します。

   例えば、下の図では、「We have reviewed...」という行を選択した結果、関連するコンテンツモジュールが「コンテンツ」タブで選択されています。

   ![4_highlightmoduleincontent](assets/4_highlightmoduleincontent.png)

   「コンテンツ」タブまたは「データ」タブで、HTML レタープレビューの左上にある選択されたモジュールをハイライト表示（![highlightselectedmodulesincontentccr](assets/highlightselectedmodulesincontentccr.png)）をタップすると、レタープレビューで関連するテキスト、段落、またはデータフィールドが選択されたときにコンテンツまたはデータモジュールに移動する機能を有効または無効にすることができます。

   通信を作成ユーザーインターフェイスのさまざまなモジュールで使用できるアクションについて詳しくは、[通信を作成ユーザーインターフェイスで使用できるアクションと情報](#actions-and-info-available-in-the-create-correspondence-content-tab)を参照してください。

1. コンテンツモジュールの場所を特定するには、「検索」フィールドを使用します。コンテンツモジュールの名前やタイトルの一部または全部を入力して、通信内でコンテンツモジュールを検索します。
1. リスト、テキスト、条件またはターゲット領域の前にある表示アイコン（![表示](assets/display.png)）を選択すると、レター内でそれを表示または非表示にできます。
1. インラインまたは編集可能なテキストモジュールを編集するには、関連する&#x200B;**編集**&#x200B;アイコン（![edittextmodule](assets/edittextmodule.png)）を選択するか、レターのプレビューで関連するテキストモジュールをダブルクリックします。

   テキストを編集および書式設定するためのテキストエディターが表示されます。

   ブラウザーのデフォルトのスペルチェッカーは、テキストエディターでスペルチェックを行います。スペルチェックや文法チェックを管理するには、ブラウザーのスペルチェッカー設定を編集するか、またはスペルチェックや文法チェックを行うためのブラウザプラグインやアドオンをインストールします。

   また、テキストエディターでは、様々なキーボードショートカットを使用して、テキストの管理、編集や書式設定を行うこともできます。Correspondence Management のキーボードショートカットについて詳しくは、[テキストエディター](/help/forms/using/keyboard-shortcuts.md#correspondence-management)を参照してください。

   ![5_edittextmodule](assets/5_edittextmodule.png)

   別のアプリケーションから複数の段落のテキストを再利用することもできます。MS Word や HTML ページまたは他の任意のアプリケーションからテキストを直接コピーしてペーストすることができます。

   編集可能なテキストモジュールでは、1 つ以上のテキスト段落をコピーして貼り付けることができます。例えば、次のような許容可能な居住証明書の箇条書きリストを含む MS Word ドキュメントがあるとします。

   ![pastetextmsword](assets/pastetextmsword.png)

   MS Word ドキュメントから編集可能なテキストモジュールに、テキストを直接コピーして貼り付けることができます。箇条書きリスト、フォント、テキストの色などの書式は、テキストモジュールでも保持されます。

   ![pasttexteditablemodule](assets/pastetexteditablemodule.png)

   >[!NOTE]
   >
   >ただし、貼り付けられたテキストの書式設定にはいくつかの[制約](https://helpx.adobe.com/jp/aem-forms/kb/cm-copy-paste-text-limitations.html)があります。

   Tab キーを使用すると、レターのテキストや数値をインデントすることができます。例えば、Tab キーを使用して、リスト内の複数のテキスト列を表形式に整列させることができます。

   ![tabspaces](assets/tabspaces.png)

   例：Tab キーを使用して複数のテキスト列を表形式に整列させる

   >[!NOTE]
   >
   >テキストモジュールやレターのタブスペースの設定について詳しくは、[タブスペースを使用したテキスト調整の詳細](https://helpx.adobe.com/jp/aem-forms/kb/cm-tab-spacing-limitations.html)を参照してください。

1. 必要に応じて、通信に特殊文字を挿入します。例えば、特殊文字パレットを使用して、以下の特殊文字を挿入することができます。

   * 通貨記号（€、￥、£ など）
   * 数学記号（∑、√、∂、^ など）
   * 句読記号（‟、” など）

   ![specialcharacters](assets/specialcharacters.png)

   Correspondence Managementhas では、210 種類の特殊文字に初期状態から対応しています。管理者は、[カスタマイズすることで特殊文字を増やしたり、カスタムの特殊文字を追加したりする](../../forms/using/custom-special-characters.md)ことができます。

1. 編集可能なインラインモジュールのテキストの一部をハイライト表示または強調するには、テキストを選択して「ハイライトの色」を選択します。

   ![letterbackgroundcolor](assets/letterbackgroundcolor.png)

   基本カラーパレットの基本カラー `**[A]**` を直接選択するか、スライダー `**[B]**` を使用して「**選択**」を選択し、そのカラーの適切なシェードを選択できます。

   オプションとして、「詳細」タブに移動して、適切な色相、明度および彩度 `**[C]**` を選択して正確なカラーを作成し、次に「`**[D]**` を選択」を選択して、テキストをハイライト表示するカラーを適用できます。

   ![textbackgroundcolor](assets/textbackgroundcolor.png)

1. コンテンツや形式の変更を適宜行い、「**保存**」を選択します。![editnextmoduleccr](assets/editnextmoduleccr.png) を選択して編集可能なテキストモジュール間を移動するか、「**保存して次へ**」を選択して変更を保存して次の編集可能なテキストモジュールに移動します。
1. また、ブランチごとに未入力の変数も表示されます。未入力の変数がない場合、未入力の変数は 0 として表示されます。未入力の変数がある場合は、ブランチを選択して展開し、未入力の変数を探します。コンテンツツールバーを使用してコンテンツを削除したり、コンテンツのインデントを増減したり、コンテンツの前後に改ページを挿入したりします。

   データモジュールがリストや条件の一部に含まれていても、データモジュールの前後に改ページを挿入できます。

1. 「コンテンツ変数を開く／閉じる」（![opencontentvariables](assets/opencontentvariables.png)）を選択して、コンテンツ変数を開き、適切に入力します。
1. 未入力変数に正しく入力すると、未入力変数のカウントが 0 に設定されます。

   通信を作成ユーザーインターフェイスでは、少なくとも 1 つの変数を含むモジュールの階層の各レベルに、未入力変数カウントが表示されます。モジュールに未入力変数が含まれている場合は、変数、モジュール、ターゲット領域およびレターテンプレートレベルでカウントが表示されます。

   未入力変数カウントには、次のものが含まれます。

   * 保護されていないデータディクショナリ変数とプレースホルダー変数のみ。変数カウントには、レイアウト変数や保護されているデータディクショナリ変数は含まれません。
   * 必須フィールド。
   * 必須かつユーザーにバインドされている場合はレイアウトフィールド。
   * 一意の変数インスタンスのみ。モジュール、ターゲット領域またはレターテンプレートに、同じ変数の 2 つ以上のインスタンスが含まれている場合、カウントは 1 と表示されます。ただし、インスタンスごとに、カウントが 1 と表示されます。

   未入力変数カウントには、未選択のモジュールは含まれません。モジュールがレターテンプレートには含まれているがレターには含まれていない場合、このモジュール内の未入力変数のカウントは表示されません。

   ターゲット領域、モジュールおよび変数の場合、カウントは、レターテンプレート内の各オブジェクトの右に表示されます。ただし、完全なテンプレートの場合は、カウントは通信の作成のステータスバーに表示されます。

   レターテンプレート内のモジュールは、未入力変数カウントを以下のように表示します。

   * **テキスト** テキストモジュールに含まれている一意の未入力プレースホルダー変数とデータディクショナリ要素の合計を表示します。
   * **条件** 条件内に含まれている一意の未入力条件変数と、結果として得られたモジュール内に含まれている条件と変数の合計を表示します。
   * **リスト** リストに割り当てられたモジュール内に含まれている一意の未入力変数の合計をすべて表示します。
   * **ターゲット領域** ターゲット領域に割り当てられたモジュール内に含まれている一意の未入力変数の合計をすべて表示します。

   デフォルト値を持つ変数について次のことに留意してください。

   * ブール変数フィールドはデフォルトで *false* に設定されます。ただし、この変数は未入力として解釈されます。これは、*false* の値を持つすべてのブール変数フィールドが変数カウントに含まれることを意味します。

   * 数値変数フィールドはデフォルトで *0* に設定されます。ただし、この変数は未入力として解釈されます。これは、*0* の値を持つすべての数値変数フィールドが変数カウントに含まれることを意味します。

#### 通信を作成ユーザーインターフェイスの「コンテンツ」タブで使用できるアクションと情報 {#actions-and-info-available-in-the-create-correspondence-content-tab}

**ターゲット領域**

* 空白行を挿入：空白行を新たに挿入します。
* インラインテキストを挿入：新しいテキストモジュールを挿入します。
* 順序ロック（情報）：コンテンツの順序を変更できないことを示します。
* 未入力値（情報）：ターゲット領域の未入力変数の個数を示します。

**モジュール**

* 選択（目のアイコン）：レターにモジュールを含めたり除外したりします。
* 箇条書きをスキップ（リストモジュールとその子モジュールに適用可能）：特定のモジュール内の箇条書きをスキップします。
* 直後に改ページ（ターゲット領域の子モジュールに適用可能）：モジュールの前に改ページを挿入します。
* 直後に改ページ（ターゲット領域の子モジュールに適用可能）：モジュールの前に改ページを挿入します。
* 未入力値（情報）：ターゲット領域の未入力変数の個数を示します。
* 編集（テキストモジュールのみ）：テキストモジュールを編集するためにリッチテキストエディターを開きます。
* データパネル（テキストモジュールと条件モジュール）：モジュールのすべての変数を開きます。

**リストモジュール**

* 空白行を挿入：空白行を新たに挿入します。
* コンテンツライブラリ：コンテンツライブラリを開いて、リストにモジュールを追加します。
* リスト設定（ネストされたリストのみ）：
* 順序ロック（情報）： リスト項目の順序が変更できないことを示します。

### 添付ファイルの管理 {#manage-attachments}

1. **添付ファイル**&#x200B;を選択します。Correspondence Management は、レターテンプレートの作成時に設定された、使用可能な添付ファイルを表示します。
1. 表示アイコンをタップすると、レターの添付ファイルを送信しないように選択できます。また、添付ファイルの X マークを選択すると、添付ファイルをレターから削除できます。レターテンプレートの作成時に「必須」として指定された添付ファイルについては、表示アイコンと削除アイコンが無効になります。
1. ライブラリアクセス（![libraryaccess](assets/libraryaccess.png)）アイコンを選択してコンテンツライブラリにアクセスし、添付ファイルとして DAM アセットを挿入します。

   >[!NOTE]
   >
   >ライブラリアクセスアイコンは、レターの作成時にライブラリアクセスを有効にした場合にのみ使用できます。

1. 通信の作成時に添付ファイルの順序がロックされなかった場合、添付ファイルを選択し、上向きおよび下向き矢印をタップすることで、添付ファイルの順番を変更できます。

   詳しくは、[添付ファイルの配信](#attachmentdelivery)を参照してください。

### プレビューでのコンテンツの管理とレターの送信 {#manage-content-in-preview-and-submit-the-letter}

レイアウトやコンテンツに関する変更を加えて、レターが意図したとおりに表示されるようにしたり、レターを様々な後処理に送信したりすることができます。

1. レター内のすべての編集可能コンテンツをハイライト表示するには、**編集可能なセクションをハイライト**&#x200B;を選択します。

   レターの編集可能コンテンツがグレーの背景でハイライト表示されます。

   ![編集可能なコンテンツをハイライト](assets/4_highlightmoduleincontent-1.png)

1. 「コンテンツ」タブで、コンテンツモジュールを必要に応じて編集します。コンテンツ階層内の関連するコンテンツモジュールにフォーカスするには、関連する行または段落をレタープレビューで選択するか、コンテンツモジュールをコンテンツ階層で直接選択します。

   例えば、下の図では、「To allow us to access...」という行を選択した結果、対応するコンテンツモジュールが「コンテンツ」タブで選択されています。

   コンテンツの選択されたモジュールをハイライト（![highlightselectedmodulesincontentccr](assets/highlightselectedmodulesincontentccr.png)）をタップすると、レタープレビューで関連するテキスト、段落、またはデータフィールドがタップされたときに、「コンテンツ」タブでコンテンツモジュールをハイライト表示する機能を有効または無効にすることができます。

   通信を作成ユーザーインターフェイスのさまざまなモジュールで使用できるアクションについて詳しくは、[通信を作成ユーザーインターフェイスで使用できるアクションと情報](#actions-and-info-available-in-the-create-correspondence-content-tab)を参照してください。

1. レターに改ページを追加するには、改ページを挿入したい位置を選択して、直後に改ページまたは直後に改ページ（![pagebreakbeforeafter](assets/pagebreakbeforeafter.png)）を選択してください。

   レターに、改ページのプレースホルダーが明示的に挿入されます。明示的な改ページによりレターがどの程度影響を受けるかを確認するには、統合された PDF プレビューを表示します。

   >[!NOTE]
   >
   > モバイルフォームは改ページをサポートしていないため、ヘッダーとフッターが表示されるのは 1 度のみになります。ただし、ヘッダーとフッターを、モバイルフォームのプレビューで表示されるように（ページごとの）レイアウトで明示的に設定することができます。また、レター内に空白のページが存在しても、モバイルフォームのプレビューには表示されません。

   ![明示的改ページ](assets/8_pagebreak.png)

1. レターをドラフトとして保存し、後で作業を続けるには、「ドラフトとして保存」を選択します。このオプションを使用するには、レターが[公開済み](../../forms/using/publishing-unpublishing-forms.md#publishanasset)になっている必要があります。詳しくは、[ドラフトの保存とレターインスタンスの送信](#savingdrafts)の「ドラフトインスタンス」を参照してください。

   ![saveasdraft](assets/saveasdraft.png)

   ドラフトレター名ダイアログが開き、レターインスタンス ID が表示されます。この ID は、必要に応じて編集できます。レター ID をメモして、「**完了**」を選択します。後でこの ID を使用して、[ドラフトレターを再読み込み](submit-letter-topostprocess.md#reloaddraft)できます。

1. レターを統合された PDF として、送信される状態のレイアウトと改ページでプレビューするには、「プレビュー」（![preview](assets/preview.png)）を選択します。

   レターは、統合された PDF として表示されます。統合された PDF は、レターの正しいフォント、改ページおよびレイアウトを反映した、送信時のレターの正確な表現となります。

   >[!NOTE]
   >
   >Mozilla Firefox と HTML レンディションタイプを使用する場合、統合された PDF をプレビューするには、Acrobat のプラグインではなく、必ずネイティブのブラウザープラグインを使用してください。ネイティブのブラウザープラグインを選択するには、Mozilla Firefox の設定に移動し、「ファイルの種類（Content Type）」の「PDF 文書」から「Firefox でプレビュー表示」を選択します。

1. 統合された PDF のプレビューが適切である場合は、「**送信**」を選択してレターを送信します。または、レターを変更するには、「**プレビューを終了**」を選択して「通信を作成」UI に戻り、レターの変更を行います。「送信」を選択すると、パブリッシュインスタンスで「レターインスタンスを管理」が有効に設定されている場合、レターの送信インスタンスが生成されます。

   詳しくは、「ドラフトの保存とレターインスタンスの送信」の「ドラフトインスタンス」を参照してください。

   レターをドラフトとして保存して、後でレターの変更を行うこともできます。

   必要な変更を加えた後、HTML5 プレビューからレターを送信するか、「プレビュー」を再度選択して、統合された PDF 出力を確認できます。

   HTML5 フォームと PDF フォームの違いについて詳しくは、「[HTML5 フォームと PDF フォームの機能の違い](../../forms/using/feature-differentiation-html5-forms-pdf-forms.md)」を参照してください。

## ドラフトの保存とレターインスタンスの送信 {#savingdrafts}

レターが「通信を作成」ユーザーインターフェイスでレンダリングされると、レターの表示中に保存できます。

保存できるレターインスタンスには 2 つのタイプ（ドラフトインスタンスと送信インスタンス）があります。

* **ドラフトインスタンス**：ドラフトインスタンスは、プレビュー中のレターの現在の状態をキャプチャします。ドラフトインスタンスを保存するには、レターおよびレターが参照するすべてのアセットが公開済みの状態になっている必要があります。レターの公開について詳しくは、[アセットの公開](../../forms/using/publishing-unpublishing-forms.md#publishanasset)を参照してください。レターは、ドラフトとして保存する前に、公開する必要があります。レターを公開すると、その時点でレターのバージョン、依存アセット、およびデータが作成されるからです。レターの公開済みバージョンは、自分または他のユーザーが編集することはできません。そのため、公開済みバージョンは、予期しない相違が発生することなく、後で復元することができます。後でこのインスタンスに戻り、中断した時点から続けることができます。

* **送信インスタンス**：送信インスタンスは、送信されたときのレターの状態をキャプチャします。送信インスタンスは、「通信を作成」ユーザーインターフェイスでユーザーによって入力されたデータとともに後処理された後のレターインスタンスの PDF 状態を保管します。

これらのインスタンスは、レターが公開インスタンスで表示されているときにのみ保存できます。デフォルトでは、インスタンスでの保存は無効になっています。レターインスタンスの保存を有効にするには、次の手順を実行します。

1. AEM で、次の URL を使用してご使用のサーバーの Adobe Experience Manager web コンソール設定を開きます。https://&lt;server>:&lt;port>/&lt;contextpath>/system/console/configMgr
1. **[!UICONTROL Correspondence Management 設定]**&#x200B;を探してクリックします。
1. **[!UICONTROL パブリッシュでレターインスタンスを管理]**&#x200B;設定をオンにして、「**[!UICONTROL 保存]**」をクリックします。

### ドラフト保存機能を有効にする {#enable-save-draft-feature}

レターを公開する前に、またはパブリッシュインスタンスでドラフトを保存する前に、オーサーインスタンスとパブリッシュインスタンスで次の手順を実行して、「ドラフトとして保存」機能を有効にします。

*cq:lastReplicationAction*、*cq:lastreplicated* および *cq:lastReplicatedBy* プロパティは、デフォルトではパブリッシュインスタンスに引き継がれません。*cq:lastReplicationAction*、*cq:lastreplicated* および *cq:lastReplicatedBy* プロパティをパブリッシュインスタンスに引き継ぐには、[!UICONTROL com.day.cq.replication.impl.ReplicationPropertiesFilterFactory] コンポーネントを無効にします。コンポーネントを無効にするには：

1. オーサーインスタンスで、 Adobe Experience Manager web コンソールのコンポーネントコンソールを開きます。デフォルトの URL は、`http://author-server:port/system/console/components` です。

1. **[!UICONTROL com.day.cq.replication.impl.ReplicationPropertiesFilterFactory]** コンポーネントを検索します。

1. 「![無効ボタン](/help/forms/using/assets/enablebutton.png)」アイコンをクリックして、[!UICONTROL com.day.cq.replication.impl.ReplicationPropertiesFilterFactory] コンポーネントを無効にします。

![オーサーインスタンス](/help/forms/using/assets/replicationproperties.png)

ドラフトとして保存機能を有効にするには、[!UICONTROL VersionRestoreManager Author URL] の既存の URL をオーサーインスタンスの URL に置き換えます。URL を置き換えるには：

1. パブリッシュインスタンスで、[!UICONTROL Adobe Manager web コンソールの設定]を開きます。デフォルトの URL は、`https://publish-server:port/system/console/configMgr` です。

1.  **[!UICONTROL Correspondence Management - オーサーインスタンスバージョンの復元設定]**&#x200B;コンポーネントを検索して開きます。

1. 「**[!UICONTROL VersionRestoreManager Author URL]**」フィールドを見つけて、オーサーインスタンスの URL を指定します。

1. 「保存」をクリックします。

![パブリッシュインスタンス](/help/forms/using/assets/correspondencemanagement.png)

レターインスタンスの保存を有効にすると、レターインスタンスの保存場所を選択するためのオプションが表示されます。レターインスタンスを保存する方法には、ローカル保存とリモート保存の 2 つがあります。

### ローカル保存 {#local-save}

レターインスタンスは、発行インスタンスで保存され、別のインスタンスでリバースレプリケーションされます。

### リモート保存 {#remote-save}

このオプションは、一般に企業ファイアウォールの外側にユーザーデータを保存することになるため、公開インスタンスで保存することが心配な方のためのものです。リモート保存が有効になっている場合、レターインスタンスは公開インスタンスでは保存されませんが、LiveCycle クライアント SDK 設定で指定された処理作成者でリモートに保存されます。

#### リモート保存を有効にする {#enable-remote-save}

1. AEM で次の URL を使用して、ご使用のサーバーの Adobe Experience Manager web コンソール設定を開きます。`https://<server>:<port>/<contextpath>/system/console/configMgr`
1. **[!UICONTROL Correspondence Management 設定]**&#x200B;を探してクリックします。
1. 「**[!UICONTROL リモート保存]**」設定を検索してそれにチェックを付け、「**[!UICONTROL 保存]**」をクリックしてください。

#### 処理作成者設定を指定する {#specify-processing-author-settings}

1. AEM で、次の URL を使用してご使用のサーバーの Adobe Experience Manager web コンソール設定を開きます。`https://<server>:<port>/system/console/configMgr` 

   ![Adobe Experience Manager の Web コンソール設定を使用する場合](assets/2configmanager.png)

1. このページで、Adobe LiveCycle Client SDK Configuration を探し、それをクリックして展開します。

1. 処理サーバー URL で、LiveCycle サーバーの名前を入力し、ログイン情報を入力してから、「**保存**」をクリックしてください。

   ![LiveCycle サーバーで名前とログイン情報を入力](assets/3configmanager.png)

1. 必要に応じて、サーバーにアクセスするためのユーザー名とパスワードを設定します。

#### 添付ファイルの配信 {#attachmentdelivery}

* レターの添付ファイルはレターの送信後に PDF として後処理されます。
* サーバーサイドの API を使用して、レターをインタラクティブ PDF または非インタラクティブ PDF としてレンダリングすると、レンダリングされた PDF に PDF ファイルが添付されます。
* 「通信を作成」ユーザーインターフェイスを使用して、レターテンプレートに関連付けられた後処理が「送信」または「通信を完了」の操作の一部として読み込まれると、添付ファイルが AttachmentDocs パラメーター内のリスト&lt;com.adobe.idp.Document> として渡されます。
* メールや印刷などの標準の配信メカニズムでは、生成された通信の PDF と共に添付ファイルも配信されます。

## レタープレビューのレンディションモード：モバイルフォームのプレビューと PDF のプレビュー {#rendition-modes-of-letter-preview-mobile-forms-preview-and-pdf-preview}

AEM Forms Correspondence Management は、「通信を作成」UI でレターを HTML で表示します。ただし、Correspondence Management では継続して、HTML プレビューの代わりに PDF プレビューへの復元をサポートしています。プレビューの HTML と PDF モードの切り替えについての詳細は、「[レターのレンディションモードの切り替え](#changerenditionmode)」を参照してください。

HTML および PDF プレビューの利点と使用できる機能は以下のとおりです。

**モバイルフォーム／HTML プレビューの利点**

* **データフィールドの値を選択して対応するデータフィールドをハイライト表示する**：「通信を作成」ユーザーインターフェイスで、レターのデータフィールド値を選択すると、「データ」タブで対応するデータフィールドをハイライト表示できます。詳しくは、[データの入力](#enterdata)を参照してください。

* **ブラウザーのサポート**：ブラウザーの NPAPI のサポートが徐々に廃止され、レターの PDF プレビューに影響します。レターの HTML／モバイルフォームのプレビューは、この影響を受けません。
* **レター内の編集可能なコンテンツをハイライト表示する**：「通信を作成」ユーザーインターフェイスで「編集可能コンテンツをハイライト」を選択すると、レター内のすべての編集可能コンテンツをグレーでハイライト表示できます。詳しくは、[コンテンツの管理](#managecontent)を参照してください。

`<li>` `<li>Benefits of HTML preview  <ul>   <li>Right to left</li>   <li>NPAPI</li>   <li>Highlight Editable Content</li>  </ul> </li>` `<li>Benefits of PDF preview  <ul>   <li>Page Break</li>   <li>Final Preview</li>  </ul> </li>`
`<li>` `<li>Benefits of HTML preview  <ul>   <li>Right to left</li>   <li>NPAPI</li>   <li>Highlight Editable Content</li>  </ul> </li>` `<li>Benefits of PDF preview  <ul>   <li>Page Break</li>   <li>Final Preview</li>  </ul> </li>`  **PDF プレビューの利点**

* **改ページ**： PDF プレビューでは、レターの改ページの出力への影響をそのまま確認することができます。
* **最終プレビュー**： PDF プレビューでは、レターが出力に表示されるため、レターの書式や表示をそのまま確認できます。

PDF フォームのスクリプティングのサポートについて詳しくは、「[スクリプティングのサポート](https://help.adobe.com/ja_jp/livecycle/11.0/ScriptingSupport/index.html)」を参照してください。

HTML5 フォームのスクリプティングのサポートについて詳しくは、「[HTML5 のスクリプティングのサポート](/help/forms/using/scripting-support.md)」を参照してください。

### レターのレンディションモードの変更 {#changerenditionmode}

デフォルトでは、「通信を作成」UI は HTML またはモバイルフォームを使用してレターのプレビューをレンダリングします。モバイルフォームのプレビューは、ブラウザのネイティブプラグインを使用し、追加のプラグインを必要としないため、どのブラウザでレンダリングしても問題はありません。レタープレビューモードは、PDF に変更することができます。ただし、ブラウザの制約により、レターのインタラクティブな PDF プレビューの異なる機能で問題が発生する可能性があります。

レタープレビューとブラウザの互換性について詳しくは、「[NPAPI ブラウザプラグインのサポート終了とその影響](https://helpx.adobe.com/jp/acrobat/kb/change-in-support-for-acrobat-and-reader-plug-ins-in-modern-web-.html)」を参照してください。

レターのプレビューモードを変更するには、次の手順を完了してください。

1. `https://[system]:'port'/system/console/configMgr`に移動し、必要に応じて管理者としてログインしてください。
1. **[!UICONTROL Correspondence Management 設定]**／**[!UICONTROL レンディションタイプ]**&#x200B;に移動し、「**HTML レンディション**」（デフォルト）または「**PDF レンディション**」を選択してください。
1. 「**[!UICONTROL 保存]**」をクリックします。
