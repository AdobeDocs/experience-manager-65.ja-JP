---
title: ユーザーとユーザーグループの管理
description: AEM Communitiesのユーザーは、自分のプロファイルをセルフ登録して編集できます
contentOwner: Janice Kendall
products: SG_EXPERIENCEMANAGER/6.5/COMMUNITIES
topic-tags: administering
content-type: reference
role: Admin
exl-id: 4237085a-d70d-41de-975d-153f58336daa
solution: Experience Manager
feature: Communities
source-git-commit: 1f56c99980846400cfde8fa4e9a55e885bc2258d
workflow-type: tm+mt
source-wordcount: '1910'
ht-degree: 1%

---

# ユーザーとユーザーグループの管理 {#managing-users-and-user-groups}

## 概要 {#overview}

AEM Communitiesのパブリッシュ環境では、ユーザーは自己登録して自分のプロファイルを編集できます。 適切な権限が与えられると、次の場合もあります。

* コミュニティサイト内にサブコミュニティを作成します（ [コミュニティグループ](creating-groups.md)）に設定します。

* [中等](moderation.md) ユーザー生成コンテンツ（UGC）

* 可能 [特権](#privileged-members-group) ブログ、カレンダー、QnA およびフォーラムのエントリを作成します。

パブリッシュ環境に登録されたユーザーは、通常、と呼ばれます *コミュニティメンバー（メンバー）* 区別する *ユーザー* オーサー環境で実行します。

権限を付与するには、メンバーを「」のいずれかに割り当てます [メンバー（ユーザー）グループ](#publish-group-roles) コミュニティサイトがの場合に動的に作成 [作成日](sites-console.md) または [変更日](sites-console.md#modifying-site-properties) オーサー環境から変更します。 オーサー環境から作業する場合、メンバーはパブリッシュ環境から [トンネル サービス](#tunnel-service).

仕様上、パブリッシュ環境で作成されたメンバーとメンバーグループは、オーサー環境では表示できません。 オーサー環境で作成されたユーザーとユーザーグループは、同様にオーサー環境に留まるように設計されています。

オーサー環境のユーザーとパブリッシュ環境のメンバーが同じユーザーリストに属している場合（例えば、同じ LDAP ディレクトリから同期されている場合）、オーサー環境とパブリッシュ環境の両方で、同じ権限とグループメンバーシップを持つ同じユーザーとは見なされません。 メンバーとユーザーの役割は、必要に応じて、パブリッシュとオーサーで別々に設定する必要があります。

の場合 [パブリッシュファーム](topologies.md)の場合、1 つのパブリッシュインスタンスで行われた登録と変更を他のパブリッシュインスタンスと同期して、他のパブリッシュインスタンスが同じユーザーデータにアクセスできるようにする必要があります。 詳しくは、 [ユーザーの同期](sync.md)を説明する節を含む [次の場合はどうなりますか](sync.md#what-happens-when).

### 貢献度の制限 {#contribution-limits}

スパムから保護するために、メンバーがコンテンツを投稿する頻度を制限することができます。 また、新規登録された会員の投稿を自動的に制限することも可能です。

詳しくは、を参照してください [メンバーの貢献度の制限](limits.md).

### 動的に作成されたユーザーグループ {#dynamically-created-user-groups}

新しいコミュニティサイトを作成すると、オーサー環境のいずれかでコミュニティサイトを管理するために必要な様々な管理機能に適した一意の id （uid）と権限で、新しいユーザーグループが動的に作成されます（ [作成者グループの役割](#author-group-roles)）またはパブリッシュ環境（ [グループの役割の公開](#publish-group-roles)）に設定します。

グループの名前は、次の期間にサイトに指定された名前から生成されます [コミュニティサイトの作成](sites-console.md#step13asitetemplate). 一意の ID を使用すると、同じサーバー上にある類似した名前のコミュニティサイトとコミュニティグループの名前の競合を回避できます。

例えば、サイト名が「」であった場合&#x200B;*従事する*&quot; &quot;Engage&quot;という名前のサイトの場合、作成されるユーザーグループの 1 つは次のようになります。

* コミュニティ *エンゲージ* メンバー

## オーサー環境 {#author-environment}

### トンネルサービス {#tunnel-service}

オーサー環境を使用して以下を行う場合 [サイトの作成](sites-console.md), [サイトのプロパティの変更](sites-console.md#modifying-site-properties) および [コミュニティメンバーとメンバーグループの管理](members.md)パブリッシュ環境で登録されているユーザーとユーザーグループにアクセスする必要があります。

トンネルサービスは、作成者のレプリケーションエージェントを使用してこのアクセスを提供します。

* 詳しくは、を参照してください [設定手順](deploy-communities.md#tunnel-service-on-author) デプロイメントページで、次の操作を行います。

この [コミュニティメンバーコンソールとグループコンソール](members.md) は、パブリッシュ環境でのみ登録されているユーザー（メンバー）およびユーザーグループ（メンバーグループ）の管理を目的としています。

オーサー環境に登録されたユーザーとユーザーグループを管理するには、を使用します。 [セキュリティコンソール](../../help/sites-administering/security.md)

### 作成者グループの役割 {#author-group-roles}

| グループのメンバーの場合… | プライマリの役割 |
|---|---|
| 管理者 | 管理者グループは、コミュニティ管理者の能力とコミュニティ管理者グループを管理する能力をすべて持つシステム管理者で構成されます。 |
| コミュニティ管理者 | コミュニティ管理者グループは、自動的にすべてのコミュニティサイトおよびサイト上で作成されたすべてのコミュニティグループのメンバーになります。 コミュニティ管理者グループの最初のメンバーは、管理者グループです。 オーサー環境では、コミュニティ管理者は、コミュニティサイトの作成、サイトの管理、メンバーの管理（メンバーのコミュニティへの参加を禁止できます）、コンテンツの管理を行うことができます。 |
| コミュニティ &lt;*サイト名*> Sitecontentmanager | コミュニティサイトの Content Manager は、コミュニティサイトの従来のAEM オーサリング、コンテンツ作成およびページ変更を実行できます。 |
| なし | 匿名のサイト訪問者は、オーサー環境にアクセスできない場合があります。 |

### システム管理者 {#system-administrators}

administrators グループのメンバーは、オーサー環境とパブリッシュ環境の両方でAEM インストールの初期設定を実行できるシステム管理者です。

デモや開発の目的で、administrators グループには、というユーザー ID を持つメンバーが含まれています。 *admin* また、パスワードはです *admin*.

実稼動環境の場合、デフォルトの管理者グループを変更する必要があります。

必ず次の手順に従ってください [セキュリティチェックリスト](../../help/sites-administering/security-checklist.md).

## パブリッシュ環境 {#publish-environment}

### メンバーになる {#becoming-a-member}

パブリッシュ環境では、に応じて、 [設定](sites-console.md#user-management) コミュニティサイトの場合、サイト訪問者はコミュニティメンバーになる場合があります。

* コミュニティサイトがプライベート（クローズド）の場合：
   * 招待状による
   * 管理者のアクション

* コミュニティサイトが公開（オープン）されている場合：
   * セルフ登録
   * facebookおよびTwitterでのソーシャルログインによる

>[!NOTE]
>
>サイト訪問者が 1 つのオープンなコミュニティサイトのメンバーとして登録すると、同じパブリッシュ環境の他のオープンなコミュニティサイトのメンバーになります。

### グループの役割の公開 {#publish-group-roles}

| グループのメンバーの場合… | プライマリの役割 |
|---|---|
| コミュニティ &lt;*サイト名*> メンバー | コミュニティサイトメンバーは登録ユーザーです。 ログイン、プロファイルの変更、オープンなコミュニティグループへの参加、コミュニティへのコンテンツの投稿、他のメンバーへのメッセージの送信、サイトのアクティビティのフォローを行うことができます。 |
| コミュニティ &lt;*サイト名*> モデレーター | コミュニティサイトのモデレーターは、コンテンツが投稿されたページで、モデレートコンソールを使用して一括で、またはコンテキスト内で UGC をモデレートできる、信頼されたコミュニティメンバーです。 |
| コミュニティ &lt;*サイト名*> &lt;*グループ名*> メンバー | コミュニティグループメンバーとは、オープンなコミュニティグループに参加した、または閉じられたコミュニティグループに招待されたコミュニティメンバーです。 サイト内のそのコミュニティグループのメンバーの能力を持っています。 |
| コミュニティ &lt;*サイト名*> グループ管理者 | コミュニティ サイト グループ管理者は、コミュニティ サイト内のサブコミュニティ（グループ）の作成と管理に割り当てられる信頼されたコミュニティ メンバです。 コンテキスト内モデレートを提供する機能が含まれます。 |
| *Privileged Members セキュリティ グループ* | コンテンツの作成を制限するために手動で作成および管理されたユーザーグループ。 参照： [特権メンバーグループ](#privileged-members-group). |
| なし | サイトを検出した匿名のサイト訪問者は、匿名アクセスを許可するコミュニティサイトを表示および検索できます。 コンテンツに参加して投稿するには、ユーザーが自己登録（許可されている場合）してコミュニティメンバーになる必要があります。 |

### 公開グループの役割へのメンバーの割り当て {#assigning-members-to-publish-group-roles}

条件 [コミュニティサイトの作成](sites-console.md) オーサー環境で、または [サイトのプロパティの変更](sites-console.md#modifying-site-properties) メンバーには、モデレーター、グループ管理者、リソース連絡先、権限のあるメンバーなど、パブリッシュ環境で実行される様々な役割が割り当てられます。

[トンネルサービスの有効化](sync.md#accessingpublishusersfromauthor) その結果、割り当ての選択が、オーサーのユーザーではなく、パブリッシュのメンバーから提示されることになります。

選択したメンバーは、自動的にに割り当てられます。 [適切なグループ](#publish-group-roles) コミュニティサイトが（再）公開されると、それらのメンバーシップが含まれます。

### 権限を持つメンバーグループ {#privileged-members-group}

特権メンバーセキュリティグループの目的は、特定のコミュニティ機能のコンテンツの作成を、コミュニティサイトのメンバーの特権サブセットに制限することです。

特権メンバーグループは、を使用して作成および管理されるメンバーグループです。 [コミュニティグループコンソール](members.md).

権限のあるメンバーグループの作成後、 [トンネルサービスが有効](sync.md#accessingpublishusersfromauthor)：既存のコミュニティサイトの構造は次のようになります [変更日](sites-console.md#modify-structure) コミュニティ機能の設定を「権限のあるメンバーを許可」に編集し、作成したグループを追加します。

1 つ以上の特権メンバー・グループを指定できるコミュニティ機能は、次のとおりです。

* [ブログ関数](functions.md#blog-function) ・新規記事作成の制限
* [カレンダー関数](functions.md#calendar-function)  – 新しいイベントの作成を制限します。
* [フォーラム機能](functions.md#forum-function) ・新規トピックの作成を制限
* [QnA 関数](functions.md#qna-function)  – 新しい質問の作成を制限します。

コミュニティ機能が保護されていない（権限のあるメンバーグループが割り当てられていない）場合、すべてのコミュニティサイトメンバーは、機能コンテンツ（記事、イベント、トピック、質問）を作成できます。

>[!NOTE]
>
>コミュニティサイトの権限を持つメンバーグループにユーザーを追加すると、そのコミュニティサイトのメンバーでもある場合にのみ、作成権限が付与されます。

## コミュニティメンバーの作成 {#creating-community-members}

### リポジトリの場所 {#repository-location}

特定の機能を正しく動作させるには、適切な権限を持つユーザーおよびユーザーグループを作成する必要があります。

でメンバーを作成する場合 `/home/users/community`は、メンバーのプロファイルに読み取り権限を付与する適切な ACL を継承します。

同様に、カスタムコミュニティユーザーグループ（権限のあるメンバーグループなど）は、次の場所に作成する必要があります `/home/groups/community`.

使用， [コミュニティメンバーコンソールとグループコンソール](members.md) はこれらのパスにユーザーとグループを作成します。

カスタムパスを指定するには、クラシック UI を使用する必要があります。この UI には、からアクセスできます。 [https://&lt;server>:&lt;port>/useradmin](http://localhost:4503/useradmin).

カスタムメンバーパスに読み取り権限を付与するには、すべてのパブリッシュインスタンスで次のような ACL を設定します `/home/users/community`:

```xml
<allow
  jcr:primaryType="rep:GrantACE"
  rep:principalName="everyone"
  rep:privileges="{Name}[jcr:read]" >
  <rep:restrictions
    jcr:primaryType="rep:Restrictions"
    rep:glob="*/profile*" />
</allow>
```

すべてのパブリッシュインスタンスで、/home/groups/mycompany などのカスタムメンバーグループのパスに適切な権限を付与するには、次のような ACL を設定します。 `/home/groups/community`:

```xml
<allow
  jcr:primaryType="rep:GrantACE"
  rep:principalName="community-administrators"
  rep:privileges="{Name}[jcr:read]"  />
```

### コンソール {#consoles}

オーサー環境でのみ使用できるコンソールは 4 つあります。

| コンソール | ツール，セキュリティ，ユーザー | ツール，セキュリティ，グループ | コミュニティ、メンバー | コミュニティ、グループ |
|----------|-----------------------|------------------------|------------------------------------------------------------|------------------------------------------------------------|
| 管理 | オーサーのユーザー | オーサー環境のユーザーグループ | 公開時のメンバー | 公開時のメンバーグループ |
| が必要 | 管理権限 | 管理権限 | 管理権限，トンネル サービス，公開ファームのユーザー同期 | 管理権限，トンネル サービス，公開ファームのユーザー同期 |

### コミュニティ管理者役割 {#community-administrators-role}

に記載されているように [作成者グループの役割](#author-group-roles) グラフを使用すると、コミュニティ管理者グループのメンバーは、コミュニティサイトの作成、サイトの管理、メンバーの管理（メンバーのコミュニティへの参加を禁止できます）、およびコンテンツの管理を行うことができます。

イネーブルメントマネージャーの役割にユーザーを作成して割り当てるのと同じ手順に従いますが、c を追加します `ommunity-administrators` グループは、ユーザーの「グループ」タブの下にあります。

### LDAP の統合 {#ldap-integration}

AEMでは、ユーザーの認証とユーザーアカウントの作成に LDAP を使用することができます。 詳しくは、以下を参照してください [AEM 6 での LDAP の設定](../../help/sites-administering/ldap-config.md).

コミュニティメンバーおよびメンバーグループに固有の設定の詳細を以下に示します。

1. 各AEM パブリッシュインスタンスに LDAP を設定します。
2. [LDAP Identity Provider](../../help/sites-administering/ldap-config.md#configuring-the-ldap-identity-provider)

   * 特別な手順はありません

3. [同期ハンドラー](../../help/sites-administering/ldap-config.md#configuring-the-synchronization-handler)

   * 次のプロパティを設定します。

      * **[!UICONTROL User auto membership]**: `community-<site name>-<uid>-members`
      * **[!UICONTROL User Path Prefix]**: `/community`
      * **[!UICONTROL Group Path Prefix]**: `/community`

4. [外部ログインモジュール](../../help/sites-administering/ldap-config.md#the-external-login-module)

   * 特別な指示なし

その結果、ユーザーはコミュニティサイトのメンバーグループに自動的に割り当てられ、リポジトリの場所は `/home/users/community` および `/home/groups/community`を設定できます。これにより、お互いのプロファイルを表示するための適切な権限を継承します。

* この `User auto membership` 値はでなければなりません `rep:authorizableId` ではなく、プロパティ `givenName` （表示名）をプロファイルから選択します。

## AEM インスタンス間でのユーザーの同期 {#synchronizing-users-among-aem-instances}

を使用する場合 [パブリッシュファーム](topologies.md)最初にユーザーを 1 つのインスタンスに読み込んで、各パブリッシュインスタンスでユーザーが同じパスを持っていることを確認します。 [ユーザー同期の有効化](sync.md) を Sling に送信するには、ユーザーを他のパブリッシュインスタンスに配布します。

ユーザーグループをインポートする場合、各パブリッシュインスタンスでユーザーグループのパスが同じになるようにするには、を 1 つのインスタンスにインポートし、次の手順を実行します [パッケージを作成](../../help/sites-administering/package-manager.md#creating-a-new-package) エクスポートする場合は、そのパッケージを他のすべてのパブリッシュインスタンスにインストールします。

ユーザー同期を使用したユーザーグループの同期は、今後のリリースで含まれる予定ですが、現在は、 *会員* のユーザーグループは、ユーザー同期の実行時に同期されます。

## コミュニティグループについて {#about-community-groups}

グループについて説明する場合、2 つの異なるトピックがあります。

* **[コミュニティグループ](overview.md#communitygroups)**

  コミュニティグループは、コミュニティグループの作成をサポートするコミュニティサイトのパブリッシュ環境で作成できるサブコミュニティです。 コミュニティグループを作成すると、web サイトに追加されるページが増え、親のコミュニティサイトと同様に管理されます。 詳しくは、を参照してください。 [コミュニティグループの基本事項](essentials-groups.md) 開発者向け [コミュニティグループ](creating-groups.md) （作成者向け）。

* **[メンバーグループ](../../help/sites-administering/security.md)**

  メンバーグループは、メンバーが属する可能性のあるグループであり、グループ コンソールを使用して管理されます。 このページでの議論の多くは、メンバー団体に向けて行われている。 コミュニティサイト用に自動的に作成されたメンバーグループには、というプレフィックスが付きます *`Community`*&#x200B;をコミュニティグループと呼ぶ場合があるので、ディスカッションのコンテキストを考慮する必要があります。
