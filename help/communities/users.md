---
title: ユーザーとユーザーグループの管理
seo-title: Managing Users and User Groups
description: AEM Communitiesのユーザーは、自己登録とプロファイルの編集が可能です
seo-description: Users of AEM Communities can self-register and edit their profiles
uuid: aeba424e-ea7e-4da5-b94f-ea8af4caa7d2
contentOwner: Janice Kendall
products: SG_EXPERIENCEMANAGER/6.5/COMMUNITIES
topic-tags: administering
content-type: reference
discoiquuid: 774c2553-b629-456b-afa7-5713490f4a0a
role: Admin
exl-id: 4237085a-d70d-41de-975d-153f58336daa
source-git-commit: 1807919078996b1cf1cbd1f2d90c3b14cb660e2c
workflow-type: tm+mt
source-wordcount: '1916'
ht-degree: 1%

---

# ユーザーとユーザーグループの管理 {#managing-users-and-user-groups}

## 概要 {#overview}

AEM Communitiesのパブリッシュ環境では、ユーザーは自己登録とプロファイルの編集をおこなうことができます。 適切な権限を与えると、次のことも可能です。

* コミュニティサイト内にサブコミュニティを作成します ( [コミュニティグループ](creating-groups.md)) をクリックします。

* [モデレート](moderation.md) ユーザー生成コンテンツ (UGC)。

* Be [特権のある](#privileged-members-group) ブログ、カレンダー、Q&amp;A、フォーラムのエントリを作成する。

パブリッシュ環境で登録されたユーザーは、通常、 *コミュニティメンバー（メンバー）* 区別する *ユーザー* （オーサー環境で）。

権限は、メンバーをいずれかの [メンバー（ユーザー）グループ](#publish-group-roles) コミュニティサイトが [作成済み](sites-console.md) または [変更済み](sites-console.md#modifying-site-properties) オーサー環境から。 オーサー環境から作業する場合、メンバーは [トンネルサービス](#tunnel-service).

設計上、パブリッシュ環境で作成したメンバーとメンバーグループは、オーサー環境には表示されません。 同様に、オーサー環境で作成されたユーザーとユーザーグループは、オーサー環境にとどまります。

オーサーとパブリッシュ上のメンバーのユーザーが同じユーザーリストから来ている場合（同じ LDAP ディレクトリから同期される場合など）、オーサー環境とパブリッシュ環境の両方で同じ権限とグループメンバーシップを持つユーザーとは見なされません。 メンバーとユーザーの役割は、必要に応じて、パブリッシュ環境とオーサー環境で個別に確立する必要があります。

の [パブリッシュファーム](topologies.md)を使用する場合、1 つのパブリッシュインスタンスでおこなわれた登録と変更を他のパブリッシュインスタンスと同期して、同じユーザーデータにアクセスできるようにする必要があります。 詳しくは、 [ユーザーの同期](sync.md)（を説明する節を含む） [何が起こるか…](sync.md#what-happens-when).

### 貢献度の制限 {#contribution-limits}

スパムから保護するために、メンバーによるコンテンツの投稿頻度を制限できます。 また、新規登録会員の寄与を自動的に制限することも可能である。

詳しくは、 [メンバー貢献度の制限](limits.md).

### 動的に作成されたユーザーグループ {#dynamically-created-user-groups}

新しいコミュニティサイトを作成すると、新しいユーザーグループは、オーサー環境でコミュニティサイトを管理するために必要な様々な管理機能に適した一意の ID(uid) と権限を使用して動的に作成されます ( [作成者グループの役割](#author-group-roles)) またはパブリッシュ環境 ( [グループの役割の公開](#publish-group-roles)) をクリックします。

グループの名前は、 [コミュニティサイトの作成](sites-console.md#step13asitetemplate). 一意の ID を使用することで、同じサーバー上の同じ名前のコミュニティサイトとコミュニティグループに対する名前の競合を回避できます。

例えば、サイト名が「*エンゲージ*&quot; &quot;We.Retail Engage&quot;というタイトルのサイトの場合、作成されるユーザーグループの 1 つは次のようになります。

* コミュニティ *エンゲージ* メンバー

## オーサー環境 {#author-environment}

### トンネルサービス {#tunnel-service}

オーサー環境を使用して [サイトの作成](sites-console.md), [サイトのプロパティを変更する](sites-console.md#modifying-site-properties) および [コミュニティメンバーとメンバーグループの管理](members.md)パブリッシュ環境に登録されているユーザーとユーザーグループにアクセスする必要があります。

トンネルサービスは、オーサー環境のレプリケーションエージェントを使用してこのアクセスを提供します。

* 詳しくは、 [設定手順](deploy-communities.md#tunnel-service-on-author) 」をクリックします。

The [コミュニティメンバーコンソールとグループコンソール](members.md) は、パブリッシュ環境でのみ登録されているユーザー（メンバー）とユーザーグループ（メンバーグループ）を管理する目的でのみ使用します。

オーサー環境で登録されたユーザーとユーザーグループを管理するには、 [セキュリティコンソール](../../help/sites-administering/security.md)

### 作成者グループの役割 {#author-group-roles}

| グループのメンバー | プライマリの役割 |
|---|---|
| administrators | 管理者グループは、コミュニティ管理者のすべての能力を持つシステム管理者と、コミュニティ管理者グループを管理する機能で構成されます。 |
| コミュニティ管理者 | コミュニティ管理者グループは、自動的にすべてのコミュニティサイトのメンバーになり、サイト上で作成されたコミュニティグループも自動的にメンバーになります。 コミュニティ管理者グループの最初のメンバーは、管理者グループです。 オーサー環境では、コミュニティ管理者は、コミュニティサイトの作成、サイトの管理、メンバーの管理（コミュニティからのメンバーの禁止が可能）、コンテンツのモデレートをおこなうことができます。 |
| コミュニティ &lt;*サイト名*> Sitecontentmanager | コミュニティサイトコンテンツマネージャーでは、従来のAEMのオーサリング、コンテンツの作成、コミュニティサイトのページの変更を実行できます。 |
| なし | 匿名のサイト訪問者は、オーサー環境にアクセスできない場合があります。 |

### システム管理者 {#system-administrators}

administrators グループのメンバーは、オーサー環境とパブリッシュ環境の両方でAEMインストールの初期セットアップを実行できるシステム管理者です。

デモ用および開発用に、管理者グループにはユーザー ID がのメンバーが存在します *admin* パスワードは *admin*.

実稼動環境の場合は、デフォルトの管理者グループを変更する必要があります。

必ず [セキュリティチェックリスト](../../help/sites-administering/security-checklist.md).

## パブリッシュ環境 {#publish-environment}

### メンバーになる {#becoming-a-member}

パブリッシュ環境で、 [設定](sites-console.md#user-management) コミュニティサイトの訪問者は、コミュニティメンバーになることができます。

* コミュニティサイトが非公開（クローズ済み）の場合：
   * 招待による
   * 管理者のアクション別

* コミュニティサイトが公開（オープン）の場合：
   * 自己登録
   * facebookとTwitterを使用したソーシャルログイン

>[!NOTE]
>
>サイト訪問者が 1 つのオープンコミュニティサイトのメンバーとして登録すると、同じパブリッシュ環境で、その訪問者は自動的に他のオープンコミュニティサイトのメンバーになります。

### グループの役割の公開 {#publish-group-roles}

| グループのメンバー | プライマリの役割 |
|---|---|
| コミュニティ &lt;*サイト名*> メンバー | コミュニティサイトメンバーは登録ユーザーです。 ユーザーは、ログイン、プロファイルの変更、オープンなコミュニティグループへの参加、コミュニティへのコンテンツの投稿、他のメンバーへのメッセージの送信、サイトアクティビティのフォローをおこなうことができます。 |
| コミュニティ &lt;*サイト名*/モデレーター | コミュニティサイトモデレーターは、コンテンツが投稿されたページ上で UGC を一括、モデレートコンソールを使用、またはコンテキスト内でモデレートできる、信頼できるコミュニティメンバーです。 |
| コミュニティ &lt;*サイト名*> &lt;*グループ名*> メンバー | コミュニティグループメンバーは、オープンなコミュニティグループに参加したか、閉じられたコミュニティグループに招待されたコミュニティメンバーです。 サイト内のコミュニティグループのメンバーの能力を持っています。 |
| コミュニティ &lt;*サイト名*> グループ管理者 | コミュニティサイトグループ管理者は、コミュニティサイト内のサブコミュニティ（グループ）の作成と管理を割り当てられる、信頼できるコミュニティメンバーです。 コンテキスト内モデレートを提供する機能が含まれます。 |
| *権限を持つメンバーのセキュリティグループ* | コンテンツの作成を制限するために、手動で作成および管理されるユーザーグループ。 詳しくは、 [権限を持つメンバーグループ](#privileged-members-group). |
| なし | 匿名のサイト訪問者は、そのサイトを検出し、匿名アクセスを許可するコミュニティサイトを表示して検索できます。 コンテンツに参加し投稿するには、ユーザーが自己登録（許可されている場合）し、コミュニティメンバーになる必要があります。 |

### パブリッシュグループの役割へのメンバーの割り当て {#assigning-members-to-publish-group-roles}

条件 [コミュニティサイトの作成](sites-console.md) オーサー環境で、または [サイトのプロパティを変更する。](sites-console.md#modifying-site-properties) メンバーには、モデレーター、グループ管理者、リソース連絡先、権限を持つメンバーなど、パブリッシュ環境で実行される様々な役割を割り当てることができます。

[トンネルサービスの有効化](sync.md#accessingpublishusersfromauthor) 結果として、割り当ての選択肢が、オーサーのユーザーではなく、パブリッシュのメンバーから表示されます。

選択したメンバーは、 [適切なグループ](#publish-group-roles) また、コミュニティサイトが（再）公開されると、そのメンバーシップが含まれます。

### 権限を持つメンバーグループ {#privileged-members-group}

権限を持つメンバーのセキュリティグループの目的は、コミュニティサイトのメンバーの権限を持つサブセットに対して、特定のコミュニティ機能のコンテンツの作成を制限することです。

権限を持つメンバーグループは、 [コミュニティグループコンソール](members.md).

権限を持つメンバーグループが作成され、 [トンネルサービスが有効になりました](sync.md#accessingpublishusersfromauthor)既存のコミュニティサイトの構造は、 [変更済み](sites-console.md#modify-structure) コミュニティ機能の設定を「権限を持つメンバーを許可」に編集し、作成したグループを追加します。

1 つ以上の権限を持つメンバーグループを指定できるコミュニティ機能は次のとおりです。

* [ブログ機能](functions.md#blog-function)  — 新しい記事の作成を制限します。
* [カレンダー関数](functions.md#calendar-function)  — 新しいイベントの作成を制限します。
* [フォーラム機能](functions.md#forum-function)  — 新規トピックの作成を制限します。
* [Q&amp;A 機能](functions.md#qna-function)  — 新しい質問の作成を制限します。

コミュニティ機能が保護されていない場合（権限を持つメンバーグループが割り当てられていない場合）、すべてのコミュニティサイトメンバーが機能コンテンツ（記事、イベント、トピック、質問）を作成できます。

>[!NOTE]
>
>コミュニティサイトの権限を持つメンバーグループにユーザーを追加すると、そのユーザーが同じコミュニティサイトのメンバーでもある場合にのみ、作成権限が付与されます。

## コミュニティメンバーの作成 {#creating-community-members}

### リポジトリの場所 {#repository-location}

特定の機能を正しく動作させるには、適切な権限を持つユーザーおよびユーザーグループを作成する必要があります。

メンバーが `/home/users/community`を使用する場合、メンバーのプロファイルに読み取り権限を付与する適切な ACL を継承します。

同様に、カスタムコミュニティユーザーグループ（権限を持つメンバーグループなど）を `/home/groups/community`.

の使用 [コミュニティメンバーコンソールとグループコンソール](members.md) は、これらのパスにユーザーとグループを作成します。

カスタムパスを指定するには、クラシックセキュリティ UI を使用する必要があります。この UI には、次の場所からアクセスできます。 [https://&lt;server>:&lt;port>/useradmin](http://localhost:4503/useradmin).

カスタムメンバーパスの読み取り権限を付与するには、すべてのパブリッシュインスタンスで、ACL を `/home/users/community`:

```xml
<allow
  jcr:primaryType="rep:GrantACE"
  rep:principalName="everyone"
  rep:privileges="{Name}[jcr:read]" >
  <rep:restrictions
    jcr:primaryType="rep:Restrictions"
    rep:glob="*/profile*" />
</allow>
```

/home/groups/mycompany などのカスタムメンバーグループパスに対する適切な権限を付与するには、すべてのパブリッシュインスタンスで、ACL を次のように設定します。 `/home/groups/community`:

```xml
<allow
  jcr:primaryType="rep:GrantACE"
  rep:principalName="community-administrators"
  rep:privileges="{Name}[jcr:read]"  />
```

### コンソール {#consoles}

オーサー環境でのみ使用できるコンソールは、次の 4 つあります。

| コンソール | ツール、セキュリティ、ユーザー | ツール、セキュリティ、グループ | コミュニティ、メンバー | コミュニティ、グループ |
|----------|-----------------------|------------------------|------------------------------------------------------------|------------------------------------------------------------|
| 管理 | 作成者のユーザー | オーサー環境のユーザーグループ | 公開時のメンバー | 公開時のメンバーグループ |
| が必要です | 管理権限 | 管理権限 | 管理者権限、トンネルサービス、パブリッシュファームのユーザー同期 | 管理者権限、トンネルサービス、パブリッシュファームのユーザー同期 |

### コミュニティ管理者の役割 {#community-administrators-role}

次に示すように、 [作成者グループの役割](#author-group-roles) コミュニティ管理者グループのメンバーは、コミュニティサイトの作成、サイトの管理、メンバーの管理（コミュニティからのメンバーの禁止が可能）、コンテンツのモデレートをおこなうことができます。

イネーブルメントマネージャーの役割にユーザーを作成して割り当てるのと同じ手順に従いますが、 c を追加します。 `ommunity-administrators` 」グループの下に表示されます。

### LDAP の統合 {#ldap-integration}

AEMは、ユーザーの認証とユーザーアカウントの作成に LDAP の使用をサポートしています。 詳しくは、 [AEM 6 での LDAP の設定](../../help/sites-administering/ldap-config.md).

コミュニティメンバーとメンバーグループに固有の設定の詳細を以下に示します。

1. 各 LDAP パブリッシュインスタンスに対してAEMを設定します。
2. [LDAP ID プロバイダー](../../help/sites-administering/ldap-config.md#configuring-the-ldap-identity-provider)

   * 特別な指示はありません

3. [同期ハンドラー](../../help/sites-administering/ldap-config.md#configuring-the-synchronization-handler)

   * 次のプロパティを設定します。

      * **[!UICONTROL User auto membership]**: `community-<site name>-<uid>-members`
      * **[!UICONTROL User Path Prefix]**: `/community`
      * **[!UICONTROL Group Path Prefix]**: `/community`

4. [外部ログインモジュール](../../help/sites-administering/ldap-config.md#the-external-login-module)

   * 特別な指示なし

その結果、ユーザーはコミュニティサイトのメンバーグループに自動的に割り当てられ、リポジトリの場所は次のようになります。 `/home/users/community` および `/home/groups/community`を継承し、相互のプロファイルを確認するための適切な権限を継承します。

* The `User auto membership` 値は `rep:authorizableId` プロパティ（ではない） `givenName` （表示名）をプロファイルから削除します。

## AEMインスタンス間でのユーザーの同期 {#synchronizing-users-among-aem-instances}

を使用する場合、 [パブリッシュファーム](topologies.md)を使用する場合、ユーザーを最初に 1 つのインスタンスに読み込み、各パブリッシュインスタンスで同じパスを持つようにし、 [ユーザー同期の有効化](sync.md) を使用して、ユーザーを他のパブリッシュインスタンスに配布します。

ユーザーグループを読み込む場合、各パブリッシュインスタンスでユーザーグループが同じパスを持つようにするには、1 つのインスタンスに読み込み、次に [パッケージの作成](../../help/sites-administering/package-manager.md#creating-a-new-package) 書き出し用に、そのパッケージを他のすべてのパブリッシュインスタンスにインストールします。

ユーザー同期によるユーザーグループの同期は、今後のリリースで組み込まれる予定ですが、現在は、 *メンバーシップ* のユーザーグループが、ユーザー同期の実行時に同期されます。

## コミュニティグループについて {#about-community-groups}

グループについて説明する際には、次の 2 つのトピックが異なります。

* **[コミュニティグループ](overview.md#communitygroups)**

  コミュニティグループは、コミュニティグループの作成をサポートするコミュニティサイトのパブリッシュ環境で作成できるサブコミュニティです。 コミュニティグループを作成すると、Web サイトに追加されるページが増え、親コミュニティサイトと同様の方法で管理されます。 詳しくは、 [コミュニティグループの基本事項](essentials-groups.md) 開発者向け [コミュニティグループ](creating-groups.md) 作成者向け

* **[メンバーグループ](../../help/sites-administering/security.md)**

  メンバーグループは、メンバーが属するグループで、グループコンソールを通じて管理されます。 このページでの議論の多くは、メンバーグループに費やされています。 コミュニティサイト用に自動的に作成されたメンバーグループ。このグループの先頭には *`Community`*&#x200B;をコミュニティグループと呼ぶこともできるので、ディスカッションのコンテキストを考慮する必要があります。
