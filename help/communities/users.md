---
title: ユーザーとユーザーグループの管理
description: AEM Communitiesのユーザーは、自分のプロファイルをセルフ登録して編集できます
contentOwner: Janice Kendall
products: SG_EXPERIENCEMANAGER/6.5/COMMUNITIES
topic-tags: administering
content-type: reference
role: Admin
exl-id: 4237085a-d70d-41de-975d-153f58336daa
solution: Experience Manager
feature: Communities
source-git-commit: 1f56c99980846400cfde8fa4e9a55e885bc2258d
workflow-type: tm+mt
source-wordcount: '1910'
ht-degree: 1%

---

# ユーザーとユーザーグループの管理 {#managing-users-and-user-groups}

## 概要 {#overview}

AEM Communitiesのパブリッシュ環境では、ユーザーは自己登録して自分のプロファイルを編集できます。 適切な権限が与えられると、次の場合もあります。

* コミュニティサイト内にサブコミュニティを作成します（[&#x200B; コミュニティグループ &#x200B;](creating-groups.md) を参照）。

* [&#x200B; 中程度 &#x200B;](moderation.md) ユーザー生成コンテンツ（UGC）。

* ブログ、カレンダー、QnA、フォーラムのエントリを作成する [&#x200B; 権限 &#x200B;](#privileged-members-group) を持つ。

パブリッシュ環境で登録されたユーザーは、オーサー環境の *ユーザー）と区別するために* 通常 *コミュニティメンバー* メンバー）と呼ばれます。

権限を付与するには、オーサー環境からコミュニティサイトを作成 [&#x200B; 作成 &#x200B;](sites-console.md) または変更 [&#x200B; する際に &#x200B;](#publish-group-roles) 動的に作成される [&#x200B; メンバー（ユーザー）グループの 1 つにメンバーを割り当てます &#x200B;](sites-console.md#modifying-site-properties) オーサー環境から作業している場合、メンバーは [&#x200B; トンネルサービス &#x200B;](#tunnel-service) を介してパブリッシュ環境から表示されます。

仕様上、パブリッシュ環境で作成されたメンバーとメンバーグループは、オーサー環境では表示できません。 オーサー環境で作成されたユーザーとユーザーグループは、同様にオーサー環境に留まるように設計されています。

オーサー環境のユーザーとパブリッシュ環境のメンバーが同じユーザーリストに属している場合（例えば、同じ LDAP ディレクトリから同期されている場合）、オーサー環境とパブリッシュ環境の両方で、同じ権限とグループメンバーシップを持つ同じユーザーとは見なされません。 メンバーとユーザーの役割は、必要に応じて、パブリッシュとオーサーで別々に設定する必要があります。

[&#x200B; パブリッシュファーム &#x200B;](topologies.md) の場合、1 つのパブリッシュインスタンスで行った登録と変更を他のパブリッシュインスタンスと同期して、他のパブリッシュインスタンスが同じユーザーデータにアクセスできるようにする必要があります。 詳しくは、[&#x200B; ユーザーの同期 &#x200B;](sync.md) を参照してください。この中には、[&#x200B; 次の場合に何が起こるかを説明する節が含まれ &#x200B;](sync.md#what-happens-when) います。

### 貢献度の制限 {#contribution-limits}

スパムから保護するために、メンバーがコンテンツを投稿する頻度を制限することができます。 また、新規登録された会員の投稿を自動的に制限することも可能です。

詳しくは、[&#x200B; メンバーの貢献度の制限 &#x200B;](limits.md) を参照してください。

### 動的に作成されたユーザーグループ {#dynamically-created-user-groups}

新しいコミュニティサイトを作成すると、オーサー環境（&lbrace; オーサーグループの役割 [&#128279;](#author-group-roles) を参照）またはパブリッシュ環境（&lbrace;2[Publishのグループの役割 &#x200B;](#publish-group-roles) を参照）でコミュニティサイトを管理するために必要な様々な管理機能に適した一意の ID （uid）と権限で、新しいユーザーグループが動的に作成されます。

グループの名前は、[&#x200B; コミュニティサイトの作成 &#x200B;](sites-console.md#step13asitetemplate) 時にサイトに指定された名前から生成されます。 一意の ID を使用すると、同じサーバー上にある類似した名前のコミュニティサイトとコミュニティグループの名前の競合を回避できます。

例えば、「Engage」というタイトルのサイトのサイト名が「*engage*」の場合、作成されるユーザーグループの 1 つは次のようになります。

* コミュニティ *Engage* メンバー

## オーサー環境 {#author-environment}

### トンネルサービス {#tunnel-service}

オーサー環境を使用して [&#x200B; サイトを作成 &#x200B;](sites-console.md)、[&#x200B; サイトプロパティを変更 &#x200B;](sites-console.md#modifying-site-properties) および [&#x200B; コミュニティメンバーとメンバーグループを管理 &#x200B;](members.md) する場合、パブリッシュ環境に登録されたユーザーとユーザーグループにアクセスする必要があります。

トンネルサービスは、作成者のレプリケーションエージェントを使用してこのアクセスを提供します。

* 詳しくは、デプロイメントページの [&#x200B; 設定手順 &#x200B;](deploy-communities.md#tunnel-service-on-author) を参照してください。

[&#x200B; コミュニティメンバーコンソールとグループコンソール &#x200B;](members.md) は、パブリッシュ環境にのみ登録されたユーザー（メンバー）とユーザーグループ（メンバーグループ）の管理のみを目的としています。

オーサー環境に登録されたユーザーおよびユーザーグループを管理するには、[&#x200B; セキュリティコンソール &#x200B;](../../help/sites-administering/security.md) を使用します

### 作成者グループの役割 {#author-group-roles}

| グループのメンバーの場合… | プライマリの役割 |
|---|---|
| 管理者 | 管理者グループは、コミュニティ管理者の能力とコミュニティ管理者グループを管理する能力をすべて持つシステム管理者で構成されます。 |
| コミュニティ管理者 | コミュニティ管理者グループは、自動的にすべてのコミュニティサイトおよびサイト上で作成されたすべてのコミュニティグループのメンバーになります。 コミュニティ管理者グループの最初のメンバーは、管理者グループです。 オーサー環境では、コミュニティ管理者は、コミュニティサイトの作成、サイトの管理、メンバーの管理（メンバーのコミュニティへの参加を禁止できます）、コンテンツの管理を行うことができます。 |
| コミュニティ &lt;*サイト名*> Sitecontentmanager | コミュニティサイトの Content Manager は、コミュニティサイトの従来のAEM オーサリング、コンテンツ作成およびページ変更を実行できます。 |
| なし | 匿名のサイト訪問者は、オーサー環境にアクセスできない場合があります。 |

### システム管理者 {#system-administrators}

administrators グループのメンバーは、オーサー環境とパブリッシュ環境の両方でAEM インストールの初期設定を実行できるシステム管理者です。

デモや開発の目的で、administrators グループには、ユーザー ID が *admin* でパスワードが *admin* のメンバーが含まれています。

実稼動環境の場合、デフォルトの管理者グループを変更する必要があります。

必ず [&#x200B; セキュリティチェックリスト &#x200B;](../../help/sites-administering/security-checklist.md) に従ってください。

## パブリッシュ環境 {#publish-environment}

### メンバーになる {#becoming-a-member}

パブリッシュ環境では、コミュニティサイトの [&#x200B; 設定 &#x200B;](sites-console.md#user-management) に応じて、サイト訪問者がコミュニティメンバーになる場合があります。

* コミュニティサイトがプライベート（クローズド）の場合：
   * 招待状による
   * 管理者のアクション

* コミュニティサイトが公開（オープン）されている場合：
   * セルフ登録
   * facebookおよびTwitterでのソーシャルログインによる

>[!NOTE]
>
>サイト訪問者が 1 つのオープンなコミュニティサイトのメンバーとして登録すると、同じパブリッシュ環境の他のオープンなコミュニティサイトのメンバーになります。

### Publish グループの役割 {#publish-group-roles}

| グループのメンバーの場合… | プライマリの役割 |
|---|---|
| コミュニティ &lt;*サイト名*> のメンバー | コミュニティサイトメンバーは登録ユーザーです。 ログイン、プロファイルの変更、オープンなコミュニティグループへの参加、コミュニティへのコンテンツの投稿、他のメンバーへのメッセージの送信、サイトのアクティビティのフォローを行うことができます。 |
| コミュニティ &lt;*サイト名*> モデレーター | コミュニティサイトのモデレーターは、コンテンツが投稿されたページで、モデレートコンソールを使用して一括で、またはコンテキスト内で UGC をモデレートできる、信頼されたコミュニティメンバーです。 |
| コミュニティ &lt;*サイト名*> &lt;*グループ名*> のメンバー | コミュニティグループメンバーとは、オープンなコミュニティグループに参加した、または閉じられたコミュニティグループに招待されたコミュニティメンバーです。 サイト内のそのコミュニティグループのメンバーの能力を持っています。 |
| コミュニティ &lt;*サイト名*> グループ管理者 | コミュニティ サイト グループ管理者は、コミュニティ サイト内のサブコミュニティ（グループ）の作成と管理に割り当てられる信頼されたコミュニティ メンバです。 コンテキスト内モデレートを提供する機能が含まれます。 |
| *特権メンバー・セキュリティ・グループ* | コンテンツの作成を制限するために手動で作成および管理されたユーザーグループ。 [&#x200B; 権限のあるメンバー・グループ &#x200B;](#privileged-members-group) を参照してください。 |
| なし | サイトを検出した匿名のサイト訪問者は、匿名アクセスを許可するコミュニティサイトを表示および検索できます。 コンテンツに参加して投稿するには、ユーザーが自己登録（許可されている場合）してコミュニティメンバーになる必要があります。 |

### Publish グループロールへのメンバーの割り当て {#assigning-members-to-publish-group-roles}

オーサー環境で [&#x200B; コミュニティサイトを作成 &#x200B;](sites-console.md) するとき、または [&#x200B; サイトプロパティを変更 &#x200B;](sites-console.md#modifying-site-properties) するとき、メンバーには、モデレーター、グループ管理者、リソース連絡先、権限のあるメンバーなど、パブリッシュ環境で実行される様々な役割が割り当てられる場合があります。

[&#x200B; トンネルサービスを有効にする &#x200B;](sync.md#accessingpublishusersfromauthor) と、割り当ての選択肢が、オーサーのユーザーではなく、パブリッシュのメンバーから提示されます。

選択したメンバーは自動的に [&#x200B; 適切なグループ &#x200B;](#publish-group-roles) に割り当てられ、そのメンバーシップはコミュニティ サイトが（再）公開されるときに含まれます。

### 権限を持つメンバーグループ {#privileged-members-group}

特権メンバーセキュリティグループの目的は、特定のコミュニティ機能のコンテンツの作成を、コミュニティサイトのメンバーの特権サブセットに制限することです。

権限のあるメンバーグループは、[&#x200B; コミュニティグループコンソール &#x200B;](members.md) を使用して作成および管理されるメンバーグループです。

特権メンバーグループを作成し、[&#x200B; トンネルサービスを有効 &#x200B;](sync.md#accessingpublishusersfromauthor) にした後、既存のコミュニティサイトの構造を [&#x200B; 変更 &#x200B;](sites-console.md#modify-structure) して、そのコミュニティ機能の構成を「特権メンバーを許可」に編集し、作成したグループを追加できます。

1 つ以上の特権メンバー・グループを指定できるコミュニティ機能は、次のとおりです。

* [&#x200B; ブログ機能 &#x200B;](functions.md#blog-function) – 新しい記事の作成を制限します。
* [&#x200B; カレンダー関数 &#x200B;](functions.md#calendar-function) – 新しいイベントの作成を制限します。
* [&#x200B; フォーラム機能 &#x200B;](functions.md#forum-function) – 新しいトピックの作成を制限します。
* [QnA 関数 &#x200B;](functions.md#qna-function) – 新しい質問の作成を制限します。

コミュニティ機能が保護されていない（権限のあるメンバーグループが割り当てられていない）場合、すべてのコミュニティサイトメンバーは、機能コンテンツ（記事、イベント、トピック、質問）を作成できます。

>[!NOTE]
>
>コミュニティサイトの権限を持つメンバーグループにユーザーを追加すると、そのコミュニティサイトのメンバーでもある場合にのみ、作成権限が付与されます。

## コミュニティメンバーの作成 {#creating-community-members}

### リポジトリの場所 {#repository-location}

特定の機能を正しく動作させるには、適切な権限を持つユーザーおよびユーザーグループを作成する必要があります。

`/home/users/community` でメンバーを作成すると、メンバーのプロファイルに読み取り権限を付与する適切な ACL を継承します。

同様に、カスタムコミュニティユーザーグループ（権限のあるメンバーグループなど）も `/home/groups/community` で作成する必要があります。

[&#x200B; コミュニティメンバーコンソールとグループコンソール &#x200B;](members.md) を使用して、これらのパスにユーザーとグループを作成します。

カスタムパスを指定するには、クラシックなセキュリティ UI が必要です（[https://&lt;server>:&lt;port>/useradmin](http://localhost:4503/useradmin) からアクセスできます）。

カスタムメンバーパスに読み取り権限を付与するには、すべてのパブリッシュインスタンスで、`/home/users/community` に類似した ACL を設定します。

```xml
<allow
  jcr:primaryType="rep:GrantACE"
  rep:principalName="everyone"
  rep:privileges="{Name}[jcr:read]" >
  <rep:restrictions
    jcr:primaryType="rep:Restrictions"
    rep:glob="*/profile*" />
</allow>
```

/home/groups/mycompany などのカスタムメンバーグループのパスに対する適切な権限を付与するには、すべてのパブリッシュインスタンスで `/home/groups/community` に類似した ACL を設定します。

```xml
<allow
  jcr:primaryType="rep:GrantACE"
  rep:principalName="community-administrators"
  rep:privileges="{Name}[jcr:read]"  />
```

### コンソール {#consoles}

オーサー環境でのみ使用できるコンソールは 4 つあります。

| コンソール | ツール，セキュリティ，ユーザー | ツール，セキュリティ，グループ | コミュニティ、メンバー | コミュニティ、グループ |
|----------|-----------------------|------------------------|------------------------------------------------------------|------------------------------------------------------------|
| 管理 | オーサーのユーザー | オーサー環境のユーザーグループ | 公開時のメンバー | 公開時のメンバーグループ |
| が必要 | 管理権限 | 管理権限 | 管理権限，トンネル サービス，公開ファームのユーザー同期 | 管理権限，トンネル サービス，公開ファームのユーザー同期 |

### コミュニティ管理者役割 {#community-administrators-role}

[&#x200B; オーサーグループの役割 &#x200B;](#author-group-roles) チャートに記載されているように、コミュニティ管理者グループのメンバーは、コミュニティサイトの作成、サイトの管理、メンバーの管理（メンバーのコミュニティへの参加を禁止できる）およびコンテンツの管理を行うことができます。

イネーブルメントマネージャーの役割にユーザーを作成して割り当てるのと同じ手順に従いますが、ユーザーの「グループ」タブで c `ommunity-administrators` グループを追加します。

### LDAP の統合 {#ldap-integration}

AEMでは、ユーザーの認証とユーザーアカウントの作成に LDAP を使用することができます。 詳しくは、[AEM 6 での LDAP の設定 &#x200B;](../../help/sites-administering/ldap-config.md) を参照してください。

コミュニティメンバーおよびメンバーグループに固有の設定の詳細を以下に示します。

1. 各AEM パブリッシュインスタンスに LDAP を設定します。
2. [LDAP Identity Provider](../../help/sites-administering/ldap-config.md#configuring-the-ldap-identity-provider)

   * 特別な手順はありません

3. [同期ハンドラー](../../help/sites-administering/ldap-config.md#configuring-the-synchronization-handler)

   * 次のプロパティを設定します。

      * **[!UICONTROL ユーザーの自動メンバーシップ]**: `community-<site name>-<uid>-members`
      * **[!UICONTROL User Path Prefix]**: `/community`
      * **[!UICONTROL Group Path Prefix]**: `/community`

4. [外部ログインモジュール](../../help/sites-administering/ldap-config.md#the-external-login-module)

   * 特別な指示なし

その結果、ユーザーはコミュニティサイトのメンバーグループに自動的に割り当てられ、リポジトリの場所は `/home/users/community` および `/home/groups/community` に割り当てられるので、ユーザーは相互のプロファイルを表示する適切な権限を継承します。

* `User auto membership` の値は、プロファイルの `givenName` （表示名）ではなく、`rep:authorizableId` プロパティである必要があります。

## AEM インスタンス間でのユーザーの同期 {#synchronizing-users-among-aem-instances}

[&#x200B; パブリッシュファーム &#x200B;](topologies.md) を使用する場合、ユーザーを最初に 1 つのインスタンスにインポートし、Sling がユーザーを他のパブリッシュインスタンスに配布する [&#x200B; ユーザー同期を有効にする &#x200B;](sync.md) ことで、各パブリッシュインスタンスのユーザーのパスが同じであることを確認します。

ユーザーグループをインポートする場合、各パブリッシュインスタンスのユーザーグループのパスが同じになるように、1 つのインスタンスにインポートしてから [&#x200B; パッケージを作成 &#x200B;](../../help/sites-administering/package-manager.md#creating-a-new-package) してエクスポートし、そのパッケージを他のすべてのパブリッシュインスタンスにインストールします。

ユーザー同期によるユーザーグループの同期は、今後のリリースで含まれる予定ですが、現在、ユーザー同期の実行時にはユーザーグループの *メンバーシップ* のみが同期されます。

## コミュニティグループについて {#about-community-groups}

グループについて説明する場合、2 つの異なるトピックがあります。

* **[コミュニティグループ](overview.md#communitygroups)**

  コミュニティグループは、コミュニティグループの作成をサポートするコミュニティサイトのパブリッシュ環境で作成できるサブコミュニティです。 コミュニティグループを作成すると、web サイトに追加されるページが増え、親のコミュニティサイトと同様に管理されます。 詳しくは、開発者向けの [&#x200B; コミュニティグループの初期設定 &#x200B;](essentials-groups.md) と、作成者向けの [&#x200B; コミュニティグループ &#x200B;](creating-groups.md) を参照してください。

* **[メンバーグループ](../../help/sites-administering/security.md)**

  メンバーグループは、メンバーが属する可能性のあるグループであり、グループ コンソールを使用して管理されます。 このページでの議論の多くは、メンバー団体に向けて行われている。 コミュニティサイト用に自動的に作成されたメンバーグループは、*`Community`* プレフィックスが付いているので、コミュニティグループと呼ぶ場合があります。したがって、ディスカッションのコンテキストを考慮する必要があります。
