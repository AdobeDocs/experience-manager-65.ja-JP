---
title: ユーザーとユーザーグループの管理
seo-title: Managing Users and User Groups
description: AEM Communities のユーザーは自己登録とプロファイルの編集をおこなうことができます
seo-description: Users of AEM Communities can self-register and edit their profiles
uuid: aeba424e-ea7e-4da5-b94f-ea8af4caa7d2
contentOwner: Janice Kendall
products: SG_EXPERIENCEMANAGER/6.5/COMMUNITIES
topic-tags: administering
content-type: reference
discoiquuid: 774c2553-b629-456b-afa7-5713490f4a0a
role: Admin
exl-id: 4237085a-d70d-41de-975d-153f58336daa
source-git-commit: 603518dbe3d842a08900ac40651919c55392b573
workflow-type: tm+mt
source-wordcount: '2168'
ht-degree: 51%

---

# ユーザーとユーザーグループの管理 {#managing-users-and-user-groups}

## 概要 {#overview}

AEM Communitiesのパブリッシュ環境では、ユーザーは自己登録とプロファイルの編集をおこなうことができます。 適切な権限を与えると、次のことも可能です。

* コミュニティサイト内にサブコミュニティを作成します ( [コミュニティグループ](creating-groups.md)) をクリックします。

* [モデレート](moderation.md) ユーザー生成コンテンツ (UGC)。

* Be [実施可能リソース](resources.md) 連絡先。

* Be [特権](#privileged-members-group) ブログ、カレンダー、Q&amp;A、フォーラムのエントリを作成する。

パブリッシュ環境で登録されたユーザーは、オーサー環境の&#x200B;*ユーザー*&#x200B;と区別するために、通常は&#x200B;*コミュニティメンバー（メンバー）*&#x200B;と呼ばれます。

メンバーに権限を付与するには、そのメンバーを、オーサー環境でコミュニティサイトを[作成](sites-console.md)または[変更](sites-console.md#modifying-site-properties)したときに動的に作成される[メンバー（ユーザー）グループ](#publish-group-roles)に割り当てます。オーサー環境から作業する場合、メンバーは [トンネルサービス](#tunnel-service).

設計上、パブリッシュ環境で作成したメンバーとメンバーグループは、オーサー環境には表示されません。 同様に、オーサー環境で作成されたユーザーとユーザーグループは、オーサー環境にとどまります。

オーサー環境のユーザーとパブリッシュ環境のメンバーが同じユーザーのリストを基にしている場合も（同じ LDAP ディレクトリから同期される場合など）、それらのユーザーは、オーサー環境とパブリッシュ環境の両方で同じ権限とグループメンバーシップを持つ同一のユーザーとは見なされません。メンバーとユーザーの役割は、必要に応じて、パブリッシュ環境とオーサー環境で個別に確立する必要があります。

の [パブリッシュファーム](topologies.md)を使用する場合、1 つのパブリッシュインスタンスでおこなわれた登録と変更を他のパブリッシュインスタンスと同期して、同じユーザーデータにアクセスできるようにする必要があります。 詳しくは、 [ユーザーの同期](sync.md)（を説明する節を含む） [何が起こるか…](sync.md#what-happens-when).

### 貢献度の制限 {#contribution-limits}

スパムから保護するために、メンバーによるコンテンツの投稿頻度を制限できます。また、新規登録会員の寄与を自動的に制限することも可能である。

詳しくは、[メンバーの貢献度の制限](limits.md)を参照してください。

### 動的に作成されるユーザーグループ {#dynamically-created-user-groups}

コミュニティサイトを作成すると、オーサー環境（[オーサーグループの役割](#author-group-roles)を参照）かパブリッシュ環境（[パブリッシュグループの役割](#publish-group-roles)を参照）のどちらかで、コミュニティサイトを管理するために必要な各種管理機能の適切な権限と一意の ID（uid）を持った新しいユーザーグループが動的に作成されます。

グループの名前は、[コミュニティサイトを作成](sites-console.md#step13asitetemplate)するときに指定した名前から生成されます。一意の ID を使用することで、同じサーバー上の同じ名前のコミュニティサイトとコミュニティグループに対する名前の競合を回避できます。

例えば、「We.Retail Engage」というタイトルのサイトに「*engage*」というサイト名を付けた場合、作成されるユーザーグループのうち 1 つは次のようになります。

* コミュニティ *エンゲージ* メンバー

## オーサー環境 {#author-environment}

### トンネルサービス {#tunnel-service}

オーサー環境を使用して [サイトの作成](sites-console.md), [サイトのプロパティを変更する](sites-console.md#modifying-site-properties) および [コミュニティメンバーとメンバーグループの管理](members.md)パブリッシュ環境に登録されているユーザーとユーザーグループにアクセスする必要があります。

トンネルサービスは、オーサー環境のレプリケーションエージェントを使用してこのアクセスを提供します。

* 詳しくは、 [設定手順](deploy-communities.md#tunnel-service-on-author) 」をクリックします。

この [コミュニティメンバーコンソールとグループコンソール](members.md) は、パブリッシュ環境でのみ登録されているユーザー（メンバー）とユーザーグループ（メンバーグループ）を管理する目的でのみ使用します。

オーサー環境で登録されたユーザーとユーザーグループを管理するには、[セキュリティコンソール](../../help/sites-administering/security.md)を使用します。

### オーサーグループの役割 {#author-group-roles}

| メンバーが所属するグループ | 主な役割 |
|---|---|
| 管理者 | 管理者グループは、コミュニティ管理者のすべての能力を持つシステム管理者と、コミュニティ管理者グループを管理する機能で構成されます。 |
| コミュニティ管理者 | コミュニティ管理者グループは、自動的にすべてのコミュニティサイトと、そのサイトで作成されたすべてのコミュニティグループのメンバーになります。コミュニティ管理者グループの初期メンバーは、管理者グループです。オーサー環境で、コミュニティ管理者はコミュニティサイトの作成、サイトの管理、メンバーの管理（メンバーのコミュニティの使用を禁止することが可能）およびコンテンツのモデレートを実行できます。 |
| コミュニティ &lt;*サイト名*> Sitecontentmanager | コミュニティサイトコンテンツマネージャーは、従来の AEM オーサリング、コンテンツ作成およびコミュニティサイトのページの変更を実行できます。 |
| コミュニティイネーブルメントマネージャー | コミュニティイネーブルメントマネージャーグループは、コミュニティサイトのイネーブルメントマネージャーグループの管理者の割り当てに使用できるユーザーで構成されます。 |
| コミュニティ &lt;*サイト名* > Siteenablementmanagers | コミュニティサイトイネーブルメントマネージャーグループは、コミュニティサイトのイネーブルメントを管理するために割り当てられたユーザーで構成されます [リソース](resources.md). |
| なし | 匿名のサイト訪問者はオーサー環境にアクセスできません。 |

### システム管理者 {#system-administrators}

管理者グループのメンバーは、オーサー環境とパブリッシュ環境の両方で AEM のインストールの初期設定を実行できるシステム管理者です。

デモ用および開発用に、管理者グループにはユーザー ID がのメンバーが存在します *admin* パスワードは *admin*.

実稼動環境では、デフォルトの管理者グループを修正する必要があります。

[セキュリティチェックリスト](../../help/sites-administering/security-checklist.md)に従っているかを確認してください。

## パブリッシュ環境 {#publish-environment}

### メンバーになる {#becoming-a-member}

パブリッシュ環境で、 [設定](sites-console.md#user-management) コミュニティサイトの訪問者は、コミュニティメンバーになることができます。

* コミュニティサイトが非公開（クローズ済み）の場合：
   * 招待による
   * 管理者のアクション別

* コミュニティサイトが公開（オープン）の場合：
   * 自己登録
   * facebookとTwitterでのソーシャルログイン

>[!NOTE]
>
>サイト訪問者が 1 つのオープンコミュニティサイトに登録すると、その訪問者は自動的に、同じパブリッシュ環境上の他のオープンコミュニティサイトのメンバーになります。

### パブリッシュグループの役割 {#publish-group-roles}

| メンバーが所属するグループ | 主な役割 |
|---|---|
| コミュニティ &lt;*サイト名*> メンバー | コミュニティサイトメンバーは、登録済みのユーザーです。ユーザーは、ログイン、プロファイルの変更、オープンなコミュニティグループへの参加、コミュニティへのコンテンツの投稿、他のメンバーへのメッセージの送信、サイトアクティビティのフォローをおこなうことができます。 |
| コミュニティ &lt;*サイト名*/モデレーター | コミュニティサイトモデレーターは、モデレートコンソールを使用した UGC の一括モデレートや、コンテンツが投稿されたページでのコンテキスト内モデレートを実行できる、信頼されているコミュニティメンバーです。 |
| コミュニティ &lt;*サイト名*> &lt;*グループ名*> メンバー | コミュニティグループメンバーは、オープンコミュニティグループに参加したコミュニティメンバーか、クローズドコミュニティグループに招待されたコミュニティメンバーのどちらかです。このメンバーは、サイト内のそのコミュニティグループのメンバーの能力を持ちます。 |
| コミュニティ &lt;*サイト名*> グループ管理者 | コミュニティサイトグループ管理者は、コミュニティサイト内のサブコミュニティ（グループ）を作成および管理する権限を持った、信頼されているコミュニティメンバーです。コンテキスト内モデレートを提供する機能が含まれます。 |
| 権限を持つメンバーのセキュリティグループ&#x200B;** | コンテンツ作成を制限するために、手動で作成および保守されるユーザーグループです。[権限を持つメンバーグループ](#privileged-members-group)を参照してください。 |
| なし | サイトを発見した匿名のサイト訪問者は、匿名アクセスが許可されているコミュニティサイトを表示および検索できます。コンテンツに参加し投稿するには、ユーザーが自己登録（許可されている場合）し、コミュニティメンバーになる必要があります。 |

### パブリッシュグループの役割へのメンバーの割り当て {#assigning-members-to-publish-group-roles}

条件 [コミュニティサイトの作成](sites-console.md) オーサー環境で、または [サイトのプロパティを変更する](sites-console.md#modifying-site-properties) メンバーには、モデレーター、グループ管理者、リソース連絡先、権限を持つメンバーなど、パブリッシュ環境で実行される様々な役割を割り当てることができます。

[トンネルサービスの有効化](sync.md#accessingpublishusersfromauthor) 結果として、割り当ての選択肢が、オーサーのユーザーではなく、パブリッシュのメンバーから表示されます。

選択したメンバーは、 [適切なグループ](#publish-group-roles) また、コミュニティサイトが（再）公開されると、そのメンバーシップが含まれます。

### 権限を持つメンバーグループ {#privileged-members-group}

権限を持つメンバーのセキュリティグループの目的は、特定のコミュニティ機能のコンテンツの作成を、権限を持つコミュニティサイトの一部のメンバーだけに限定することです。

権限を持つメンバーグループは、[コミュニティグループコンソール](members.md)を使用して作成および管理します。

権限を持つメンバーグループを作成し、さらに[トンネルサービスを有効](sync.md#accessingpublishusersfromauthor)にしたら、既存のコミュニティサイトの構造を[変更](sites-console.md#modify-structure)してコミュニティ機能の設定を編集し、「権限を持つメンバーを許可」をオンにし、作成済みのグループを追加できます。

以下のコミュニティ機能では、権限を持つメンバーグループを 1 つ以上指定できます。

* [ブログ機能](functions.md#blog-function)  — 新しい記事の作成を制限します。
* [カレンダー関数](functions.md#calendar-function)  — 新しいイベントの作成を制限します。
* [フォーラム機能](functions.md#forum-function)  — 新規トピックの作成を制限します。
* [Q&amp;A 機能](functions.md#qna-function)  — 新しい質問の作成を制限します。

コミュニティ機能にセキュリティ制限がない（権限を持つメンバーグループが割り当てられていない）場合は、すべてのコミュニティサイトメンバーが、その機能のコンテンツ（記事、イベント、トピック、質問）を作成できます。

>[!NOTE]
>
>あるコミュニティサイトで、権限を持つメンバーグループにユーザーを追加しても、そのユーザーが同じコミュニティサイトのメンバーでもある場合は、そのユーザーに対して作成権限が与えられるだけです。

## コミュニティメンバーの作成 {#creating-community-members}

### リポジトリの場所 {#repository-location}

特定の機能を正しく動作させるためには、適切な権限を持つユーザーとユーザーグループを作成する必要があります。

メンバーが `/home/users/community`を使用する場合、メンバーのプロファイルに読み取り権限を付与する適切な ACL を継承します。

同様に、カスタムコミュニティユーザーグループ（権限を持つメンバーグループなど）を `/home/groups/community`.

[コミュニティメンバーコンソールとグループコンソール](members.md)を使用すると、ユーザーとグループがそれぞれのパスに作成されます。

カスタムパスを指定するには、クラシックセキュリティ UI を使用する必要があります。この UI には、次の場所からアクセスできます。 [https://&lt;server>:&lt;port>/useradmin](http://localhost:4503/useradmin).

カスタムメンバーパスの読み取り権限を付与するには、すべてのパブリッシュインスタンスで、ACL を `/home/users/community`:

```xml
<allow
  jcr:primaryType="rep:GrantACE"
  rep:principalName="everyone"
  rep:privileges="{Name}[jcr:read]" >
  <rep:restrictions
    jcr:primaryType="rep:Restrictions"
    rep:glob="*/profile*" />
</allow>
```

/home/groups/mycompany などのカスタムメンバーグループパスに対する適切な権限を付与するには、すべてのパブリッシュインスタンスで、ACL を次のように設定します。 `/home/groups/community`:

```xml
<allow
  jcr:primaryType="rep:GrantACE"
  rep:principalName="community-administrators"
  rep:privileges="{Name}[jcr:read]"  />
```

### コンソール {#consoles}

オーサー環境でのみ使用できる、以下の 4 つの独立したコンソールがあります。

| console | ツール／セキュリティ／ユーザー | ツール／セキュリティ／グループ | コミュニティ／メンバー | コミュニティ／グループ |
|----------|-----------------------|------------------------|------------------------------------------------------------|------------------------------------------------------------|
| 管理対象 | オーサー環境のユーザー | オーサー環境のユーザーグループ | パブリッシュ環境のメンバー | パブリッシュ環境のメンバーグループ |
| 必須 | 管理者権限 | 管理者権限 | 管理者権限、トンネルサービス、ユーザーの同期（パブリッシュファームの場合） | 管理者権限、トンネルサービス、ユーザーの同期（パブリッシュファームの場合） |

### コミュニティイネーブルメントマネージャーの役割 {#community-enablement-manager-role}

[イネーブルメントコミュニティ](overview.md#enablement-community)では、メンバーごとに関連するコストが発生することから、通常は、サイト訪問者による自己登録機能は許可されません。イネーブルメント学習者とリソースは、 [役割](#author-group-roles) / `enablement manager` [サイト作成中](sites-console.md#enablement) 作成者（グループのメンバーとして追加） `Community <site-name> Siteenablementmanagers`) をクリックします。 この `enablement manager` は、 [学習リソースの割り当て](resources.md) 作成者のコミュニティメンバーに対して

グローバルのメンバーであるユーザーのみ `Community Enablement Managers` グループを `enablement manager` 特定のコミュニティサイト用。

の役割を割り当てることのできるユーザーを作成するには、以下を実行します。 `Community Site Enablement Manager`では、クラシック UI のセキュリティコンソールを使用してパスを指定します。

オーサーインスタンスの場合：

1. 管理者権限でサインインし、クラシック UI セキュリティコンソールを参照します。

   例： [http://localhost:4502/useradmin](http://localhost:4502/useradmin)

2. 「編集」メニューから、「 **[!UICONTROL ユーザーを作成]**.
3. 次の項目に入力： `Create User` ダイアログ。
   * パスは次の条件を満たす必要があります `/home/users/community`.
4. 「**[!UICONTROL 作成]**」を選択します。

   ![create-community-user](assets/create-community-user.png)

* 左側のウィンドウで、新しく作成したユーザーを検索し、「 」を選択して右側のウィンドウに表示します。

   ![community-user](assets/view-community-user.png)

左側のウィンドウで、

1. 検索ボックスをクリアし、「 」を選択します。 **[!UICONTROL ユーザーを非表示]**.
2. 場所を特定してドラッグ `community-enablementmanagers` から **[!UICONTROL グループ]** タブをクリックします。

   ![assign-group](assets/assign-group.png)

### コミュニティ管理者の役割 {#community-administrators-role}

[オーサーグループの役割](#author-group-roles)の表に示したとおり、コミュニティ管理者グループのメンバーは、コミュニティサイトの作成、サイトの管理、メンバーの管理（メンバーのコミュニティの使用を禁止できる）、コンテンツのモデレートをおこなうことができます。

ユーザーを作成し、の役割に割り当てるのと同じ手順に従います。 [実施可能マネージャー](#communitysiteenablementmanagerrole)を追加します。 `ommunity-administrators` 」グループの下に表示されます。

### LDAP の統合 {#ldap-integration}

AEM は、ユーザーの認証およびユーザーアカウントの作成で LDAP の使用をサポートします。詳しくは、 [AEM 6 での LDAP の設定](../../help/sites-administering/ldap-config.md).

コミュニティメンバーおよびメンバーグループ固有の設定の詳細の一部を次に示します。

1. 各 LDAP パブリッシュインスタンスに対してAEMを設定します。
2. [LDAP ID プロバイダー](../../help/sites-administering/ldap-config.md#configuring-the-ldap-identity-provider)

   * 特別な指示はありません

3. [同期ハンドラ](../../help/sites-administering/ldap-config.md#configuring-the-synchronization-handler)

   * 次のプロパティを設定します。

      * **[!UICONTROL User auto membership]**: `community-<site name>-<uid>-members`
      * **[!UICONTROL User Path Prefix]**: `/community`
      * **[!UICONTROL Group Path Prefix]**: `/community`

4. [外部ログインモジュール](../../help/sites-administering/ldap-config.md#the-external-login-module)

   * 特別な指示はありません。

その結果、ユーザーはコミュニティサイトのメンバーグループに自動的に割り当てられ、リポジトリの場所は次のようになります。 `/home/users/community` および `/home/groups/community`を継承し、相互のプロファイルを確認するための適切な権限を継承します。

* この `User auto membership` 値は `rep:authorizableId` プロパティ（ではない） `givenName` （表示名）をプロファイルから削除します。

## AEM インスタンス間のユーザーの同期 {#synchronizing-users-among-aem-instances}

[パブリッシュファーム](topologies.md)を使用する場合は、まず 1 つのインスタンスにユーザーを読み込みます。続いて[ユーザーの同期を有効](sync.md)にし、ユーザーを Sling で他のパブリッシュインスタンスに配信することによって、各パブリッシュインスタンスで各ユーザーのパスが同じになるようにします。

ユーザーグループを読み込む場合、各パブリッシュインスタンスでユーザーグループのパスが同じになるようにするには、1 つのインスタンスに読み込んでから、エクスポート用の[パッケージを作成](../../help/sites-administering/package-manager.md#creating-a-new-package)し、そのパッケージを他のすべてのパブリッシュインスタンスにインストールします。

現在は、ユーザーの同期を実行すると、ユーザーグループの&#x200B;*メンバーシップ*&#x200B;だけが同期されます。ユーザーの同期によるユーザーグループの同期は、今後のリリースで搭載されます。

## コミュニティグループについて {#about-community-groups}

グループに関しては、以下の 2 種類のトピックがあります。

* **[コミュニティグループ](overview.md#communitygroups)**

   コミュニティグループは、コミュニティグループの作成をサポートするコミュニティサイトのパブリッシュ環境で作成できるサブコミュニティです。 コミュニティグループを作成すると、Web サイトに追加されるページが増え、親コミュニティサイトと同様の方法で管理されます。 詳しくは、 [コミュニティグループの基本事項](essentials-groups.md) 開発者向け [コミュニティグループ](creating-groups.md) 作成者向け

* **[メンバーグループ](../../help/sites-administering/security.md)**

   メンバーグループは、メンバーが属するグループで、グループコンソールを通じて管理されます。 このページでの議論の多くは、メンバーグループに費やされています。 コミュニティサイト用に自動的に作成されたメンバーグループ。このグループの先頭には *`Community`*&#x200B;をコミュニティグループと呼ぶこともできるので、ディスカッションのコンテキストを考慮する必要があります。
