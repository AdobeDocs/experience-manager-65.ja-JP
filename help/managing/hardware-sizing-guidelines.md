---
title: ハードウェアのサイジングのガイドライン
description: これらのサイジングガイドラインは、AEMプロジェクトのデプロイに必要なハードウェアリソースの概算を提供します。
contentOwner: msm-service
products: SG_EXPERIENCEMANAGER/6.5/MANAGING
topic-tags: managing
content-type: reference
docset: aem65
exl-id: 5837ef4f-d4e0-49d7-a671-87d5547e0d98
source-git-commit: 49688c1e64038ff5fde617e52e1c14878e3191e5
workflow-type: tm+mt
source-wordcount: '2798'
ht-degree: 35%

---

# ハードウェアのサイジングのガイドライン{#hardware-sizing-guidelines}

これらのサイジングガイドラインは、AEMプロジェクトのデプロイに必要なハードウェアリソースの概算を提供します。 サイズの予測は、プロジェクトのアーキテクチャ、ソリューションの複雑さ、予想されるトラフィック、プロジェクト要件に応じて異なります。 このガイドを使用すると、具体的なソリューションに必要なハードウェアを特定したり、ハードウェア要件の上限と下限を見積もることができます。

基本的な考慮事項を以下に示します（以下の順序で考慮します）。

* **ネットワーク速度**

   * ネットワーク遅延
   * 利用可能な帯域幅

* **計算速度**

   * キャッシュ効率
   * 予想されるトラフィック
   * テンプレート、アプリケーション、コンポーネントの複雑さ
   * 同時作成者
   * オーサリング操作の複雑さ（シンプルなコンテンツ編集、MSM ロールアウトなど）

* **I/O パフォーマンス**

   * ファイルまたはデータベースストレージのパフォーマンスと効率

* **HDD**

   * リポジトリサイズの 2 倍または 3 倍

* **メモリ**

   * Web サイトのサイズ（コンテンツオブジェクト、ページ、ユーザーの数）
   * 同時にアクティブなユーザー／セッションの数

## アーキテクチャ {#architecture}

一般的なAEM設定は、オーサー環境とパブリッシュ環境で構成されます。 これらの環境では、基になるハードウェアのサイズとシステム構成に関する要件が異なります。 両方の環境での詳細な考慮事項については、[オーサー環境](/help/managing/hardware-sizing-guidelines.md#author-environment-specific-calculations)と[パブリッシュ環境](/help/managing/hardware-sizing-guidelines.md#publish-environment-specific-calculations)の各節で説明します。

通常のプロジェクト設定では、次のようないくつかの環境でプロジェクトのフェーズを分類します。

* **開発環境**
新しい機能の開発や重要な変更を行うために使用します。ベストプラクティスは、開発者ごとに開発環境（個人用システムにローカルインストール）を使用して作業することです。

* **オーサーテスト環境**
変更を検証するために使用します。テスト環境の数は、プロジェクトの要件によって異なります（個別の QA 用、統合テスト用、ユーザー受け入れテスト用など）。

* **パブリッシュテスト環境**
主にソーシャルコラボレーションのユースケースをテストしたり、オーサーインスタンスと複数のパブリッシュインスタンス間のインタラクションをテストしたりするために使用します。

* **オーサー実稼動環境**
作成者がコンテンツを編集するために使用します。

* **パブリッシュ実稼動環境**
公開済みコンテンツを提供するために使用します。

また、AEMとアプリケーションサーバーを実行するシングルサーバーシステムから、マルチサーバーのマルチ CPU クラスターインスタンスの高度な拡張セットまで、環境は様々です。 Adobeでは、実稼動システムごとに別のコンピュータを使用し、これらのコンピュータで他のアプリケーションを実行しないことをお勧めします。

## 一般的なハードウェアのサイズ設定に関する考慮事項 {#generic-hardware-sizing-considerations}

以下の節では、様々な考慮事項を考慮して、ハードウェア要件の計算方法に関するガイダンスを提供します。 大規模なシステムの場合、Adobeでは、参照設定に対して一連のシンプルな社内ベンチマークテストを実行することをお勧めします。

特定のプロジェクトに対してベンチマークテストを行う場合は、基本的な作業として、まずパフォーマンスの最適化を実行します。必ず [パフォーマンスの最適化に関するドキュメント](/help/sites-deploying/configuring-performance.md) ベンチマークテストを実行し、その結果をハードウェアのサイズ設定の計算に使用する前に。

高度な使用例のハードウェアのサイジング要件は、プロジェクトの詳細なパフォーマンス評価に基づく必要があります。 例外的なハードウェアリソースを必要とする高度なユースケースの特徴は、次の組み合わせです。

* コンテンツのペイロードが大きく、スループットが高い
* カスタマイズされたコード、カスタムワークフロー、またはサードパーティのソフトウェアライブラリの広範な使用
* サポートされていない外部システムとの統合

### ディスク容量／ハードドライブ {#disk-space-hard-drive}

必要なディスク容量は、Web アプリケーションのボリュームとタイプの両方によって大きく異なります。 計算には次の情報が含まれます。

* ページ、アセット、およびその他のリポジトリに保存されているエンティティ（ワークフロー、プロファイルなど）の数とサイズ。
* コンテンツ変更の推定頻度、したがってコンテンツバージョンの作成
* 生成される DAM アセットレンディションのボリューム
* 時間の経過と共にコンテンツが全体的に成長していくこと

オンライン、オフライン、リビジョンクリーンアップ中、ディスク領域は継続的に監視されます。 使用可能なディスク領域が重大な値を下回った場合、プロセスはキャンセルされます。 臨界値とは、リポジトリのその時点でのディスクフットプリントの 25%であり、変更はできません。Adobeでは、予想される増加量を含め、リポジトリサイズの 2 倍または 3 倍以上のディスクのサイズ設定をお勧めします。

データの冗長性を確保するために、独立したディスク（RAID、RAID10 など）の冗長アレイのセットアップを検討します。

>[!NOTE]
>
>本番インスタンスの一時ディレクトリには、6 GB 以上の空き容量が必要です。

#### 仮想化 {#virtualization}

AEMは仮想化環境で適切に動作しますが、物理ハードウェアとは直接同等にはならない要因が CPU や I/O など存在する場合があります。 通常、I/O 速度を高くする（一般的に）ことが重要な要因です。 必要なリソースを正確に把握するには、環境のベンチマークをおこなう必要があります。

#### AEMインスタンスの並列化 {#parallelization-of-aem-instances}

**フェイルセーフ**

フェールセーフ web サイトは、少なくとも 2 つの別々のシステムにデプロイします。1 つのシステムが故障した場合、別のシステムがシステムを引き継ぎ、システム障害を補うことができます。

**システムリソースのスケーラビリティ**

すべてのシステムを実行しながらでも、コンピューターのパフォーマンスを向上することができます。関係は技術環境に大きく依存するので、追加のパフォーマンスは必ずしもクラスターノード数と一定ではありません。 詳しくは、 [クラスターのドキュメント](/help/sites-deploying/recommended-deploys.md) を参照してください。

必要なクラスターノード数の概算は、特定の Web プロジェクトの基本要件と具体的な使用例に基づいて決定されます。

* フェイルセーフ性の観点から、すべての環境に対して、クラスタノードの回復に要する時間に基づいて、重大な障害の程度と、障害の補償時間を決定する必要があります。
* スケーラビリティの面から考えると、基本的には書き込み操作数が最も重要です。オーサー環境の場合は[同時に操作している作成者](/help/managing/hardware-sizing-guidelines.md#authors-working-in-parallel)を、パブリッシュ環境の場合は[ソーシャルコラボレーション](/help/managing/hardware-sizing-guidelines.md#socialcollaborationspecificconsiderations)を参照してください。読み取り操作のみを行うためにシステムにアクセスする場合は、操作を負荷分散することができます。詳しくは、[Dispatcher](https://experienceleague.adobe.com/docs/experience-manager-dispatcher/using/dispatcher.html?lang=ja) を参照してください。

## オーサー環境固有の計算 {#author-environment-specific-calculations}

ベンチマークのために、Adobeはスタンドアロンのオーサーインスタンス用にいくつかのベンチマークテストを開発しました。

* **ベンチマークテスト 1**
同じような性質を持つ既存の 300 ページを負荷のベースにして、ユーザーが単純なページ作成を行った場合の負荷プロファイルの最大スループットを計算します。実行した手順は、サイトへのログイン、SWF と画像／テキストを使用したページの作成、タグクラウドの追加、ページのアクティベーションです。

   * **結果**
前述のような単純なページ作成作業を 1 個のトランザクションと見なした場合、最大スループット（1 時間あたりのトランザクション数）は 1730 となりました。

* **ベンチマークテスト 2**
新規ページの作成（10 ％）、既存ページの変更（80 ％）、およびページの作成と変更の連続操作（10 ％）の混合を負荷プロファイルとして、その最大スループットを計算します。ページの複雑さは、ベンチマークテスト 1 のプロファイルの複雑さと同じです。 ページの基本的な変更は、画像を追加し、テキストコンテンツを変更することでおこなわれます。 この練習は、ベンチマークテスト 1 で定義したのと同じ複雑さの 300 ページの基本負荷の上で行われました。

   * **結果**
このような混合操作シナリオの最大スループット（1 時間あたりのトランザクション数）は 3252 となりました。

>[!NOTE]
>
>スループット率は、負荷プロファイル内のトランザクションタイプを区別しません。 スループットの測定に使用されるアプローチでは、各トランザクションタイプの固定の割合がワークロードに含まれます。

上記の 2 つのテストでは、操作のタイプに応じてスループットが変化することを明確に示しています。 環境上のアクティビティを、システムのサイズ設定の基礎として使用します。 変更などの集中的なアクションの数が少ないと、スループットが向上します（これはより一般的です）。

### キャッシュ {#caching}

オーサー環境では、通常、キャッシングの効率が大幅に低下します。これは、web サイトでは変更が頻繁に行われ、またコンテンツが高度にインタラクティブでパーソナライズされているからです。Dispatcher を使用して、AEMライブラリ、JavaScript、CSS ファイルおよびレイアウト画像をキャッシュできます。 これにより、作成プロセスの一部の側面が高速化されます。これらのリソースでブラウザーのキャッシュのヘッダーも設定するように Web サーバーを設定すると、HTTP リクエストの数が減り、作成者が経験するシステムの応答性が向上します。

### 並行作業を行う作成者 {#authors-working-in-parallel}

オーサー環境では、並行して作業するオーサーの数と、そのインタラクションがシステムに追加する負荷が、主な制限要因となります。 したがって、Adobeでは、データの共有スループットに基づいてシステムを拡張することをお勧めします。

このようなシナリオでは、Adobeは、オーサーインスタンスの 2 つのノードの共有なしクラスターでベンチマークテストを実行します。

* **ベンチマークテスト 1a** 
2 つのオーサーインスタンスからなるアクティブ-アクティブ構成のシェアードナッシングクラスターで、すべて類似の性質を持つ 300 個の既存ページを基本負荷として、ユーザーが単純なページ作成作業を行うという負荷プロファイルの最大スループットを計算します。

   * **結果**
前述のような単純なページ作成作業を 1 件のトランザクションと見なした場合、最大スループット（1 時間あたりのトランザクション数）は 2016 となりました。スタンドアロンのオーサーインスタンスに対して同じベンチマークテストを実行した場合と比較して、約 16 ％増加しています。

* **ベンチマークテスト 2b** 
2 つのオーサーインスタンスからなるアクティブ-アクティブ構成のシェアードナッシングクラスターで、負荷プロファイルに新規ページの作成（10 ％）、既存ページの変更（80 ％）、およびページの作成と変更の連続操作（10 ％）が混在する際の最大スループットを計算します。ページの複雑さは、ベンチマークテスト 1 のプロファイルの複雑さと同じです。 ページの基本的な変更は、画像を追加し、テキストコンテンツを変更することでおこなわれます。 この練習は、ベンチマークテスト 1 で定義したのと同じ複雑さの 300 ページの基本負荷の上で実行されました。

   * **結果**
このような混合操作シナリオの最大スループット（1 時間あたりのトランザクション数）は 6288 となりました。スタンドアロンのオーサーインスタンスに対して同じベンチマークテストを実行した場合と比較して、約 93 ％増加しています。

>[!NOTE]
>
>スループット率は、負荷プロファイル内のトランザクションタイプを区別しません。 スループットの測定に使用されるアプローチでは、各トランザクションタイプの固定の割合がワークロードに含まれます。

上記の 2 つのテストでは、AEMで基本的な編集操作を実行する作成者に対してAEMの規模が適切に拡大されることが明らかになっています。 一般に、AEMは、読み取り操作のスケーリングに最も効果的です。

一般的な Web サイトでは、ほとんどのオーサリングはプロジェクトフェーズでおこなわれます。 Web サイトが公開されると、並行して作業している作成者の数は通常、低い（運用モード）平均に減少します。

オーサー環境に必要なコンピューター（CPU）の台数は次のように計算できます。

`n = numberOfParallelAuthors / 30`

この式は、作成者がAEMで基本操作を実行する際の CPU のスケーリングに関する一般的なガイドラインとして役立ちます。 システムとアプリケーションが最適化されていることを前提としています。 ただし、MSM や Assets などの高度な機能では、数式は正しく機能しません（以下の節を参照）。

関連トピック [並列化](/help/managing/hardware-sizing-guidelines.md#parallelization-of-aem-instances) および [パフォーマンスの最適化](/help/sites-deploying/configuring-performance.md).

### ハードウェアRecommendations {#hardware-recommendations}

通常は、パブリッシュ環境に推奨されるハードウェアと同じハードウェアをオーサー環境で使用できます。 通常、オーサリングシステムでは Web サイトのトラフィックははるかに少なくなりますが、キャッシュの効率も低くなります。 ただし、ここでの基本的な要因は、並行して作業を行う作成者の数と、システムに対して行われるアクションのタイプです。 一般に、読み取り操作の拡大/縮小には、（オーサー環境の）AEMクラスタリングが最も効果的です。つまり、AEMクラスターは、基本的な編集操作を実行する作成者と共に拡大/縮小されます。

Adobe時のベンチマークテストは、Hewlett-Packard ProLiant DL380 G5 ハードウェアプラットフォーム上で実行される Red Hat® 5.5 オペレーティングシステムを使用して、次の設定で行われました。

* 3.00 GHz で 2 基のクアッドコア Intel Xeon® X5450 CPU を搭載
* 8 GB RAM
* Broadcom NetXtreme II BCM5708 ギガビットイーサネット
* HP Smart Array RAID Controller、256 MB キャッシュ
* 146 GB の 10,000 RPM SAS ディスクを 2 台（RAID0 ストライプセットとして構成）
* SPEC CINT2006 Rate ベンチマークスコアは 110 です。

AEMインスタンスが実行されていた際の最小ヒープサイズは 256M、最大ヒープサイズは 1024M でした。

## 環境固有の計算を公開する {#publish-environment-specific-calculations}

### キャッシュの効率とトラフィック {#caching-efficiency-and-traffic}

キャッシュの効率は、Web サイトの速度にとって重要です。 次の表に、最適化されたAEMシステムが、Dispatcher などのリバースプロキシを使用して処理できる 1 秒あたりのページ数を示します。

| キャッシュ率 | ページ/秒（ピーク） | 1 日あたり 100 万ページ（平均） |
|---|---|---|
| 100％ | 1000 ～ 2000 | 35 ～ 70 |
| 99％ | 910 | 32 |
| 95％ | 690 | 25 |
| 90％ | 520 | 18 |
| 60% | 220 | 8 |
| 0% | 100 | 3.5 |

>[!CAUTION]
>
>免責事項：番号は、デフォルトのハードウェア設定に基づいており、使用する特定のハードウェアによって異なる場合があります。

キャッシュ率とは、AEMにアクセスしなくても Dispatcher が返すことのできるページの割合です。 100%は、Dispatcher がすべてのリクエストに回答することを示し、0%はAEMがすべてのページを計算することを意味します。

### テンプレートとアプリケーションの複雑さ {#complexity-of-templates-and-applications}

複雑なテンプレートを使用する場合、AEMはページのレンダリングにより多くの時間が必要になります。 キャッシュから取得したページはこの影響を受けませんが、全体的な応答時間を考慮する場合、ページサイズは依然として重要です。 複雑なページのレンダリングは、単純なページのレンダリングよりも 10 倍も簡単に時間がかかる場合があります。

### 数式 {#formula}

次の式を使用して、AEM ソリューションの全体的な複雑さを計算で推定できます。

`complexity = applicationComplexity + ((1-cacheRatio) * templateComplexity)`

この複雑さに基づいて、パブリッシュ環境で必要となるサーバー数（または CPU コア数）を次のように求めることができます。

`n = (traffic * complexity / 1000 ) * activations`

この方程式の変数は、次のとおりです。

<table>
 <tbody>
  <tr>
   <td>トラフィック</td>
   <td>予想される 1 秒あたりのピークトラフィック。これは、1 日あたりのページヒット数を 35,000 で割った値と見積もることができます。</td>
  </tr>
  <tr>
   <td>applicationComplexity</td>
   <td><p>単純なアプリケーションには 1、複雑なアプリケーションには 2、または次の範囲内の値を使用します。</p>
    <ul>
     <li>1 - 完全に匿名のコンテンツ指向のサイト</li>
     <li>1.1 - 完全に匿名のコンテンツ指向のサイト。クライアントサイド／ターゲットのパーソナライズゼーションに対応。</li>
     <li>1.5 - 匿名セクションとログインセクションの両方で構成される、コンテンツ指向のサイト。クライアントサイド／ターゲットのパーソナライゼーションに対応。</li>
     <li>1.7 - 匿名セクションとログインセクションの両方で構成される、コンテンツ指向のサイト。クライアントサイド／ターゲットのパーソナライゼーションに対応。一部でユーザー生成コンテンツを使用。</li>
     <li>2 — サイト全体でログインが必要な場所。ユーザー生成コンテンツと様々なパーソナライゼーション手法を幅広く使用します。</li>
    </ul> </td>
  </tr>
  <tr>
   <td>cacheRatio</td>
   <td>Dispatcher キャッシュから取得されるページの割合。 すべてのページがキャッシュから取得される場合は 1 を使用し、すべてのページがAEMで計算される場合は 0 を使用します。</td>
  </tr>
  <tr>
   <td>templateComplexity</td>
   <td>1 ～ 10 の値を使用して、テンプレートの複雑さを指定します。 数値が大きいほど、より複雑なテンプレートが示されます。ページあたりのコンポーネントの平均数が 10 のサイトの場合は値 1 を使用し、ページの平均数が 40 のコンポーネントの場合は値 5 を使用し、10 を超えるコンポーネントの平均数を使用します。</td>
  </tr>
  <tr>
   <td>アクティベーション</td>
   <td>1 時間あたりの平均アクティベート数（平均サイズのページおよびアセットのオーサー層からパブリッシュ層へのレプリケーション）を x で除算した数。x は、システムが処理する他のタスクのパフォーマンスに影響しない状態で、システムで実行されるアクティベート数を表します。x = 100 のように、悲観的な初期値をあらかじめ定義しておくこともできます。<br /> </td>
  </tr>
 </tbody>
</table>

より複雑な Web サイトがある場合は、AEMが許容可能な時間内にリクエストに応答できるように、より強力な Web サーバーも必要になります。

* 4 未満の複雑さ：
   * 1024 MB JVM RAM&#42;
   * 低～中程度のパフォーマンスの CPU

* 複雑度 4 ～ 8:
   * 2048 MB JVM RAM&#42;
   * ミッドからハイパフォーマンスの CPU

* 複雑さが 8 を超える：
   * 4096 MB JVM RAM&#42;
   * ハイエンドからハイエンドの CPU

>[!NOTE]
>
>&#42; JVM に必要なメモリ量に加え、オペレーティングシステムを稼動させるために十分な RAM を確保してください。

## その他の使用例固有の計算 {#additional-use-case-specific-calculations}

デフォルトの Web アプリケーションの計算に加えて、次の使用例に対して特定の要因を考慮する必要が生じる場合があります。 計算された値がデフォルトの計算に追加されます。

### アセット固有の考慮事項 {#assets-specific-considerations}

デジタルアセットを広範に処理するには、最適化されたハードウェアリソースが必要です。最も関連する要因は、画像サイズと処理済み画像のピークスループットです。

16 GB 以上のヒープを割り当て、[Camera Raw パッケージ](/help/assets/camera-raw.md)を使用して Raw 画像を取り込むように、[!UICONTROL DAM アセット更新]ワークフローを設定します。

>[!NOTE]
>
>イメージのスループットが高いと、コンピューティングリソースがシステム I/O や逆の速度に対応できる必要があります。 例えば、画像のインポートによってワークフローが開始された場合、WebDAV を介して多数の画像をアップロードすると、ワークフローのバックログが発生する可能性があります。
>
>TarPM、データストア、検索インデックスに別々のディスクを使用すると、システム I/O 動作を最適化するのに役立ちます（ただし、通常は検索インデックスをローカルに保持するのが妥当です）。

>[!NOTE]
>
>関連トピック [Assets パフォーマンスガイド](/help/sites-deploying/assets-performance-sizing.md).

### マルチサイトマネージャ {#multi-site-manager}

オーサリング環境でAEM MSM を使用する場合のリソース消費は、特定の使用例に大きく依存します。 基本的な要因は次のとおりです。

* ライブコピー数
* ロールアウトの頻度
* ロールアウトするコンテンツツリーのサイズ
* ロールアウトアクションの連携機能

計画済みの使用例を代表的なコンテンツの抜粋と共にテストすると、リソース消費に関する理解を深めるのに役立ちます。 スループット計画から結果を推定することで、AEM MSM で別途必要になるリソースを評価できます。

また、並行して作業する作成者を対象とした説明も含まれます。 AEM MSM の使用例が予定より多くのリソースを消費した場合、パフォーマンスの副作用を知覚します。

### AEM Communitiesのサイズ設定に関する考慮事項 {#aem-communities-sizing-considerations}

AEM Communities の機能を含む AEM Sites （コミュニティサイト）には、パブリッシュ環境のサイト訪問者（メンバー）から高レベルのインタラクションがあります。

コミュニティサイトのサイズ設定に関する考慮事項は、コミュニティメンバーが予想するやり取りと、ページコンテンツの最適なパフォーマンスがより重要かどうかによって異なります。

ユーザー生成コンテンツ (UGC) の送信済みメンバーは、ページコンテンツとは別に保存されます。 AEM プラットフォームではオーサー環境からパブリッシュ環境にサイトコンテンツをレプリケートするノードストアを使用し、AEM Communities では UGC のために単一の共通ストアを使用します。UGC はレプリケートされません。

UGC ストアの場合は、選択したデプロイメントに影響を及ぼすストレージリソースプロバイダー（SRP）を選択する必要があります。
参照先

* [コミュニティコンテンツのストレージ](/help/communities/working-with-srp.md)
* [Communities 用の推奨トポロジ](/help/communities/topologies.md)
