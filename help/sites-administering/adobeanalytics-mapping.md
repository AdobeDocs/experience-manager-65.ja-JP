---
title: コンポーネントデータと Adobe Analytics プロパティとのマッピング
seo-title: コンポーネントデータと Adobe Analytics プロパティとのマッピング
description: コンポーネントデータと SiteCatalyst プロパティをマッピングする方法について説明します。
seo-description: コンポーネントデータと SiteCatalyst プロパティをマッピングする方法について説明します。
uuid: b08ab37f-ad58-4c04-978f-8e21a3823ae8
contentOwner: User
products: SG_EXPERIENCEMANAGER/6.5/SITES
topic-tags: integration
content-type: reference
discoiquuid: 6c1f8869-62d9-4fac-aa0d-b99bb0e86d6b
docset: aem65
exl-id: c7c0c705-ec16-40f5-ad08-193f82d01263
source-git-commit: b220adf6fa3e9faf94389b9a9416b7fca2f89d9d
workflow-type: tm+mt
source-wordcount: '1470'
ht-degree: 53%

---

# コンポーネントデータと Adobe Analytics プロパティとのマッピング{#mapping-component-data-with-adobe-analytics-properties}

Adobe Analytics に送信するデータを収集するフレームワークにコンポーネントを追加します。分析データを収集するために設計されたコンポーネントは、適切な **CQ 変数**&#x200B;にデータを保存します。このようなコンポーネントをフレームワークに追加すると、フレームワークにCQ変数のリストが表示され、適切な&#x200B;**Analytics変数**&#x200B;にそれぞれを追加できます。

![aa-11](assets/aa-11.png)

**AEMビュー**&#x200B;を開くと、Analytics変数がコンテンツファインダーに表示されます。

![aa-12](assets/aa-12.png)

同じ&#x200B;**CQ変数**&#x200B;に複数のAnalytics変数をマッピングできます。

![chlimage_1-68](assets/chlimage_1-68.png)

マッピングされたデータは、ページが読み込まれ、次の条件が満たされると、Adobe Analyticsに送信されます。

* ページがフレームワークに関連付けられている。
* ページが、フレームワークに追加されたコンポーネントを使用する。

CQコンポーネント変数をAdobe Analyticsレポートプロパティにマッピングするには、次の手順を実行します。

1. **AEMビュー**&#x200B;で、サイドキックからフレームワークにトラッキングコンポーネントをドラッグします。 例えば、**ページ**&#x200B;コンポーネントコンポーネントを&#x200B;**一般**&#x200B;カテゴリからドラッグします。

   ![aa-13](assets/aa-13.png)

   デフォルトのコンポーネントグループには、「**一般**」、「**コマース**」、「**コミュニティ**」、「**Search&amp;Promote**」および「**その他**」があります。AEM インスタンスは、異なるグループおよびコンポーネントを表示するように設定されていることがあります。

1. Adobe Analytics変数をコンポーネントで定義された変数にマッピングするには、**Analytics変数**&#x200B;をコンテンツファインダーからトラッキングコンポーネントのフィールドにドラッグします。 例えば、`Page Name (pageName)`を`pagedata.title`にドラッグします。

   ![aa-14](assets/aa-14.png)

   >[!NOTE]
   >
   >フレームワーク用に選択されたレポートスイートID(RSID)によって、コンテンツファインダーに表示されるAdobe Analytics変数が決まります。

1. 他のコンポーネントおよび変数について、前述の 2 つの手順を繰り返します。

   >[!NOTE]
   >
   >複数のAnalytics変数をマッピングできます(例：`props`、`eVars`、`events`)を同じCQ変数(例：`pagedata.title`)

   >[!CAUTION]
   >
   >次の状態が強く推奨されます。
   >    
   >    * `eVars` と `props` は、またはで始まるCQ変数にマッピングさ `pagedata.X` れます  `eventdata.X`
      >    
      >    
   * それに対して、イベントは`eventdata.events.X` で始まる変数にマッピングされる必要があること


1. サイトのパブリッシュインスタンスでフレームワークを使用できるようにするには、サイドキックの「**ページ**」タブを開き、「**フレームワークをアクティベート**」をクリックします。

## 製品関連変数のマッピング {#mapping-product-related-variables}

AEMは、Adobe Analytics製品関連のプロパティにマッピングするための製品関連の変数およびイベントの命名に規則を使用します。

| CQ 変数 | Analytics 変数 | 説明 |
|---|---|---|
| `product.category` | `product.category` （コンバージョン変数）。 | 製品カテゴリです。 |
| `product.sku` | `product.sku` （コンバージョン変数）。 | 製品 SKU です。 |
| `product.quantity` | `product.quantity` （コンバージョン変数）。 | 購入される製品の数です。 |
| `product.price` | `product.price` （コンバージョン変数）。 | 製品価格です。 |
| `product.events.<eventName>` | レポートで製品に関連付けるための成功イベントです。 | `product.events` は、*eventName* という名前のイベントのプレフィックスです。 |
| `product.evars.<eVarName>` | 製品に関連付けるためのコンバージョン変数（`eVar`）です。 | `product.evars` は、*eVarName* という名前の eVar 変数のプレフィックスです。 |

いくつかの AEM Commerce コンポーネントは、これらの変数名を使用します。

>[!NOTE]
>
>CQ変数にAdobe Analytics Productsプロパティをマッピングしないでください。 この表で説明している製品関連マッピングの設定は、Products 変数へのマッピングと実質的に同じです。

### Adobe Analytics のレポートのチェック {#checking-reports-on-adobe-analytics}

1. AEMに指定したのと同じ資格情報を使用してAdobe Analytics Webサイトにログインします。
1. 選択した RSID が、前の手順で使用したものであることを確認します。
1. （ページの左側の）**レポート**&#x200B;で、**カスタムコンバージョン**／**カスタムコンバージョン 1～10** を選択して、`eVar7` に対応する変数を選択します。

1. 使用しているAdobe Analyticsのバージョンに応じて、使用されている検索語句でレポートが更新されるまで、平均45分待つ必要があります。例：ナス

## Adobe Analytics フレームワークでの Content Finder（cf#）の使用 {#using-the-content-finder-cf-with-adobe-analytics-frameworks}

最初は、Adobe Analyticsフレームワークを開くと、コンテンツファインダーに事前定義済みのAnalytics変数が次の場所に含まれています。

* トラフィック
* コンバージョン
* イベント

RSID が選択されている場合、その RSID に属するすべての変数がリストに追加されます。\
Analytics変数を別のトラッキングコンポーネントに存在するCQ変数にマッピングするには、`cf#`が必要です。 基本トラッキングのためのフレームワークのセットアップを参照してください。

フレームワーク用に選択したビューに応じて、コンテンツファインダーは、Analytics変数(AEMビュー)またはCQ変数（Analyticsビュー）のいずれかによって設定されます。

リストは、次の方法で操作できます。

1. **AEM ビュー**&#x200B;では、リストは、3 つのフィルターボタンを使用してどの変数の型が選択されているかに応じて、フィルターできます。

   * どのボタンも選択されて&#x200B;*いない*&#x200B;場合、完全なリストが表示されます。
   * 「**トラフィック**」ボタンが選択されている場合、リストには「トラフィック」セクションに属する変数のみが表示されます。
   * 「**コンバージョン**」ボタンが選択されている場合、リストには「コンバージョン」セクションに属する変数のみが表示されます。
   * 「**イベント**」ボタンが選択されている場合、リストには、「イベント」セクションに属する変数のみが表示されます。

   >[!NOTE]
   >
   >一度に 1 つのフィルターのみアクティブにできます。

   >[!NOTE]
   >
   >Search&amp;Promote変数は、「コンバージョン」セクションにも属しています。

   1. また、リストには検索機能があり、検索フィールドに入力されたテキストに従って要素をフィルタリングします。
   1. リストの要素の検索中にフィルターオプションを有効にした場合、表示される結果も、アクティブなボタンに従ってフィルタリングされます。
   1. リストは、渦巻き矢印ボタンを使用して、いつでもリロードできます。
   1. 複数の RSID がフレームワークで選択されている場合、リストのすべての変数は、選択した RSID 内で使用されたすべてのラベルを使用して表示されます。


1. Adobe Analyticsビューでは、コンテンツファインダーは、CQビューにドラッグされたトラッキングコンポーネントに属するすべてのCQ変数を表示します。

   * 例えば、CQビューで&#x200B;**ダウンロードコンポーネント**&#x200B;が1つだけドラッグ&#x200B;*された場合（2つのマッピング可能な変数* eventdata.downloadLink *と* eventdata.events.startDownload *を含む）、コンテンツファインダーは次のように表示されますAdobe Analyticsビュー：*

   ![aa-22](assets/aa-22.png)

   * 変数は、3つの変数セクション（**Traffic**、**Conversion**&#x200B;および&#x200B;**Events**）のいずれかに属する任意のAdobe Analytics変数にドラッグ&amp;ドロップできます。

   * 新しいトラッキングコンポーネントをCQビューのフレームワークにドラッグすると、コンポーネントに属するCQ変数がAdobe Analyticsビューのコンテンツファインダー(cf#)に自動的に追加されます。
   >[!NOTE]
   >
   >1回のAdobe Analytics変数にマッピングできるCQ変数は1つだけです

## AEM ビューと Analytics ビューの使用 {#using-aem-view-and-analytics-view}

フレームワークページでのAdobe Analyticsマッピングの表示方法は、いつでも2つ切り替えることができます。 2 つのビューは、2 つの異なる見方からのフレームワーク内のマッピングの概要をわかりやすく提供します。

### AEM ビュー  {#aem-view}

![aa-23](assets/aa-23.png)

上記の図を例に挙げると、**AEM ビュー**&#x200B;には次のプロパティがあります。

1. これはフレームワークが開いたときのデフォルトの表示です。
1. 左側：コンテンツファインダー(cf#)は、選択されたRSIDに基づいて、Adobe Analytics変数によって設定されます。
1. タブヘッダー（**AEM ビュー**&#x200B;と **Analytics ビュー**）：2 つのビューを切り替えるのに使用します。

1. **AEM ビュー**:

   1. フレームワークにその親から継承されるコンポーネントがある場合、コンポーネントにマッピングされた変数と共に、ここにリストが表示されます。

      1. 継承されたコンポーネントはロックされています。
      1. 継承されたコンポーネントのロックを解除するには、コンポーネントの名前の横にある鍵アイコンをダブルクリックします。
      1. 継承を元に戻すには、ロックされていないコンポーネントを削除する必要があります。その後、コンポーネントはロックされた状態に戻されます。
   1. **分析フレームワークにコンポーネントを追加するには、ここにコンポーネントをドラッグします**：コンポーネントはサイドキックからドラッグアンドドロップすることができます。
   1. 現在分析フレームワークに含まれるすべてのコンポーネントを検索できます。

      1. コンポーネントを追加するには、サイドキックの「コンポーネント」タブからドラッグします。
      1. コンポーネントとそのすべてのマッピングを削除するには、コンポーネントのコンテキストメニューから「削除」を選択し、確認ダイアログで削除を受け入れます。
      1. コンポーネントは、作成したフレームワークからのみ削除でき、従来のように子フレームワークからは削除できません（上書きのみ可能です）。


### Analytics ビュー {#analytics-view}

![aa-24](assets/aa-24.png)

1. このビューにアクセスするには、フレームワークの「**Analyticsビュー**」タブに切り替えます。
1. 左側：コンテンツファインダー（cf#）は、CQ ビューのフレームワークにドラッグしたコンポーネントに基づく CQ 変数によって入力されます。
1. タブヘッダー（**AEM ビュー**&#x200B;と **Analytics ビュー**）：2 つのビューを切り替えるのに使用します。

1. 3つのテーブル（トラフィック、コンバージョン、イベント）に、使用可能なAdobe Analytics変数の一覧を示します。 一覧表示されています。ここに示されるマッピングは、AEM ビューのものと同じです。

   * **トラフィック**：

      * CQ変数(`prop1`)にマッピングされたトラフィック変数(`eventdata.downloadLink`)

      * コンポーネントの隣に鍵アイコンがある場合、これは、親フレームワークからの継承であり、そのため編集できないことを意味します。
   * **コンバージョン**:

      * CQ変数(`eVar1`)にマッピングされたコンバージョン変数(`pagedata.title`)

      * CQ 変数フィールドをダブルクリックしてコードを手動で入力することにより、JavaScript 式にマッピングされたコンバージョン変数（`eVar3`）をインラインで追加しました。
   * **イベント**:

      * CQイベント(`event1`)にマッピングされたイベント変数(`eventdata.events.pageView`)



>[!NOTE]
>
>すべての表の CQ 変数列は、フィールドをダブルクリックしてテキストを追加することで、インラインで入力することもできます。これらのフィールドは、JavaScript を入力として受け取ります。
>
>* 例えば、&lt;a0/の隣に、`prop3`
>* `'`* `Adobe:'+pagedata.title+':'+pagedata.sitesection`\
   >  *:*（コロン）を使用し、*Adobe*&#x200B;を先頭に`prop3`として付加した、*サイトセクション*&#x200B;で連結されたページの&#x200B;*タイトル*&#x200B;を送信するには

>



>[!CAUTION]
>
>Adobe Analytics変数にマッピングできるCQ変数は、常に1つだけです。
