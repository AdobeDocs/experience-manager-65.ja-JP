---
title: 検索フォームの設定
description: Search Formsを使用して、オーサー環境のAEMコンソールおよびパネルで使用できる検索パネルで使用される検索用述語の選択をカスタマイズする方法について説明します。
contentOwner: Guillaume Carlino
products: SG_EXPERIENCEMANAGER/6.5/SITES
topic-tags: operations
content-type: reference
exl-id: f82391d7-e30d-48d2-8f66-88fcae3dfb5f
source-git-commit: 04050f31742c926b45235595f6318929d3767bd8
workflow-type: tm+mt
source-wordcount: '2072'
ht-degree: 62%

---


# 検索フォームの設定{#configuring-search-forms}

用途 **Formsを検索** を使用すると、様々なAEMコンソールやオーサー環境のパネルで使用できる検索パネルで使用される検索用述語の選択をカスタマイズできます。 これらのパネルをカスタマイズすると、検索機能を特定のニーズに合わせて汎用化できます。

[述語の範囲](#predicates-and-their-settings)は標準で使用できます。プロパティの述語を含む複数の述語を追加して、指定した 1 つのプロパティに一致するアセットを検索できます。 または、特定のプロパティに対してユーザーが指定した 1 つ以上の値と一致するアセットを検索するためのオプションの述語。

以下が可能です。 [検索フォームの設定](#configuring-your-search-forms) 様々なコンソールおよびアセットブラウザー内で使用されます（ページの編集時）。 [これらのフォームを設定するためのダイアログ](#configuring-your-search-forms)には、次の手順でアクセスできます。

* **ツール**

   * **一般**

      * **検索フォーム**

このコンソールに初めてアクセスすると、すべての設定に南京錠アイコンが表示されます。 これは、適切な設定がデフォルトの（標準の）設定であり、削除できないことを示します。 設定をカスタマイズした後、次の手順を実行しない限り、ロックは消えます。 [カスタマイズした設定を削除](#deleting-a-configuration-to-reinstate-the-default). この場合、デフォルト（および南京錠アイコン）が復元されます。

![検索フォームウィンドウ](assets/chlimage_1-374.png)

## 設定 {#configurations}

使用可能なデフォルト設定は次のとおりです。

* **ページエディター（ドキュメント検索）：**

  この設定は、アセットブラウザーで（ページ編集時に）ドキュメントを検索する際に使用可能なオプションを定義します。

* **ページエディター（画像検索）：**

  この設定は、アセットブラウザーで（ページ編集時に）画像を検索する際に使用可能なオプションを定義します。

* **ページエディター（原稿検索）：**

  この設定は、アセットブラウザーで（ページ編集時に）原稿を検索する際に使用可能なオプションを定義します。

* **ページエディター（ページ検索）：**

  この設定は、アセットブラウザーで（ページ編集時に）ページを検索する際に使用可能なオプションを定義します。

* **ページエディター（段落検索）：**

  この設定は、アセットブラウザーで（ページ編集時に）段落を検索する際に使用可能なオプションを定義します。

* **ページエディター（製品検索）：**

  この設定は、アセットブラウザーで（ページ編集時に）商品を検索する際に使用可能なオプションを定義します。

* **ページエディター（Dynamic Media Classic）[旧 Scene7] 検索）**：

  この設定は、アセットブラウザーで（ページ編集時に）Scene7 リソースを検索する際に使用可能なオプションを定義します。

* **Sites 管理者の検索パネル：**

  この設定は、サイトコンソールの検索パネルを使用する際にユーザーが使用できる検索オプションを定義します。

* **ページエディター（ビデオ検索）：**

  この設定は、アセットブラウザーで（ページ編集時に）ビデオを検索する際に使用可能なオプションを定義します。

* **アセット管理者の検索パネル：**

  この設定は、Assets のコンソールを使用する際にユーザーが使用できる検索オプションを定義します。

* **カタログ管理者の検索パネル:**

  この設定は、コマースカタログを検索する際にユーザーが使用できる検索オプションを定義します。

* **注文管理者の検索パネル：**

  この設定は、コマース注文を検索する際にユーザーが使用できる検索オプションを定義します。

* **製品コレクション管理者の検索パネル：**

  この設定は、コマース製品を検索する際にユーザーが使用できる検索オプションを定義します。

* **製品管理者の検索パネル：**

  この設定は、コマース製品を検索する際にユーザーが使用できる検索オプションを定義します。

* **プロジェクト管理者の検索パネル：**

  この設定は、プロジェクトを検索する際にユーザーが使用できる検索オプションを定義します。

## 述語とその設定 {#predicates-and-their-settings}

### 述語 {#predicates}

設定に応じて、次の述語が使用可能です。

<table>
 <tbody>
  <tr>
   <th>述語</th>
   <th>目的</th>
   <th>設定</th>
  </tr>
  <tr>
   <td>分析 </td>
   <td>Analytics データを表示する際の、Sites ブラウザーの検索／フィルター機能。Analytics の検索フィルターは、マッピングされ、カスタマイズされた Analytics 列に一致するまで読み込みます。</td>
   <td>
    <ul>
     <li>フィールドラベル</li>
     <li>説明</li>
    </ul> </td>
  </tr>
  <tr>
   <td>最終変更アセット </td>
   <td>アセットが最後に変更された日付。<br /> </td>
   <td>日付の述語に基づく、カスタマイズされた述語。</td>
  </tr>
  <tr>
   <td>コンポーネント </td>
   <td>作成者が、特定のコンポーネントを持つページを検索/フィルタリングできます。 例えば、画像ギャラリーなどです。<br /> </td>
   <td>
    <ul>
     <li>フィールドラベル</li>
     <li>プレースホルダー</li>
     <li>プロパティ名*</li>
     <li>プロパティの深さ</li>
     <li>説明</li>
    </ul> </td>
  </tr>
  <tr>
   <td>日付 </td>
   <td>日付プロパティに基づいた、アセットのスライダーベースの検索。</td>
   <td>
    <ul>
     <li>フィールドラベル</li>
     <li>プロパティ名*</li>
     <li>説明</li>
    </ul> </td>
  </tr>
  <tr>
   <td>日付の範囲 </td>
   <td>指定した範囲内で作成されたアセットを日付プロパティで検索します。 検索パネルで、開始日と終了日を指定できます。</td>
   <td>
    <ul>
     <li>フィールドラベル</li>
     <li>プレースホルダー</li>
     <li>プロパティ名*</li>
     <li>範囲テキスト（開始）*</li>
     <li>範囲テキスト（終了）*</li>
     <li>説明</li>
    </ul> </td>
  </tr>
  <tr>
   <td>有効期限ステータス </td>
   <td>有効期限ステータスに基づいてアセットを検索します。</td>
   <td>
    <ul>
     <li>フィールドラベル</li>
     <li>プロパティ名*</li>
     <li>説明</li>
    </ul> </td>
  </tr>
  <tr>
   <td>ファイルサイズ </td>
   <td>サイズに基づいてアセットを検索します。</td>
   <td>
    <ul>
     <li>フィールドラベル</li>
     <li>プロパティ名*</li>
     <li>オプションパス</li>
     <li>説明</li>
    </ul> </td>
  </tr>
  <tr>
   <td>非表示のフィルター</td>
   <td>プロパティおよび値のフィルターで、ユーザーには表示されません。</td>
   <td>
    <ul>
     <li>プロパティ名</li>
     <li>プロパティの値</li>
     <li>説明</li>
    </ul> </td>
  </tr>
  <tr>
   <td>オプション </td>
   <td><p>オプションは、ユーザーが作成したコンテンツノードです。</p> <p>詳しくは、<a href="#addinganoptionspredicate">オプションの述語の追加</a>を参照してください。</p> </td>
   <td>
    <ul>
     <li>フィールドラベル</li>
     <li>JSON パス</li>
     <li>プロパティ名*</li>
     <li>単一選択</li>
     <li>オプションパス</li>
     <li>説明</li>
    </ul> </td>
  </tr>
  <tr>
   <td>Options プロパティ </td>
   <td>オプションのプロパティで検索します。</td>
   <td>
    <ul>
     <li>フィールドラベル</li>
     <li>プロパティ名*</li>
     <li>オプションノードのパス<br /> </li>
     <li>単一選択</li>
     <li>説明</li>
    </ul> </td>
  </tr>
  <tr>
   <td>ページステータス </td>
   <td>ステータスに従ってページを検索します。</td>
   <td>
    <ul>
     <li>フィールドラベル</li>
     <li>プロパティ名を公開</li>
     <li>ライブコピーのプロパティ名</li>
     <li>説明</li>
    </ul> </td>
  </tr>
  <tr>
   <td>パス </td>
   <td>特定のパスの下にあるアセットを検索します。</td>
   <td>
    <ul>
     <li>フィールドラベル</li>
     <li>検索パスを追加</li>
     <li>説明</li>
    </ul> </td>
  </tr>
  <tr>
   <td>プロパティ </td>
   <td>指定したプロパティで検索します。</td>
   <td>なし</td>
  </tr>
  <tr>
   <td>公開ステータス </td>
   <td>公開ステータスに基づいたアセットの検索</td>
   <td>
    <ul>
     <li>フィールドラベル</li>
     <li>プロパティ名*</li>
     <li>説明</li>
    </ul> </td>
  </tr>
  <tr>
   <td>範囲 </td>
   <td>指定した範囲内にあるリソースを検索します。検索パネルで、範囲の最小値と最大値を指定できます。</td>
   <td>
    <ul>
     <li>フィールドラベル</li>
     <li>プロパティ名</li>
     <li>説明</li>
    </ul> </td>
  </tr>
  <tr>
   <td>範囲オプション </td>
   <td>アセットに固有の検索用述語で、共通のスライダーの述語と同じもの。 後方互換性の問題が原因で、引き続き使用できます。</td>
   <td>
    <ul>
     <li>フィールドラベル</li>
     <li>プロパティ名*</li>
     <li>オプションパス</li>
     <li>説明</li>
    </ul> </td>
  </tr>
  <tr>
   <td>レーティング </td>
   <td>評価に従ってアセットを検索します。<br /> </td>
   <td>
    <ul>
     <li>フィールドラベル</li>
     <li>プロパティ名*</li>
     <li>オプションパス</li>
     <li>説明</li>
    </ul> </td>
  </tr>
  <tr>
   <td>相対的な日付 </td>
   <td>相対的な作成日に基づいてアセットを検索する<br /> </td>
   <td>
    <ul>
     <li>フィールドラベル</li>
     <li>プロパティ名*</li>
     <li>相対的な日付</li>
     <li>説明</li>
    </ul> </td>
  </tr>
  <tr>
   <td>スライダー範囲 </td>
   <td>範囲の述語をスライダー機能で拡張する、共通の検索用述語。 検索対象のプロパティの値は、スライダー制限の範囲内に収まっている必要があります。</td>
   <td>
    <ul>
     <li>フィールドラベル</li>
     <li>プロパティ名*</li>
     <li>説明</li>
    </ul> </td>
  </tr>
  <tr>
   <td>タグ </td>
   <td>タグに基づいてアセットを検索します。 「パス」プロパティを設定して、「タグ」リストに様々なタグを表示できます。</td>
   <td>
    <ul>
     <li>フィールドラベル</li>
     <li>プロパティ名*</li>
     <li>オプションパス</li>
     <li>説明</li>
    </ul> </td>
  </tr>
  <tr>
   <td>タグ </td>
   <td>タグに基づいて検索します。</td>
   <td>
    <ul>
     <li>プレースホルダー</li>
     <li>プロパティ名*</li>
     <li>説明</li>
    </ul> </td>
  </tr>
 </tbody>
</table>

>[!NOTE]
>
>* 一般的な検索用の述語は、次の場所で定義されています。
>  `/libs/cq/gui/components/common/admin/customsearch/searchpredicates`
>
>* siteadmin（クラシック UI）にのみ関連する検索用の述語は、次の場所にあります。
>  `/libs/cq/gui/components/siteadmin/admin/searchpanel/searchpredicates`
>   * これらは非推奨であり、後方互換性のためにのみ使用できます。
>
>この情報は参照用です。 変更しない `/libs`.

### 述語の設定 {#predicate-settings}

述語によって、設定に使用できる項目を選択できます。

* **フィールドラベル**

  述語の折りたたみ可能なヘッダーまたはフィールドラベルとして表示されるラベル。

* **説明**

  ユーザーのための詳細な説明。

* **プレースホルダー**

  フィルターテキストを入力しない場合は、空のテキストまたは述語のプレースホルダー。

* **プロパティ名**

  検索対象のプロパティ。相対パスとワイルドカード `*/*/*` を使用して、`jcr:content` ノードを基準とするプロパティの深さを指定します（各アスタリスクは 1 つのノードレベルを表します）。

  を持つリソースの第 1 レベルの子ノードでのみ検索する場合 `x` プロパティを `jcr:content` ノード使用 `*/jcr:content/x`

* **プロパティの深さ**

  リソース内でそのプロパティを検索する最大の深さです。そのため、子のレベルが指定の深さに等しくなるまで、そのプロパティの検索をリソースと再帰的な子に対して実行できます。

* **プロパティの値**

  プロパティの値は、絶対文字列または式言語です。例えば、`cq:Page` または

  `${empty requestPathInfo.suffix ? "/content" : requestPathInfo.suffix}` です。

* **範囲テキスト**

  **日付の範囲**&#x200B;の述語の範囲フィールドのラベル。

* **オプションパス**

  ユーザーは、「述語の設定」タブのパスブラウザーを使用してパスを選択できます。選択後 **+**&#x200B;の場合、アイコンを使用して、選択範囲を有効なオプションのリスト ( **-** アイコンをクリックして削除します（必要に応じて）。

  オプションは、ユーザーが作成したコンテンツノードで、次の構造を持ちます。

  `(jcr:primaryType = nt:unstructured, value (String), jcr:title (String))`

* **オプションノードパス**
事実上は**オプションパス**&#x200B;と同じですが、これのみが共通の述語フィールドにあり、その他はアセット専用です。

* **単一の選択**&#x200B;オンにすると、オプションは単一の選択のみを許可するチェックボックスとしてレンダリングされます。チェックボックスを誤って選択した場合は、選択を解除できます。

* **公開およびライブコピーのプロパティ名**
Sites 専用の述語の、公開およびライブコピーのチェックボックスのラベル。

* &amp;ast; ( **設定** 「 」タブは、フィールドが必須であることを意味し、空白のままにした場合、エラーメッセージが表示されます。

## 検索フォームの設定 {#configuring-your-search-forms}

### カスタマイズされた設定を作成または開く {#creating-opening-a-customized-configuration}

1. に移動します。 **ツール** >>  **一般** >> **Formsを検索**.

1. カスタマイズする設定を選択します。
1. **編集**&#x200B;アイコンを使用して、更新用に設定を開きます。
1. 新しいカスタマイズが必要な場合は、 [新しい述語フィールドの追加と設定の定義](#add-edit-a-predicate-field-and-define-field-settings) 必要に応じて。 既存のカスタマイズの場合は、既存のフィールドを選択し、 [設定を更新](#add-edit-a-predicate-field-and-define-field-settings).
1. 「**完了**」を選択して設定を保存します。

   >[!NOTE]
   >
   >カスタマイズした設定は（必要に応じて）以下の場所に保存されます。
   >
   >* `/apps/cq/gui/content/facets/<option>`
   >* `/apps/commerce/gui/content/facets/<option>`

### 述語フィールドの追加／編集とフィールド設定の定義 {#add-edit-a-predicate-field-and-define-field-settings}

フィールドを追加または編集して、その設定を定義／更新できます。

1. 更新する[カスタマイズ設定を開きます](#creating-opening-a-customized-configuration)。
1. フィールドを追加する場合は、 **述語を選択** 「 」タブをクリックし、必要な述語を必要な場所にドラッグします。 **日付の範囲の述語**&#x200B;の例を以下に示します。

   ![検索フォームの編集](assets/chlimage_1-375.png)

1. 状況に応じて、以下の手順を実行します。

   * 次のフィールドを追加します。

     述語を追加すると、 **設定** 「 」タブが開き、定義可能なプロパティが表示されます。

   * 既存の述語を更新する場合：

     右側の述語フィールドを選択し、「**設定**」タブを開きます。

   **日付の範囲の述語**&#x200B;の設定例を以下に示します。

   ![日付の範囲の述語のプロパティ](assets/chlimage_1-376.png)

1. 必要に応じて変更を加え、「**完了**」を選択して確定します。

### 検索設定のプレビュー {#previewing-the-search-configuration}

1. 「プレビュー」アイコンを選択します。

   ![検索フォームのプレビュー](do-not-localize/chlimage_1-31.png)

1. 検索フォームが、該当するコンソールの「検索」列に表示されるとおりに（完全に展開された状態で）表示されます。

   ![検索フォームのプレビュー](assets/chlimage_1-377.png)

1. **閉じる** プレビューを表示して、設定を元に戻して完了することができます。

### 述語フィールドの削除 {#deleting-a-predicate-field}

1. 更新する[カスタマイズ設定を開きます](#creating-opening-a-customized-configuration)。
1. 述語フィールド（右側）を選択し、「**設定**」タブを開いて、**削除**&#x200B;アイコン（左下）を選択します。

   ![削除アイコン](do-not-localize/chlimage_1-32.png)

1. 削除の確認を求めるダイアログボックスが表示されます。

1. 「**完了**」ボタンで削除およびその他の変更を確認します。

### 設定の削除（デフォルト復帰のため） {#deleting-a-configuration-to-reinstate-the-default}

設定をカスタマイズすると、デフォルトが上書きされます。 カスタマイズした設定を削除することで、デフォルトの設定を復元できます。

>[!NOTE]
>
>どちらのデフォルト設定も削除できません。

カスタマイズした設定の削除は、コンソールからおこないます。

1. 必要な設定（**ページエディター（段落検索）**&#x200B;など）を選択して、ツールバーの「**削除**」アイコンを選択します。

   ![フォームの削除](assets/chlimage_1-378.png)

1. カスタマイズした設定が削除され、デフォルトが復帰します（このことは、コンソールに南京錠アイコンが再度表示されることで確認できます）。

### オプションの述語の追加 {#adding-options-predicates}

オプションの述語（オプション、オプションプロパティ）を使用して、検索する項目を設定できます。 ページノード上のプロパティなど、ページの直下にある何かを検索するために使用されます。

以下の例（ページの作成に使用するテンプレートに従った検索）で、必要な手順を説明します。

1. 検索対象のプロパティを定義するノードを作成します。

   ユーザーが使用できる個々のオプションの定義を保持するルートノードが必要です。

   個々のオプションのノードには、次のプロパティが必要です。

   * `jcr:title` - 検索パネルに表示されるフィールドラベル
   * `value` - 検索対象のプロパティ値

   ![CRXDE でのオプションの追加](assets/chlimage_1-379.png)

   >[!NOTE]
   >
   >実行 ***not*** 内容を変える `/libs` パス。
   >
   >`/libs` コンテンツは、インスタンスを次回アップグレードするとき（場合によってはホットフィックスまたは機能パックを適用したとき）に上書きされるからです。
   >
   >設定およびその他の変更に推奨される方法は次のとおりです。
   >
   >1. 必要な項目（`/libs` 内に存在）を、`/apps` の下で再作成します。この場合、次の場所から選択します。
   >1. `/libs/cq/gui/content/common/options/predicates`
   >1. `/apps.` 内で変更作業をおこないます。

1. を開きます。 **Formsを検索** コンソールに移動し、更新する設定を選択します。 例： **サイト管理者の検索レール**.

   次に、 **検索フォームを編集** アイコン。

1. 設定に応じて、 **オプション** または **Options プロパティ** を設定に追加します。
1. フィールドを更新します。具体的には次のフィールドです。

   * **プロパティ名**

     ターゲットノードで検索するノードプロパティを指定します。次に例を示します。

     `jcr:content/cq:template`

   * **オプションノードパス**

     オプションを保持するパスを選択します。次に例を示します。

     `/apps/cq/gui/content/common/options/predicates/templatetype`

   ![プロパティパスを追加中](assets/chlimage_1-380.png)

1. 「**完了**」を選択して設定を保存します。
1. 該当するコンソール ( この例では **Sites**) をクリックし、 **検索** パネル。 新しく定義された検索フォームと各種オプションが表示されます。必要なオプションを選択して、検索結果を表示します。

   ![最終結果](assets/chlimage_1-381.png)

## ユーザーの権限 {#user-permissions}

次の表に、検索フォームで編集、削除およびプレビューのアクションを実行するために必要な権限を示します。

<table>
 <tbody>
  <tr>
   <td><strong>アクション</strong></td>
   <td><strong>権限</strong></td>
  </tr>
  <tr>
   <td>編集 </td>
   <td><code>/apps </code> ノード上の読み取り、書き込み権限。</td>
  </tr>
  <tr>
   <td>削除</td>
   <td><code>/apps</code> ノード上の読み取り、書き込み、削除権限。</td>
  </tr>
  <tr>
   <td>プレビュー</td>
   <td><code>/var/dam/content</code> ノード上の読み取り、書き込み、削除権限。<br /><code>/apps</code> ノード上の読み取り、書き込み権限。</td>
  </tr>
 </tbody>
</table>
