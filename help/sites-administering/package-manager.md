---
title: パッケージの使用方法
seo-title: パッケージの使用方法
description: AEM でのパッケージの基本的な使用方法について説明します。
seo-description: AEM でのパッケージの基本的な使用方法について説明します。
uuid: cba76a5f-5d75-4d63-a0f4-44c13fa1baf2
contentOwner: Chiradeep Majumdar
products: SG_EXPERIENCEMANAGER/6.5/SITES
topic-tags: content
content-type: reference
discoiquuid: 6694a135-d1e1-4afb-9f5b-23991ee70eee
docset: aem65
translation-type: tm+mt
source-git-commit: 03967fcdc9685c9a8bf1dead4bd5e389603ff91b
workflow-type: tm+mt
source-wordcount: '3934'
ht-degree: 75%

---


# パッケージの使用方法{#how-to-work-with-packages}

パッケージによって、リポジトリコンテンツの読み込みと書き出しが可能になります。例えば、パッケージを使用すると、新しい機能のインストール、インスタンス間でのコンテンツの転送、リポジトリコンテンツのバックアップが可能です。

パッケージは、以下のページからアクセスおよび保守できます。

* [パッケージマネージャー](#package-manager)：ローカルの AEM インスタンスでパッケージを管理する際に使用します。

* [ソフトウェア配布](#software-distribution)：公開パッケージと会社の個人用パッケージの両方を一元的に管理します。 パブリックパッケージには、ホットフィックス、新機能、ドキュメントなどを含めることができます。

パッケージは、Package Manager、ソフトウェア配布、およびファイルシステムの間で転送できます。

## What are Packages? {#what-are-packages}

パッケージとは、ファイルシステムシリアル化（「vault」シリアル化）の形式でリポジトリコンテンツが格納されている zip ファイルです。これにより、使いやすく編集しやすい方法でファイルおよびフォルダーを表現できます。

パッケージには、フィルターを使用して選択された、ページコンテンツとプロジェクト関連コンテンツの両方のコンテンツが含まれます。

パッケージには、フィルタ定義やインポート設定情報などのボールトメタ情報も含まれます。説明、表示画像、アイコンなど、パッケージには追加のコンテンツプロパティ(パッケージ抽出に使用されないプロパティ)を含めることができます。これらのプロパティは、コンテンツパッケージコンシューマー向けのもので、情報提供のみを目的としています。

>[!NOTE]
>
>パッケージは、そのパッケージを作成した時点におけるコンテンツの現在のバージョンを表しています。AEM がリポジトリに保持している以前のバージョンのコンテンツは含まれません。

パッケージでは以下のアクションを実行できます。

* 新しいパッケージを作成し、必要に応じてパッケージ設定やフィルターを定義
* パッケージのコンテンツをプレビュー（ビルド前）
* パッケージをビルド
* パッケージ情報を表示
* パッケージのコンテンツを表示（ビルド後）
* 既存のパッケージの定義を変更
* 既存のパッケージを再ビルド
* パッケージを再度含める
* AEM からファイルシステムへパッケージをダウンロード
* ファイルシステムからローカルのAEMインスタンスにパッケージをアップロードする
* インストール前にパッケージの内容を検証
* ドライ作動のインストールを実行する
* パッケージをインストール（AEM はパッケージのアップロード後に自動インストールしません）
* パッケージを削除
* ホットフィックスなどのパッケージをソフトウェア配布ライブラリからダウンロードする
* Software Distribution Libraryの会社内部のセクションにパッケージをアップロードする

## パッケージ情報 {#package-information}

パッケージの定義は、次のような様々な種類の情報で構成されています。

* [パッケージ設定](#package-settings)
* [パッケージフィルター](#package-filters)
* [パッケージスクリーンショット](#package-screenshots)
* [パッケージアイコン](#package-icons)

### パッケージ設定 {#package-settings}

様々なパッケージ設定を編集して、パッケージの説明、関連するバグ、依存関係、プロバイダー情報などの側面を定義できます。

**パッケージ設定**&#x200B;ダイアログは、パッケージを&#x200B;**作成**&#x200B;または[編集](#creating-a-new-package)中に「[編集](#viewing-and-editing-package-information)」ボタンをクリックすると表示され、設定用のタブが 3 つ含まれます。変更をおこなったら、「**OK**」をクリックして保存します。

![packageedit](assets/packagesedit.png)

| **フィールド** | **説明** |
|---|---|
| 名前 | パッケージの名前。 |
| グループ | パッケージの追加先の、パッケージを整理するためのグループの名前。新しいグループの名前を入力するか、既存のグループを選択します。 |
| バージョン | カスタムバージョンに使用するテキスト。 |
| 説明 | パッケージの簡単な説明。書式設定に HTML マークアップを使用できます。 |
| サムネール | パッケージリストと共に表示するアイコン。「参照」をクリックしてローカルファイルを選択します。 |

![chlimage_1-108](assets/chlimage_1-108.png)

<table>
 <tbody>
  <tr>
   <th><strong>フィールド</strong></th>
   <th><strong>説明</strong></th>
   <th><strong>形式/例</strong></th>
  </tr>
  <tr>
   <td>名前</td>
   <td>プロバイダーの名前。</td>
   <td><em>AEM Geometrixx<br /> </em></td>
  </tr>
  <tr>
   <td>URL</td>
   <td>プロバイダーの URL。</td>
   <td><em>https://www.aem-geometrixx.com</em></td>
  </tr>
  <tr>
   <td>リンク</td>
   <td>プロバイダーページへの、パッケージ専用のリンク。</td>
   <td><em>https://www.aem-geometrixx.com/mypackage.html</em></td>
  </tr>
  <tr>
   <td>次を必要とする<br /> </td>
   <td>
    <ul>
     <li>管理者：管理者権限のあるアカウントでのみパッケージがインストール可能な場合に選択します。</li>
     <li>再起動：パッケージをインストール後にサーバーを再起動する必要がある場合に選択します。</li>
    </ul> </td>
   <td> </td>
  </tr>
  <tr>
   <td>AC の処理</td>
   <td><p>パッケージ読み込み時の、パッケージで定義されているアクセス制御情報の処理方法を指定します。</p>
    <ul>
     <li><strong>無視</strong></li>
     <li><strong>上書き</strong></li>
     <li><strong>統合</strong></li>
     <li><strong>消去</strong></li>
     <li><strong>統合して保存</strong></li>
    </ul> <p>デフォルト値は <strong>Ignore</strong> です。</p> </td>
   <td>
    <ul>
     <li><strong>無視</strong> - リポジトリ内の ACL を保持</li>
     <li><strong>上書き</strong> - リポジトリ内の ACL を上書き</li>
     <li><strong>統合</strong> - 両方の ACL セットを統合</li>
     <li><strong>消去</strong> - ACL を消去</li>
     <li><strong>統合して保存</strong> - コンテンツ内に存在しないプリンシパルのアクセス制御エントリを追加し、コンテンツ内のアクセス制御をパッケージが提供するものとマージ</li>
    </ul> </td>
  </tr>
 </tbody>
</table>

![packages依存性](assets/packagesdependencies.png)

| **フィールド** | **説明** | **形式／例** |
|---|---|---|
| テスト環境 | このパッケージのターゲットまたは互換性のある製品名およびバージョン。 | *AEM 6* |
| 修正された問題 | このパッケージで修正されたバグの詳細をリストできるテキストフィールド。バグはそれぞれ別々の行に入力してください。 | バグ番号と概要 |
| 依存 | 現在のパッケージを期待どおりに実行するために他のパッケージが必要な場合に配慮する必要のある依存関係情報をリストします。このフィールドはホットフィックスを使用する場合に重要です。 | groupId:name:version |
| 置き換え | このパッケージで置き換えられる廃止されたパッケージのリスト。インストール前に、古いパッケージの必要なコンテンツがすべてこのパッケージに含まれていることを確認し、コンテンツが上書きされないようにしてください。 | groupId:name:version |

### パッケージフィルター {#package-filters}

Filters identify the repository nodes to include in the package. A **Filter Definition** specifies the following information:

* 含めるコンテンツの&#x200B;**ルートパス**。
* **ルートパスの下に** 、特定のノードを含めるか除外するルール。

フィルターには、0個以上のルールを含めることができます。ルールを定義しない場合、パッケージのルートパスの下にすべてのコンテンツが含まれます。

パッケージに対して、1つ以上のフィルター定義を定義できます。複数のルートパスのコンテンツを含めるには、複数のフィルターを使用します。

![chlimage_1-109](assets/chlimage_1-109.png)

次の表で、これらのルールについて説明し、例を示します。

<table>
 <tbody>
  <tr>
   <th> ルールタイプ</th>
   <th>説明 </th>
   <th>例 </th>
  </tr>
  <tr>
   <td> include</td>
   <td>パスを定義するか、正規表現を使用して、含めるすべてのノードを指定できます。<br />
<br />
ディレクトリを含めると、
    <ul>
     <li>そのディレクトリと、そのディレクトリ内のすべてのファイルおよびフォルダー（サブツリー全体）が含まれます。<i></i></li>
     <li>指定したルートパスの下のその他のファイルやフォルダーは含まれ<strong>ません</strong>。</li>
    </ul> </td>
   <td>/libs/sling/install(/.*)?  </td>
  </tr>
  <tr>
   <td> exclude</td>
   <td>パスを指定するか、正規表現を使用して、除外するすべてのノードを指定できます。<br />
。
<br /><i>
。

ディレクトリを除外すると、そのディレクトリと、そのディレクトリ内のすべてのファイルおよびフォルダー（サブツリー全体）が除外されます。</i><br /> </td>
   <td>/libs/wcm/foundation/components(/.*)?</td>
  </tr>
 </tbody>
</table>

>[!NOTE]
>
>1 つのパッケージに複数のフィルター定義を含めることができるので、別々の場所のノードを組み合わせて 1 つのパッケージにすることも簡単です。

パッケージフィルターは多くの場合、初めて[パッケージを作成](#creating-a-new-package)するときに定義されますが、後から編集することもできます（その後パッケージを再ビルドする必要があります）。

### パッケージスクリーンショット {#package-screenshots}

パッケージにスクリーンショットを付加すると、コンテンツの外観を視覚的に表現できます。例えば、新機能のスクリーンショットを用意するなどです。

### パッケージアイコン {#package-icons}

また、パッケージにアイコンを付加すると、パッケージの内容をすぐに参照できるように視覚的に表現できます。これはパッケージリストに表示され、パッケージやパッケージのクラスを簡単に識別できます。

1 つのパッケージに含めることができるアイコンは 1 つなので、公式のパッケージには以下の規則が使用されます。

>[!NOTE]
>
>混乱を避けるために、パッケージには説明的なアイコンを使用し、公式アイコンは使用しないでください。

公式のホットフィックスパッケージ：

![](do-not-localize/chlimage_1-28.png)

公式の AEM インストールまたは拡張パッケージ：

公式の機能パック：

![](do-not-localize/chlimage_1-29.png)

## パッケージマネージャー {#package-manager}

パッケージマネージャーでは、ローカルの AEM インストール環境でパッケージが管理されます。[必要な権限の割り当て](#permissions-needed-for-using-the-package-manager)をおこなってから、Package Manager を使用してパッケージの設定、構築、ダウンロード、インストールなど様々なアクションを実行できます。設定する主な要素は次のとおりです。

* [パッケージ設定](#package-settings)
* [パッケージフィルター](#package-filters)

### パッケージマネージャーの使用に必要な権限 {#permissions-needed-for-using-the-package-manager}

パッケージを作成、変更、アップロードおよびインストールする権限をユーザーに付与するには、以下の場所で適切な権限を指定する必要があります。

* **/etc/packages**（削除を除く完全な権限）
* パッケージコンテンツを含むノード

権限の変更手順については、[権限の設定](/help/sites-administering/security.md#setting-page-permissions)を参照してください。

### 新しいパッケージの作成 {#creating-a-new-package}

新しいパッケージ定義を作成するには：

1. On the AEM Welcome screen, click **Packages** (or from the **Tools** console double-click on **Packages**).

1. 次に「**パッケージマネージャー**」を選択します。
1. 「**パッケージを作成**」をクリックします。

   >[!NOTE]
   >
   >多数のパッケージを含むインスタンスの場合は、フォルダー構造が存在する可能性があるので、必要なターゲットフォルダーに移動してから新しいパッケージを作成できます。

1. 次のダイアログで、以下の操作をおこないます。

   ![packagenew](assets/packagesnew.png)

   以下を入力します。

   * **Group Name**

      ターゲットグループ（またはフォルダ）の名前。 グループは、パッケージの整理に役立つように意図されています。

      グループにフォルダーが存在しない場合は、フォルダーが作成されます。 グループ名を空白のままにすると、メインのパッケージリスト（ホーム/パッケージ）にパッケージが作成されます。

   * **パッケージ名**

      新しいパッケージの名前です。 パッケージの内容を簡単に識別できるように、わかりやすい名前を選択します。

   * **バージョン**

      バージョンを示すためのテキストフィールド。 これはパッケージ名に付加され、zipファイルの名前になります。
   「**OK**」をクリックしてパッケージを作成します。

1. AEMは、新しいパッケージを適切なグループフォルダーにリストします。

   ![packagesitem](assets/packagesitem.png)

   アイコンまたはパッケージ名をクリックして開きます。

   ![packagesiteclicked](assets/packagesitemclicked.png)

   >[!NOTE]
   >
   >必要に応じて、後からこのページに戻ることができます。

1. 「**編集**」をクリックして、[パッケージ設定](#package-settings)を編集します。

   ここで、情報の追加や一定の設定の定義ができます。これには、説明、[アイコン](#package-icons)、関連するバグ、プロバイダーの詳細などが含まれます。

   設定の編集が完了したら、「**OK**」をクリックします。

1. 必要に応じて、**[スクリーンショット](#package-screenshots)**&#x200B;をパッケージに追加します。パッケージ作成時は、インスタンスは 1 つです。必要に応じて、サイドキックの&#x200B;**パッケージスクリーンショット**&#x200B;を使用して追加します。

   実際の画像を追加するには、「**スクリーンショット**」領域で画像コンポーネントをダブルクリックし、画像を追加して、「**OK**」をクリックします。

1. **[パッケージフィルター](#package-filters)**&#x200B;を定義するには、サイドキックから&#x200B;**フィルター定義**&#x200B;のインスタンスをドラッグし、ダブルクリックして編集用に開きます。

   ![packagefilter](assets/packagesfilter.png)

   以下を指定します。

   * **ルートパス**
パッケージ化するコンテンツ。サブツリーのルートを指定できます。
   * **Rules** Rulesはオプションです。単純なパッケージ定義の場合、「含む」または「除外する」のルールを指定する必要はありません。

      必要に応じて、「 [**含める** 」または「 **除外する」のルールを定義し、パッケージの内容を正確に定義できます**](#package-filters) 。

      ルール追加を「 **+」記号で囲むか、ルールを「** - **** 」記号で囲むか、削除します。 ルールは順序に従って適用され、 **上へボタンと** 下へ **** ボタンを使用して、必要に応じてルールを配置します。
   「**OK**」をクリックして、フィルターを保存します。

   >[!NOTE]
   >
   >フィルター定義は必要に応じていくつでも使用できますが、競合しないように注意する必要があります。**プレビュー**&#x200B;を使用して、パッケージのコンテンツがどうなるかを確認します。

1. パッケージの内容を確認するには、**プレビュー**&#x200B;を使用できます。ビルドプロセスのドライランが実行され、実際のビルド時にパッケージに追加されるものがすべてリストされます。
1. これで、パッケージを[ビルド](#building-a-package)できます。

   >[!NOTE]
   >
   >この時点でパッケージをビルドしなければならないわけではありません。後からビルドしても構いません。

### Building a Package {#building-a-package}

パッケージは多くの場合、[パッケージ定義の作成](#creating-a-new-package)と同時にビルドされますが、後から戻ってパッケージをビルドまたは再ビルドできます。これは、リポジトリ内のコンテンツが変更された場合に便利です。

>[!NOTE]
>
>パッケージをビルドする前に、パッケージのコンテンツをプレビューすると便利な場合があります。これを行うには、「**プレビュー**」をクリックします。

1. **パッケージマネージャー**&#x200B;からパッケージ定義を開きます（パッケージのアイコンまたは名前をクリック）。

1. 「**ビルド**」をクリックします。パッケージをビルドすることを確認するダイアログが表示されます。

   >[!NOTE]
   >
   >これは、パッケージを再ビルドする場合は特に重要です。パッケージのコンテンツが上書きされるからです。

1. 「**OK**」をクリックします。パッケージが構築されます。パッケージに追加されたすべてのコンテンツがリストされます。パッケージの構築が完了すると、パッケージが構築されたことを示すダイアログが表示されます。また、（このダイアログを閉じると）パッケージリストの内容が更新されます。

### パッケージを再度含める {#rewrapping-a-package}

パッケージは、ビルド後に必要に応じて再度含めることができます。

再ラップは、パッケージの内容を変更 *せずに* 、パッケージ情報を変更します。パッケージ情報は、サムネール、説明などです。つまり、 **パッケージ設定** (Package Settings **)ダイアログで編集できるものはすべて(このダイアログボックスで「**&#x200B;編集」をクリックします)。

再ラップの主な使用例は、パッケージの準備時です。 例えば、既存のパッケージを持っていて、他のユーザーと共有することを決定したとします。 サムネールを追加し、説明を追加する場合は、 すべての機能を含むパッケージ全体を再作成する代わりに（時間がかかり、パッケージが元のものと同じでなくなる可能性があります）、パッケージを再ラップして、サムネールと説明を追加するだけで済みます。

1. **パッケージマネージャー**&#x200B;からパッケージ定義を開きます（パッケージのアイコンまたは名前をクリック）。

1. 「**編集**」をクリックして、必要に応じて&#x200B;**[パッケージ設定](#package-settings)**&#x200B;を更新します。「**OK**」をクリックして保存します。

1. 「**再度含める**」をクリックすると、確認のダイアログが表示されます。

### Viewing and Editing Package Information {#viewing-and-editing-package-information}

パッケージ定義に関する情報を表示または編集するには：

1. パッケージマネージャーで、表示するパッケージに移動します。
1. 表示するパッケージのパッケージアイコンをクリックします。パッケージページが開き、パッケージ定義に関する情報が表示されます。

   ![packagesiteclicked-1](assets/packagesitemclicked-1.png)

   >[!NOTE]
   >
   >このページからも、パッケージに対する編集や一定のアクションを実行できます。
   >
   >使用可能なボタンは、パッケージがビルド済みかどうかによって異なります。

1. パッケージがビルド済みの場合は、「**コンテンツ**」をクリックします。ウィンドウが開き、パッケージのコンテンツ全体が表示されます。

### パッケージコンテンツの表示とインストールのテスト {#viewing-package-contents-and-testing-installation}

パッケージがビルドされたら、コンテンツを表示できます。

1. パッケージマネージャーで、表示するパッケージに移動します。
1. 表示するパッケージのパッケージアイコンをクリックします。パッケージページが開き、パッケージ定義に関する情報が表示されます。

1. コンテンツを表示するには、「**コンテンツ**」をクリックします。ウィンドウが開き、パッケージのコンテンツ全体が表示されます。

   ![packgescontents](assets/packgescontents.png)

1. インストールのドライランを実行するには、「**インストールをテスト**」をクリックします。アクションを確定すると、ウィンドウが開き、インストールが実行されたかのように結果が表示されます。

   ![packagetestinstall](assets/packagestestinstall.png)

### ファイルシステムへのパッケージのダウンロード {#downloading-packages-to-your-file-system}

ここでは、**パッケージマネージャー**&#x200B;を使用して AEM からファイルシステムへパッケージをダウンロードする方法について説明します。

1. On the AEM Welcome screen, click **Packages**, then select **Package Manager**.
1. ダウンロードするパッケージに移動します。

   ![packagedownload](assets/packagesdownload.png)

1. ダウンロードするパッケージの、zip ファイルの名前から形成された（下線付きの）リンク（`export-for-offline.zip` など）をクリックします。

   AEMは、（標準のブラウザダウンロードダイアログを使用して）パッケージをコンピュータにダウンロードします。

### ファイルシステムからのパッケージのアップロード {#uploading-packages-from-your-file-system}

パッケージのアップロードでは、ファイルシステムからAEM Package Managerにパッケージをアップロードできます。
パッケージをアップロードするには：

1. **パッケージマネージャー**&#x200B;に移動します。次に、パッケージのアップロード先のグループフォルダーに移動します。

   ![packagesuploadbutton](assets/packagesuploadbutton.png)

1. 「**パッケージをアップロード**」をクリックします。

   ![packagesuploaddialog](assets/packagesuploaddialog.png)

   * **File**

      You can either type the file name directly, or use the **Browse...** dialog to select the required package from your local file system (after selection click **OK**).

   * **アップロードを強制**

      この名前のパッケージが既に存在する場合は、このボタンをクリックして、強制的にアップロードします（そして既存のパッケージを上書きします）。
   「**OK**」をクリックすると、新しいパッケージがアップロードされ、パッケージマネージャーのリストに表示されます。

   >[!NOTE]
   >
   >AEM でコンテンツを利用できるようにするには、必ず[パッケージをインストール](#installing-packages)してください。

### パッケージの検証 {#validating-packages}

パッケージをインストールする前に、内容を確認することが可能です。Because packages can modify overlaid files under `/apps` and/or add, modify, and remove ACLs, it is often useful to validate these changes before installing.

#### 検証オプション {#validation-options}

検証メカニズムは、次のようなパッケージの特性を確認できます。

* OSGi パッケージの読み込み
* オーバーレイ
* ACL

これらのオプションについて、以下に説明します。

* **OSGi パッケージの読み込みを検証**

   **チェック内容**

   この検証では、パッケージ内のすべての JAR ファイル（OSGi バンドル）を調べ、それらの `manifest.xml`（OSGi バンドルが依存しているバージョン付きの依存関係が含まれているファイル）を抽出し、AEM インスタンスが正しいバージョンで依存関係を書き出すかを確認します。

   **レポート方法**

   Any versioned dependencies that cannot be satisfied by the AEM instance are listed in the **Activity Log** of the Package Manager.

   **エラーの状態**

   未解決の依存関係がある場合、それらの依存関係を持つパッケージ内の OSGi バンドルは開始しません。開始しない OSGi バンドルに依存しているものはすべて正しく機能しなくなるため、これによりアプリケーションのデプロイメントが破損します。

   **エラーの解決**

   依存関係が未解決の OSGi バンドルによるエラーを解決するには、未解決の読み込みがあるバンドルの依存関係バージョンを調整する必要があります。

* **オーバーレイを検証**

   **チェック内容**

   この検証では、インストールするパッケージに、宛先の AEM インスタンスにすでにオーバーレイされているファイルが含まれているかどうかを確認します。

   For example, given an existing overlay at `/apps/sling/servlet/errorhandler/404.jsp`, a package that contains `/libs/sling/servlet/errorhandler/404.jsp`, such that it will change the existing file at `/libs/sling/servlet/errorhandler/404.jsp`.

   **レポート方法**

   そのようなオーバーレイは、パッケージマネージャーの&#x200B;**アクティビティログ**&#x200B;に記載されます。

   **エラーの状態**

   パッケージがすでにオーバーレイされているファイルをデプロイしようとしています。したがって、パッケージ内の変更はオーバーレイによって上書きされ（つまり「非表示」となり）、有効になりません。

   **エラーの解決**

   To resolve this issue, the maintainer of the of the overlay file in `/apps` must review the changes to the overlaid file in `/libs` and incorporate the changes as needed into the overlay ( `/apps`), and redeploy the overlaid file.

   >[!NOTE]
   >
   >オーバーレイされたコンテンツがオーバーレイファイルに適切に組み込まれている場合、検証メカニズムで調整を行うことはできません。 したがって、この検証では、必要な変更が加えられた後も競合についてレポートし続けます。

* **ACL を検証**

   **チェック内容**

   この検証では、どの権限が追加されるか、それらがどのように処理されるか（マージ／置換）、および現在の権限が影響を受けるかどうかを確認します。

   **レポート方法**

   権限については、パッケージマネージャーの&#x200B;**アクティビティログ**&#x200B;に記載されます。

   **エラーの状態**

   明示的なエラーはありません。この検証は、パッケージをインストールすることで新しい ACL 権限が追加されるか、または影響があるかどうかを示すだけです。

   **エラーの解決**

   検証によって提供された情報を使用して、影響を受けたノードを CRXDE で確認したり、必要に応じて ACL をパッケージ内で調整したりできます。

   >[!CAUTION]
   >
   >ベストプラクティスとして、予期しない製品の動作を引き起こす可能性があるため、パッケージは AEM 提供の ACL に影響を与えないようにすることをお勧めします。

#### 検証の実行 {#performing-validation}

パッケージの検証は 2 とおりの方法で行うことができます。

* パッケージマネージャーの UI から
* cURL などの HTTP POST リクエストを介して

>[!NOTE]
>
>検証は、パッケージをアップロードした後で、インストールする前に必ず行う必要があります。

**パッケージマネージャーによるパッケージ検証**

1. Open the Package Manager at `https://<server>:<port>/crx/packmgr`
1. Select the package in the list and then select **More** dropdown from the heading and then **Validate** from the drop-down menu.

   >[!NOTE]
   >
   >これは、コンテンツパッケージをアップロードした後、パッケージをインストールする前に実行する必要があります。

1. 表示されるモーダルダイアログボックスで、チェックボックスを使用して検証の種類を選択し、「**検証**」をクリックして検証を開始します。あるいは「**キャンセル**」をクリックします。

1. 選択された検証が実行されます。実行結果は、パッケージマネージャーのアクティビティログに表示されます。

**HTTP POST リクエストを介したパッケージ検証**

POST リクエストの形式は以下のとおりです。

```
https://<host>:<port>/crx/packmgr/service.jsp?cmd=validate&type=osgiPackageImports,overlays,acls
```

>[!NOTE]
>
>`type` パラメーターは、カンマで区切った順不同リストで、次のもので構成されます。
>
>* `osgiPackageImports`
>* `overlays`
>* `acls`

>
>
The value of `type` defaults to `osgiPackageImports` if not passed.

以下は、cURL を使用してパッケージ検証を実行する例です。

1. cURL を使用している場合は、次のようなステートメントを実行してください。

   ```shell
   curl -v -X POST --user admin:admin -F file=@/Users/SomeGuy/Desktop/core.wcm.components.all-1.1.0.zip 'http://localhost:4502/crx/packmgr/service.jsp?cmd=validate&type=osgiPackageImports,overlays,acls'
   ```

1. 要求された検証が実行され、応答が JSON オブジェクトとして送り返されます。

>[!NOTE]
>
>検証 HTTP POST リクエストへの応答は、検証結果を含む JSON オブジェクトになります。

### Installing Packages {#installing-packages}

パッケージをアップロードしたら、コンテンツをインストールする必要があります。パッケージコンテンツがインストールされ、機能する状態になるには、以下の両方の条件が満たされている必要があります。

* loaded into AEM (either [uploaded from your filesystem](#uploading-packages-from-your-file-system) or downloaded from [Software Distribution](#software-distribution))

* インストールされていること

>[!CAUTION]
>
>パッケージをインストールすると、既存のコンテンツが上書きまたは削除される可能性があります。必要なコンテンツが削除または上書きされないと確認できる場合にのみ、パッケージをアップロードしてください。
>
>パッケージのコンテンツまたは影響を確認する方法は以下のとおりです。
>
>* 内容を変更せずに、パッケージのテストインストールを実行します。
   >  パッケージを開き（パッケージのアイコンまたは名前をクリック）、「 **テストインストール**」をクリックします。
   >
   >
* パッケージの内容のリストを参照してください。
   >  パッケージを開き、「 **コンテンツ**」をクリックします。

>



>[!NOTE]
>
>パッケージのインストールの直前に、上書きされるコンテンツを含むスナップショットパッケージが作成されます。
>
>このスナップショットは、パッケージをアンインストールした場合に再インストールされます。

>[!CAUTION]
>
>デジタルアセットをインストールする場合は、次の手順を実行する必要があります。
>
>* 最初に、ワークフローランチャーをアクティベート解除します。
   >  Use the Components menu option of the OSGi console to deactivate `com.day.cq.workflow.launcher.impl.WorkflowLauncherImpl`.
   >
   >
* 次に、インストールが完了したら、ワークフローランチャーを再アクティベートします。
>
>
ワークフローランチャーをアクティベート解除しておくと、インストール時に Assets インポーターフレームワークによって、アセットに意図しない操作がおこなわれることはありません。

1. パッケージマネージャーで、インストールするパッケージに移動します。

   まだインストールされていないパッケージの横に、「**インストール**」ボタンが表示されます。

   >[!NOTE]
   >
   >また、パッケージのアイコンをクリックしてパッケージを開き、そこで「**インストール**」ボタンにアクセスすることもできます。

1. 「**インストール**」をクリックしてインストールを開始します。確認のダイアログが開き、おこなわれているすべての変更が表示されます。完了したら、ダイアログで「**閉じる**」をクリックします。

   インストールが完了すると、そのパッケージの横に「**インストール済み**」と表示されます。

### ファイルシステムベースのアップロードおよびインストール {#file-system-based-upload-and-installation}

別の方法でパッケージをインスタンスにアップロードおよびインストールすることもできます。In your file system, you have a `crx-quicksart` folder alongside with your jar and `license.properties` file. You need to create a folder named `install` under `crx-quickstart`. You will then have something like this: `<aem_home>/crx-quickstart/install`

この install フォルダーにパッケージを直接追加できます。追加したパッケージは、インスタンスに自動的にアップロードおよびインストールされます。完了すると、パッケージマネージャーにそれらのパッケージが表示されるようになります。

インスタンスが実行中の場合、`install` フォルダーにパッケージを追加すると、ただちにそのインスタンスに対してアップロードおよびインストールが開始されます。インスタンスが実行中でない場合、`install` フォルダーに追加したパッケージは起動時にアルファベット順にインストールされます。

>[!NOTE]
>
>この作業はインスタンスの初回起動前におこなうこともできます。その場合は、`crx-quickstart` フォルダーを手動で作成し、その下に `install` フォルダーを作成してそこにパッケージを追加する必要があります。これで、インスタンスの初回起動時に、パッケージがアルファベット順にインストールされるようになります。

### パッケージのアンインストール {#uninstalling-packages}

AEMでは、パッケージをアンインストールできます。 このアクションにより、パッケージのインストール直前に作成されたスナップショットに含まれているリポジトリのコンテンツが元に戻ります。

>[!NOTE]
>
>インストール時に、上書きされるコンテンツを含むスナップショットパッケージが作成されます。
>
>このパッケージは、パッケージをアンインストールしたときに再インストールされます。

1. パッケージマネージャーで、アンインストールするパッケージに移動します。
1. アンインストールするパッケージのパッケージアイコンをクリックします。
1. 「**アンインストール**」をクリックして、このパッケージのコンテンツをリポジトリから削除します。確認のダイアログが開き、おこなわれているすべての変更が表示されます。完了したら、ダイアログで「**閉じる**」をクリックします。

### パッケージの削除 {#deleting-packages}

パッケージマネージャーのリストからパッケージを削除するには：

>[!NOTE]
>
>パッケージからインストール済みのファイルやノードは削除&#x200B;**されません**。

1. In the **Tools** console, expand the **Packages** folder to show your package in the right-hand pane.

1. 削除するパッケージをクリックして強調表示し、以下のいずれかの手順を実行します。

   * Click **Delete** in the toolbar menu.
   * 右クリックして「**削除**」を選択します。

   ![packagedelete](assets/packagesdelete.png)

1. パッケージの削除を確認するメッセージが表示されます。 「**OK**」をクリックして削除を確認します。

>[!CAUTION]
>
>このパッケージが既にインストールされている場合、インストール済みの&#x200B;**&#x200B;コンテンツは削除&#x200B;**されません**。

### パッケージのレプリケーション {#replicating-packages}

パッケージのコンテンツをレプリケートして、パブリッシュインスタンスにインストールします。

1. **パッケージマネージャー**&#x200B;で、レプリケートするパッケージに移動します。

1. レプリケートするパッケージのアイコンまたは名前をクリックして展開します。
1. ツールバーの「**詳細**」ドロップダウンメニューで、「**レプリケーション**」を選択します。

## パッケージ共有 {#package-share}

パッケージ共有は、コンテンツパッケージを共有できるように一元化されたサーバです。

Software Distribution( [ソフトウェア配布](#software-distribution))に置き換えられました。

## ソフトウェア配布 {#software-distribution}

[ソフトウェア配布](https://downloads.experiencecloud.adobe.com) (Software Distribution)は、AEMパッケージの検索とダウンロードを簡単にするように設計された新しいユーザーインターフェイスです。

詳細については、 [ソフトウェア配布ドキュメントを参照してください](https://experienceleague.adobe.com/docs/experience-cloud/software-distribution/home.html)。

>[!CAUTION]
>
>現時点では、AEM package managerはソフトウェア配布では使用できません。パッケージをローカルディスクにダウンロードしてください。

