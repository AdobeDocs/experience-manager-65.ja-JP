---
title: パッケージの使用方法
seo-title: パッケージの使用方法
description: AEM でのパッケージの基本的な使用方法について説明します。
seo-description: AEM でのパッケージの基本的な使用方法について説明します。
uuid: cba76a5f-5d75-4d63-a0f4-44c13fa1baf2
contentOwner: Chiradeep Majumdar
products: SG_EXPERIENCEMANAGER/6.5/SITES
topic-tags: content
content-type: reference
discoiquuid: 6694a135-d1e1-4afb-9f5b-23991ee70eee
docset: aem65
translation-type: tm+mt
source-git-commit: 5e10ddb0e5cf24e1915d0840cd380520374e93ea

---


# パッケージの使用方法{#how-to-work-with-packages}

パッケージによって、リポジトリコンテンツの読み込みと書き出しが可能になります。例えば、パッケージを使用すると、新しい機能のインストール、インスタンス間でのコンテンツの転送、リポジトリコンテンツのバックアップが可能です。

パッケージは、以下のページからアクセスおよび保守できます。

* [パッケージマネージャー](#package-manager)：ローカルの AEM インスタンスでパッケージを管理する際に使用します。

* [パッケージ共有](#package-share)：公開されているパッケージと社内用の非公開のパッケージの両方を格納している一元管理用サーバーです。公開パッケージには、ホットフィックス、新機能、ドキュメントなどを含めることができます。

パッケージマネージャー、パッケージ共有、ユーザーのファイルシステムの間でパッケージを転送できます。

## パッケージとは {#what-are-packages}

パッケージとは、ファイルシステムシリアル化（「vault」シリアル化）の形式でリポジトリコンテンツが格納されている zip ファイルです。これにより、使いやすく編集しやすい方法でファイルおよびフォルダーを表現できます。

パッケージには、フィルターを使用して選択された、ページコンテンツとプロジェクト関連コンテンツの両方のコンテンツが含まれます。

パッケージには、フィルタ定義やインポート設定情報などのVaultメタ情報も含まれます。説明、視覚的な画像、アイコンなど、パッケージには追加のコンテンツプロパティ（パッケージの抽出に使用されない）を含めることができます。これらのプロパティは、コンテンツパッケージコンシューマー向けのもので、情報提供のみを目的としています。

>[!NOTE]
>
>パッケージは、そのパッケージを作成した時点におけるコンテンツの現在のバージョンを表しています。AEM がリポジトリに保持している以前のバージョンのコンテンツは含まれません。

パッケージでは以下のアクションを実行できます。

* 新しいパッケージを作成し、必要に応じてパッケージ設定やフィルターを定義
* パッケージのコンテンツをプレビュー（ビルド前）
* パッケージをビルド
* パッケージ情報を表示
* パッケージのコンテンツを表示（ビルド後）
* 既存のパッケージの定義を変更
* 既存のパッケージを再ビルド
* パッケージを再度含める
* AEM からファイルシステムへパッケージをダウンロード
* ファイルシステムからローカルAEMインスタンスへのパッケージのアップロード
* インストール前にパッケージの内容を検証
* ドライ作動のインストールの実行
* パッケージをインストール（AEM はパッケージのアップロード後に自動インストールしません）
* パッケージを削除
* ホットフィックスなどのパッケージをパッケージ共有ライブラリからダウンロード
* パッケージ共有ライブラリの社内セクションにパッケージをアップロード

## パッケージ情報 {#package-information}

パッケージの定義は、次のような様々な種類の情報で構成されています。

* [パッケージ設定](#package-settings)
* [パッケージフィルター](#package-filters)
* [パッケージスクリーンショット](#package-screenshots)
* [パッケージアイコン](#package-icons)

### パッケージ設定 {#package-settings}

様々なパッケージ設定を編集して、パッケージの説明、関連するバグ、依存関係、プロバイダー情報などの側面を定義できます。

**パッケージ設定**&#x200B;ダイアログは、パッケージを&#x200B;**作成**&#x200B;または[編集](#creating-a-new-package)中に「[編集](#viewing-and-editing-package-information)」ボタンをクリックすると表示され、設定用のタブが 3 つ含まれます。変更をおこなったら、「**OK**」をクリックして保存します。

![packageedit](assets/packagesedit.png)

| **フィールド** | **説明** |
|---|---|
| 名前 | パッケージの名前。 |
| グループ | パッケージの追加先の、パッケージを整理するためのグループの名前。新しいグループの名前を入力するか、既存のグループを選択します。 |
| バージョン | カスタムバージョンに使用するテキスト。 |
| 説明 | パッケージの簡単な説明。書式設定に HTML マークアップを使用できます。 |
| サムネール | パッケージリストと共に表示するアイコン。「参照」をクリックしてローカルファイルを選択します。 |

![chlimage_1-108](assets/chlimage_1-108.png)

<table>
 <tbody>
  <tr>
   <th><strong>フィールド</strong></th>
   <th><strong>説明</strong></th>
   <th><strong>形式／例</strong></th>
  </tr>
  <tr>
   <td>名前</td>
   <td>プロバイダーの名前。</td>
   <td><em>AEM Geometrixx<br /> </em></td>
  </tr>
  <tr>
   <td>URL</td>
   <td>プロバイダーの URL。</td>
   <td><em>https://www.aem-geometrixx.com</em></td>
  </tr>
  <tr>
   <td>リンク</td>
   <td>プロバイダーページへの、パッケージ専用のリンク。</td>
   <td><em>https://www.aem-geometrixx.com/mypackage.html</em></td>
  </tr>
  <tr>
   <td>次を必要とする<br /> </td>
   <td>
    <ul>
     <li>管理者：管理者権限のあるアカウントでのみパッケージがインストール可能な場合に選択します。</li>
     <li>再起動：パッケージをインストール後にサーバーを再起動する必要がある場合に選択します。</li>
    </ul> </td>
   <td> </td>
  </tr>
  <tr>
   <td>AC の処理</td>
   <td><p>パッケージ読み込み時の、パッケージで定義されているアクセス制御情報の処理方法を指定します。</p>
    <ul>
     <li><strong>無視</strong></li>
     <li><strong>上書き</strong></li>
     <li><strong>統合</strong></li>
     <li><strong>消去</strong></li>
     <li><strong>統合して保存</strong></li>
    </ul> <p>デフォルト値は <strong>Ignore</strong> です。</p> </td>
   <td>
    <ul>
     <li><strong>無視</strong> - リポジトリ内の ACL を保持</li>
     <li><strong>上書き</strong> - リポジトリ内の ACL を上書き</li>
     <li><strong>統合</strong> - 両方の ACL セットを統合</li>
     <li><strong>消去</strong> - ACL を消去</li>
     <li><strong>統合して保存</strong> - コンテンツ内に存在しないプリンシパルのアクセス制御エントリを追加し、コンテンツ内のアクセス制御をパッケージが提供するものとマージ</li>
    </ul> </td>
  </tr>
 </tbody>
</table>

![パッケージの依存関係](assets/packagesdependencies.png)

| **フィールド** | **説明** | **形式／例** |
|---|---|---|
| テスト環境 | このパッケージのターゲットまたは互換性のある製品名およびバージョン。 | *AEM 6* |
| 修正された問題 | このパッケージで修正されたバグの詳細をリストできるテキストフィールド。バグはそれぞれ別々の行に入力してください。 | バグ番号と概要 |
| 依存 | 現在のパッケージを期待どおりに実行するために他のパッケージが必要な場合に配慮する必要のある依存関係情報をリストします。このフィールドはホットフィックスを使用する場合に重要です。 | groupId:name:version |
| 置き換え | このパッケージで置き換えられる廃止されたパッケージのリスト。インストール前に、古いパッケージの必要なコンテンツがすべてこのパッケージに含まれていることを確認し、コンテンツが上書きされないようにしてください。 | groupId:name:version |

### パッケージフィルター {#package-filters}

Filters identify the repository nodes to include in the package. A **Filter Definition** specifies the following information:

* 含めるコンテンツの&#x200B;**ルートパス**。
* **ルート** パスの下にある特定のノードを含めるか除外するルール。

フィルターには、0個以上のルールを含めることができます。ルールが定義されていない場合、パッケージにはルートパスの下にすべてのコンテンツが含まれます。

パッケージに対して1つ以上のフィルター定義を定義できます。複数のルートパスのコンテンツを含めるには、複数のフィルターを使用します。

![chlimage_1-109](assets/chlimage_1-109.png)

次の表で、これらのルールについて説明し、例を示します。

<table>
 <tbody>
  <tr>
   <th> ルールタイプ</th>
   <th>説明 </th>
   <th>例 </th>
  </tr>
  <tr>
   <td> include</td>
   <td>パスを定義するか、正規表現を使用して、含めるすべてのノードを指定できます。<br />
<br />
ディレクトリを含めると、
    <ul>
     <li>そのディレクトリと、そのディレクトリ内のすべてのファイルおよびフォルダー（サブツリー全体）が含まれます。<i></i></li>
     <li>指定したルートパスの下のその他のファイルやフォルダーは含まれ<strong>ません</strong>。</li>
    </ul> </td>
   <td>/libs/sling/install(/.*)?  </td>
  </tr>
  <tr>
   <td> exclude</td>
   <td>パスを指定するか、正規表現を使用して、除外するすべてのノードを指定できます。<br />
。
<br /><i>
。

ディレクトリを除外すると、そのディレクトリと、そのディレクトリ内のすべてのファイルおよびフォルダー（サブツリー全体）が除外されます。</i><br /> </td>
   <td>/libs/wcm/foundation/components(/.*)?</td>
  </tr>
 </tbody>
</table>

>[!NOTE]
>
>1 つのパッケージに複数のフィルター定義を含めることができるので、別々の場所のノードを組み合わせて 1 つのパッケージにすることも簡単です。

パッケージフィルターは多くの場合、初めて[パッケージを作成](#creating-a-new-package)するときに定義されますが、後から編集することもできます（その後パッケージを再ビルドする必要があります）。

### パッケージスクリーンショット {#package-screenshots}

パッケージにスクリーンショットを付加すると、コンテンツの外観を視覚的に表現できます。例えば、新機能のスクリーンショットを用意するなどです。

### パッケージアイコン {#package-icons}

また、パッケージにアイコンを付加すると、パッケージの内容をすぐに参照できるように視覚的に表現できます。これはパッケージリストに表示され、パッケージやパッケージのクラスを簡単に識別できます。

1 つのパッケージに含めることができるアイコンは 1 つなので、公式のパッケージには以下の規則が使用されます。

>[!NOTE]
>
>混乱を避けるために、パッケージには説明的なアイコンを使用し、公式アイコンは使用しないでください。

公式のホットフィックスパッケージ：

![](do-not-localize/chlimage_1-28.png)

公式の AEM インストールまたは拡張パッケージ：

公式の機能パック：

![](do-not-localize/chlimage_1-29.png)

## パッケージマネージャー {#package-manager}

パッケージマネージャーでは、ローカルの AEM インストール環境でパッケージが管理されます。[必要な権限の割り当て](#permissions-needed-for-using-the-package-manager)をおこなってから、Package Manager を使用してパッケージの設定、構築、ダウンロード、インストールなど様々なアクションを実行できます。設定する主な要素は次のとおりです。

* [パッケージ設定](#package-settings)
* [パッケージフィルター](#package-filters)

### パッケージマネージャーの使用に必要な権限 {#permissions-needed-for-using-the-package-manager}

パッケージを作成、変更、アップロードおよびインストールする権限をユーザーに付与するには、以下の場所で適切な権限を指定する必要があります。

* **/etc/packages**（削除を除く完全な権限）
* パッケージコンテンツを含むノード

権限の変更手順については、[権限の設定](/help/sites-administering/security.md#setting-page-permissions)を参照してください。

### 新しいパッケージの作成 {#creating-a-new-package}

新しいパッケージ定義を作成するには：

1. On the AEM Welcome screen, click **Packages** (or from the **Tools** console double-click on **Packages**).

1. 次に「**パッケージマネージャー**」を選択します。
1. 「**パッケージを作成**」をクリックします。

   >[!NOTE]
   >
   >多数のパッケージを含むインスタンスの場合は、フォルダー構造が存在する可能性があるので、必要なターゲットフォルダーに移動してから新しいパッケージを作成できます。

1. 次のダイアログで、以下の操作をおこないます。

   ![packagenew](assets/packagesnew.png)

   以下を入力します。

   * **Group Name**

      ターゲットグループ（またはフォルダ）の名前。 グループは、パッケージの整理に役立つように意図されています。

      グループにフォルダーが存在しない場合は、そのグループ用にフォルダーが作成されます。 グループ名を空白のままにすると、メインのパッケージリスト（ホーム/パッケージ）にパッケージが作成されます。

   * **パッケージ名**

      新しいパッケージの名前。 パッケージの内容を簡単に識別できるよう、わかりやすい名前を選択します。

   * **バージョン**

      バージョンを示すテキストフィールド。 これがパッケージ名に追加され、zipファイルの名前が形成されます。
   「**OK**」をクリックしてパッケージを作成します。

1. AEMは、新しいパッケージを適切なグループフォルダーに一覧表示します。

   ![packagesitem](assets/packagesitem.png)

   アイコンまたはパッケージ名をクリックして開きます。

   ![packagesitemclicked](assets/packagesitemclicked.png)

   >[!NOTE]
   >
   >必要に応じて、後からこのページに戻ることができます。

1. 「**編集**」をクリックして、[パッケージ設定](#package-settings)を編集します。

   ここで、情報の追加や一定の設定の定義ができます。これには、説明、[アイコン](#package-icons)、関連するバグ、プロバイダーの詳細などが含まれます。

   設定の編集が完了したら、「**OK**」をクリックします。

1. 必要に応じて、**[スクリーンショット](#package-screenshots)**をパッケージに追加します。パッケージ作成時は、インスタンスは 1 つです。必要に応じて、サイドキックの&#x200B;**パッケージスクリーンショット**を使用して追加します。

   実際の画像を追加するには、「**スクリーンショット**」領域で画像コンポーネントをダブルクリックし、画像を追加して、「**OK**」をクリックします。

1. **[パッケージフィルター](#package-filters)**を定義するには、サイドキックから&#x200B;**フィルター定義**のインスタンスをドラッグし、ダブルクリックして編集用に開きます。

   ![packagefilter](assets/packagesfilter.png)

   以下を指定します。

   * **ルートパス**
パッケージ化するコンテンツ。サブツリーのルートを指定できます。
   * **ルール**&#x200B;ルールはオプションです。単純なパッケージ定義の場合、「含む」または「除外する」ルールを指定する必要はありません。

      必要に応じて、「含む」または「除外する [**」ルールを定義し&#x200B;**、パッケージの内容を正確に定義できます****](#package-filters)。

      ルールを追加するには **+記号を** 使用し、ルールを削除するには **— 記号を使用** します。 ルールは順序に従って適用され、「上へ」および「下へ」ボタンを使用して必要に応 **じて** 配置 **されます** 。
   「**OK**」をクリックして、フィルターを保存します。

   >[!NOTE]
   >
   >フィルター定義は必要に応じていくつでも使用できますが、競合しないように注意する必要があります。**プレビュー**&#x200B;を使用して、パッケージのコンテンツがどうなるかを確認します。

1. パッケージの内容を確認するには、**プレビュー**&#x200B;を使用できます。ビルドプロセスのドライランが実行され、実際のビルド時にパッケージに追加されるものがすべてリストされます。
1. これで、パッケージを[ビルド](#building-a-package)できます。

   >[!NOTE]
   >
   >この時点でパッケージをビルドしなければならないわけではありません。後からビルドしても構いません。

### Building a Package {#building-a-package}

パッケージは多くの場合、[パッケージ定義の作成](#creating-a-new-package)と同時にビルドされますが、後から戻ってパッケージをビルドまたは再ビルドできます。これは、リポジトリ内のコンテンツが変更された場合に便利です。

>[!NOTE]
>
>パッケージをビルドする前に、パッケージのコンテンツをプレビューすると便利な場合があります。これを行うには、「**プレビュー**」をクリックします。

1. **パッケージマネージャー**&#x200B;からパッケージ定義を開きます（パッケージのアイコンまたは名前をクリック）。

1. 「**ビルド**」をクリックします。パッケージをビルドすることを確認するダイアログが表示されます。

   >[!NOTE]
   >
   >これは、パッケージを再ビルドする場合は特に重要です。パッケージのコンテンツが上書きされるからです。

1. 「**OK**」をクリックします。パッケージが構築されます。パッケージに追加されたすべてのコンテンツがリストされます。パッケージの構築が完了すると、パッケージが構築されたことを示すダイアログが表示されます。また、（このダイアログを閉じると）パッケージリストの内容が更新されます。

### パッケージを再度含める {#rewrapping-a-package}

パッケージは、ビルド後に必要に応じて再度含めることができます。

リラップは、パッケージの内容を変更する *ことなく* 、パッケージ情報を変更します。パッケージ情報は、サムネール、説明など、つまり、パッケージ設定ダイアログで編集できるすべて **の情報** (「編集」をク **リック**)。

リラップの主な使用例は、パッケージ共有用のパッケージを準備する場合です。 例えば、既存のパッケージを持っていて、他のユーザーと共有することを決定したとします。 サムネールを追加し、説明を追加する場合。 すべての機能を含むパッケージ全体を再作成する代わりに（時間がかかり、パッケージが元のパッケージと同じでなくなるリスクが生じる可能性があります）、パッケージを再ラップし、サムネールと説明を追加するだけで済みます。

1. **パッケージマネージャー**&#x200B;からパッケージ定義を開きます（パッケージのアイコンまたは名前をクリック）。

1. 「**編集**」をクリックして、必要に応じて&#x200B;**[パッケージ設定](#package-settings)**を更新します。「**OK**」をクリックして保存します。

1. 「**再度含める**」をクリックすると、確認のダイアログが表示されます。

### Viewing and Editing Package Information {#viewing-and-editing-package-information}

パッケージ定義に関する情報を表示または編集するには：

1. パッケージマネージャーで、表示するパッケージに移動します。
1. 表示するパッケージのパッケージアイコンをクリックします。パッケージページが開き、パッケージ定義に関する情報が表示されます。

   ![packagesitemclicked-1](assets/packagesitemclicked-1.png)

   >[!NOTE]
   >
   >このページからも、パッケージに対する編集や一定のアクションを実行できます。
   >
   >使用可能なボタンは、パッケージがビルド済みかどうかによって異なります。

1. パッケージがビルド済みの場合は、「**コンテンツ**」をクリックします。ウィンドウが開き、パッケージのコンテンツ全体が表示されます。

### パッケージコンテンツの表示とインストールのテスト {#viewing-package-contents-and-testing-installation}

パッケージがビルドされたら、コンテンツを表示できます。

1. パッケージマネージャーで、表示するパッケージに移動します。
1. 表示するパッケージのパッケージアイコンをクリックします。パッケージページが開き、パッケージ定義に関する情報が表示されます。

1. コンテンツを表示するには、「**コンテンツ**」をクリックします。ウィンドウが開き、パッケージのコンテンツ全体が表示されます。

   ![packgescontents](assets/packgescontents.png)

1. インストールのドライランを実行するには、「**インストールをテスト**」をクリックします。アクションを確定すると、ウィンドウが開き、インストールが実行されたかのように結果が表示されます。

   ![packagestinstall](assets/packagestestinstall.png)

### ファイルシステムへのパッケージのダウンロード {#downloading-packages-to-your-file-system}

ここでは、**パッケージマネージャー**&#x200B;を使用して AEM からファイルシステムへパッケージをダウンロードする方法について説明します。

>[!NOTE]
>
>公開領域およびパッケージ共有の社内領域からホットフィックス、機能パックおよびパッケージをダウンロードする方法について詳しくは、[パッケージ共有](#package-share)を参照してください。
>
>パッケージ共有からは、次のことが可能です。
>
>* [パッケージ共有からローカル AEM インスタンスに直接](#downloading-and-installing-packages-from-package-share)パッケージをダウンロード。
   >  ダウンロードしたパッケージはリポジトリに読み込まれ、**パッケージマネージャー**&#x200B;を使用してすぐにローカルインスタンスにインストールできます。これらのパッケージには、ホットフィックスやその他の共有パッケージが含まれています。
   >
   >
* [パッケージ共有からファイルシステムに](#downloading-packages-to-your-file-system-from-package-share)パッケージをダウンロード。
>



1. On the AEM Welcome screen, click **Packages**, then select **Package Manager**.
1. ダウンロードするパッケージに移動します。

   ![packagedownload](assets/packagesdownload.png)

1. ダウンロードするパッケージの、zip ファイルの名前から形成された（下線付きの）リンク（`export-for-offline.zip` など）をクリックします。

   AEMは、（標準のブラウザーダウンロードダイアログを使用して）パッケージをコンピューターにダウンロードします。

### ファイルシステムからのパッケージのアップロード {#uploading-packages-from-your-file-system}

パッケージのアップロードでは、ファイルシステムからAEM Package Managerにパッケージをアップロードできます。

>[!NOTE]
>
>See [Uploading packages to the company-internal Package Share](#uploading-packages-to-the-company-internal-package-share) to upload a package to your company&#39;s private area of Package Share.

パッケージをアップロードするには：

1. **パッケージマネージャー**&#x200B;に移動します。次に、パッケージのアップロード先のグループフォルダーに移動します。

   ![packagesuploadbutton](assets/packagesuploadbutton.png)

1. 「**パッケージをアップロード**」をクリックします。

   ![packagesuploaddialog](assets/packagesuploaddialog.png)

   * **File**

      **ファイル名を直接入力するか、[参照]を使**&#x200B;用します。ダイアログが開き、ローカルファイルシステムから必要なパッケージを選択できます(選択後、「 **OK**」をクリックします)。

   * **アップロードを強制**

      この名前のパッケージが既に存在する場合は、このボタンをクリックして強制的にアップロード（および既存のパッケージを上書き）できます。
   「**OK**」をクリックすると、新しいパッケージがアップロードされ、パッケージマネージャーのリストに表示されます。

   >[!NOTE]
   >
   >AEM でコンテンツを利用できるようにするには、必ず[パッケージをインストール](#installing-packages)してください。

### パッケージの検証 {#validating-packages}

パッケージをインストールする前に、内容を確認することが可能です。Because packages can modify overlaid files under `/apps` and/or add, modify, and remove ACLs, it is often useful to validate these changes before installing.

#### 検証オプション {#validation-options}

検証メカニズムは、次のようなパッケージの特性を確認できます。

* OSGi パッケージの読み込み
* オーバーレイ
* ACL

これらのオプションについて、以下に説明します。

* **OSGi パッケージの読み込みを検証**

   **チェック内容**

   この検証では、パッケージ内のすべての JAR ファイル（OSGi バンドル）を調べ、それらの `manifest.xml`（OSGi バンドルが依存しているバージョン付きの依存関係が含まれているファイル）を抽出し、AEM インスタンスが正しいバージョンで依存関係を書き出すかを確認します。

   **レポート方法**

   Any versioned dependencies that cannot be satisfied by the AEM instance are listed in the **Activity Log** of the Package Manager.

   **エラーの状態**

   未解決の依存関係がある場合、それらの依存関係を持つパッケージ内の OSGi バンドルは開始しません。開始しない OSGi バンドルに依存しているものはすべて正しく機能しなくなるため、これによりアプリケーションのデプロイメントが破損します。

   **エラーの解決**

   依存関係が未解決の OSGi バンドルによるエラーを解決するには、未解決の読み込みがあるバンドルの依存関係バージョンを調整する必要があります。

* **オーバーレイを検証**

   **チェック内容**

   この検証では、インストールするパッケージに、宛先の AEM インスタンスにすでにオーバーレイされているファイルが含まれているかどうかを確認します。

   For example, given an existing overlay at `/apps/sling/servlet/errorhandler/404.jsp`, a package that contains `/libs/sling/servlet/errorhandler/404.jsp`, such that it will change the existing file at `/libs/sling/servlet/errorhandler/404.jsp`.

   **レポート方法**

   そのようなオーバーレイは、パッケージマネージャーの&#x200B;**アクティビティログ**&#x200B;に記載されます。

   **エラーの状態**

   パッケージがすでにオーバーレイされているファイルをデプロイしようとしています。したがって、パッケージ内の変更はオーバーレイによって上書きされ（つまり「非表示」となり）、有効になりません。

   **エラーの解決**

   To resolve this issue, the maintainer of the of the overlay file in `/apps` must review the changes to the overlaid file in `/libs` and incorporate the changes as needed into the overlay ( `/apps`), and redeploy the overlaid file.

   >[!NOTE]
   >
   >オーバーレイコンテンツがオーバーレイファイルに適切に組み込まれている場合、検証メカニズムで調整を行うことはできません。 したがって、この検証では、必要な変更が加えられた後も競合についてレポートし続けます。

* **ACL を検証**

   **チェック内容**

   この検証では、どの権限が追加されるか、それらがどのように処理されるか（マージ／置換）、および現在の権限が影響を受けるかどうかを確認します。

   **レポート方法**

   権限については、パッケージマネージャーの&#x200B;**アクティビティログ**&#x200B;に記載されます。

   **エラーの状態**

   明示的なエラーはありません。この検証は、パッケージをインストールすることで新しい ACL 権限が追加されるか、または影響があるかどうかを示すだけです。

   **エラーの解決**

   検証によって提供された情報を使用して、影響を受けたノードを CRXDE で確認したり、必要に応じて ACL をパッケージ内で調整したりできます。

   >[!CAUTION]
   >
   >ベストプラクティスとして、予期しない製品の動作を引き起こす可能性があるため、パッケージは AEM 提供の ACL に影響を与えないようにすることをお勧めします。

#### 検証の実行 {#performing-validation}

パッケージの検証は 2 とおりの方法で行うことができます。

* パッケージマネージャーの UI から
* cURL などの HTTP POST リクエストを介して

>[!NOTE]
>
>検証は、パッケージをアップロードした後で、インストールする前に必ず行う必要があります。

**パッケージマネージャーによるパッケージ検証**

1. Open the Package Manager at `https://<server>:<port>/crx/packmgr`
1. Select the package in the list and then select **More** dropdown from the heading and then **Validate** from the drop-down menu.

   >[!NOTE]
   >
   >これは、コンテンツパッケージをアップロードした後、パッケージをインストールする前に実行する必要があります。

1. 表示されるモーダルダイアログボックスで、チェックボックスを使用して検証の種類を選択し、「**検証**」をクリックして検証を開始します。あるいは「**キャンセル**」をクリックします。

1. 選択された検証が実行されます。実行結果は、パッケージマネージャーのアクティビティログに表示されます。

**HTTP POST リクエストを介したパッケージ検証**

POST リクエストの形式は以下のとおりです。

```
https://<host>:<port>/crx/packmgr/service.jsp?cmd=validate&type=osgiPackageImports,overlays,acls
```

>[!NOTE]
>
>`type` パラメーターは、カンマで区切った順不同リストで、次のもので構成されます。
>
>* `osgiPackageImports`
>* `overlays`
>* `acls`
>
>
The value of `type` defaults to `osgiPackageImports` if not passed.

以下は、cURL を使用してパッケージ検証を実行する例です。

1. cURL を使用している場合は、次のようなステートメントを実行してください。

   ```shell
   curl -v -X POST --user admin:admin -F file=@/Users/SomeGuy/Desktop/core.wcm.components.all-1.1.0.zip 'http://localhost:4502/crx/packmgr/service.jsp?cmd=validate&type=osgiPackageImports,overlays,acls'
   ```

1. 要求された検証が実行され、応答が JSON オブジェクトとして送り返されます。

>[!NOTE]
>
>検証 HTTP POST リクエストへの応答は、検証結果を含む JSON オブジェクトになります。

### Installing Packages {#installing-packages}

パッケージをアップロードしたら、コンテンツをインストールする必要があります。パッケージコンテンツがインストールされ、機能する状態になるには、以下の両方の条件が満たされている必要があります。

* loaded into AEM (either [uploaded from your filesystem](#uploading-packages-from-your-file-system) or [downloaded from package share](#downloading-and-installing-packages-from-package-share))

* インストールされていること

>[!CAUTION]
>
>パッケージをインストールすると、既存のコンテンツが上書きまたは削除される可能性があります。必要なコンテンツが削除または上書きされないと確認できる場合にのみ、パッケージをアップロードしてください。
>
>パッケージのコンテンツまたは影響を確認する方法は以下のとおりです。
>
>* 内容を変更せずに、パッケージのテストインストールを実行します。
   >  パッケージを開き（パッケージアイコンまたは名前をクリック）、「 **Test Install」をクリックします**。
   >
   >
* パッケージの内容のリストを参照してください。
   >  パッケージを開き、「 **Contents**」をクリックします。
>



>[!NOTE]
>
>パッケージのインストールの直前に、上書きされるコンテンツを含むスナップショットパッケージが作成されます。
>
>このスナップショットは、パッケージをアンインストールした場合に再インストールされます。

>[!CAUTION]
>
>デジタルアセットをインストールする場合は、次の手順を実行する必要があります。
>
>* 最初に、ワークフローランチャーをアクティベート解除します。
   >  Use the Components menu option of the OSGi console to deactivate `com.day.cq.workflow.launcher.impl.WorkflowLauncherImpl`.
   >
   >
* 次に、インストールが完了したら、ワークフローランチャーを再アクティベートします。
>
>
ワークフローランチャーをアクティベート解除しておくと、インストール時に Assets インポーターフレームワークによって、アセットに意図しない操作がおこなわれることはありません。

1. パッケージマネージャーで、インストールするパッケージに移動します。

   まだインストールされていないパッケージの横に、「**インストール**」ボタンが表示されます。

   >[!NOTE]
   >
   >また、パッケージのアイコンをクリックしてパッケージを開き、そこで「**インストール**」ボタンにアクセスすることもできます。

1. 「**インストール**」をクリックしてインストールを開始します。確認のダイアログが開き、おこなわれているすべての変更が表示されます。完了したら、ダイアログで「**閉じる**」をクリックします。

   インストールが完了すると、そのパッケージの横に「**インストール済み**」と表示されます。

### ファイルシステムベースのアップロードおよびインストール {#file-system-based-upload-and-installation}

別の方法でパッケージをインスタンスにアップロードおよびインストールすることもできます。In your file system, you have a `crx-quicksart` folder alongside with your jar and `license.properties` file. You need to create a folder named `install` under `crx-quickstart`. You will then have something like this: `<aem_home>/crx-quickstart/install`

この install フォルダーにパッケージを直接追加できます。追加したパッケージは、インスタンスに自動的にアップロードおよびインストールされます。完了すると、パッケージマネージャーにそれらのパッケージが表示されるようになります。

インスタンスが実行中の場合、`install` フォルダーにパッケージを追加すると、ただちにそのインスタンスに対してアップロードおよびインストールが開始されます。インスタンスが実行中でない場合、`install` フォルダーに追加したパッケージは起動時にアルファベット順にインストールされます。

>[!NOTE]
>
>この作業はインスタンスの初回起動前におこなうこともできます。その場合は、`crx-quickstart` フォルダーを手動で作成し、その下に `install` フォルダーを作成してそこにパッケージを追加する必要があります。これで、インスタンスの初回起動時に、パッケージがアルファベット順にインストールされるようになります。

### パッケージのアンインストール {#uninstalling-packages}

AEMでは、パッケージをアンインストールできます。 このアクションにより、パッケージのインストール直前に作成されたスナップショットに含まれているリポジトリのコンテンツが元に戻ります。

>[!NOTE]
>
>インストール時に、上書きされるコンテンツを含むスナップショットパッケージが作成されます。
>
>このパッケージは、パッケージをアンインストールしたときに再インストールされます。

1. パッケージマネージャーで、アンインストールするパッケージに移動します。
1. アンインストールするパッケージのパッケージアイコンをクリックします。
1. 「**アンインストール**」をクリックして、このパッケージのコンテンツをリポジトリから削除します。確認のダイアログが開き、おこなわれているすべての変更が表示されます。完了したら、ダイアログで「**閉じる**」をクリックします。

### パッケージの削除 {#deleting-packages}

パッケージマネージャーのリストからパッケージを削除するには：

>[!NOTE]
>
>パッケージからインストール済みのファイルやノードは削除&#x200B;**されません**。

1. In the **Tools** console, expand the **Packages** folder to show your package in the right-hand pane.

1. 削除するパッケージをクリックして強調表示し、以下のいずれかの手順を実行します。

   * Click **Delete** in the toolbar menu.
   * 右クリックして「**削除**」を選択します。
   ![packagedelete](assets/packagesdelete.png)

1. パッケージの削除を確認するメッセージが表示されます。 「**OK**」をクリックして削除を確認します。

>[!CAUTION]
>
>このパッケージが既にインストールされている場合、インストール済みの&#x200B;**&#x200B;コンテンツは削除&#x200B;**されません**。

### パッケージのレプリケーション {#replicating-packages}

パッケージのコンテンツをレプリケートして、パブリッシュインスタンスにインストールします。

1. **パッケージマネージャー**&#x200B;で、レプリケートするパッケージに移動します。

1. レプリケートするパッケージのアイコンまたは名前をクリックして展開します。
1. ツールバーの「**詳細**」ドロップダウンメニューで、「**レプリケーション**」を選択します。

## パッケージ共有 {#package-share}

パッケージ共有は、コンテンツパッケージを共有するために公開されている一元管理用サーバーです。

パッケージ共有を使用すると、公式のホットフィックス、機能セット、更新、他のユーザーが作成したサンプルコンテンツなどのパッケージをダウンロードできます。

また、自社内でパッケージをアップロードして共有することもできます。

### パッケージ共有へのアクセス {#access-to-package-share}

パッケージ共有には匿名アクセスはありません。つまり、登録ユーザーのみがパッケージを表示、ダウンロードおよびアップロードできるということです。

パッケージ共有へは、パートナーや顧客もアクセスできます。アクセス権の割り当てを受けるには、登録の詳細を送信する必要があります。

パッケージ共有にアクセスするには：

* [ログインページ](#signing-in-to-package-share)を使用します。
* ログインページを初めて使用するときは、次の手順を実行する必要があります。

   * [Adobe ID の登録](#registering-for-package-share)、[、既存の Adobe ID の検証](#validating-your-adobe-id)の、いずれかまたは両方を行います。。
   * これによって、[パッケージ共有アカウント](#package-share-account)を作成できます。

>[!NOTE]
>
>顧客に割り当てられていないパッケージ共有ユーザーがリソースを見るには、パッケージ共有ログインの横の「**参加**」をクリックしてコミュニティに参加する必要があります。

#### パッケージ共有へのログイン {#signing-in-to-package-share}

1. On the AEM Welcome screen, click **Tools**.
1. 次に「**パッケージ共有**」を選択します。以下のいずれかを要求する画面が表示されます。

   * Adobe ID でのログイン
   * [Adobe ID の作成](#registering-for-package-share)
   >[!NOTE]
   >
   >Adobe ID を使用して初めてログインする場合は、[電子メールアドレスの検証](#validating-your-adobe-id)を完了する必要があります。

   >[!NOTE]
   >
   >パスワードを忘れた場合は、[ヘルプページ](https://enterprise-dev.adobe.com/content/edev/en/registration/account.html)リンク（同じくログインダイアログ上）を使用してください。

#### Adobe ID の検証 {#validating-your-adobe-id}

Adobe ID を使用してパッケージ共有に初めてログインすると、電子メールアドレスが検証されます。

1. リンクを含む電子メールが届きます。
1. このリンクをクリックする必要があります。
1. Webページが開きます。

   このWebページを開く操作は検証と見なされます。

1. ログインが続行します。

1. リンクを含む電子メールが届きます。
1. このリンクをクリックする必要があります。
1. Web ページが開きます。この Web ページを開くアクションは、検証と見なされます。
1. ログインが続行します。

#### パッケージ共有への登録 {#registering-for-package-share}

パッケージ共有へのアクセスが必要な場合は、Adobe ID の登録が必要です。

* [パッケージ共有ログインページ](#signing-in-to-package-share)に、Adobe ID を登録するためのリンクがあります。
* Adobe ID は、アドビの一定のデスクトップソフトウェアから登録できます。
* また、[アドビのログインページ](https://www.adobe.com/cfusion/membership/index.cfm?nf=1&nl=1)でオンラインで登録することもできます。

Adobe ID は、以下の情報を提供することによって作成できます。

* 電子メールアドレス
* 自分で選んだパスワード
* 名前や居住国などの追加情報

#### パッケージ共有アカウント {#package-share-account}

アプリケーションの妥当性は、次のタイミングで確認できます。

* 必要な／許可されている権限でユーザーアカウントを作成する前
* 自社のグループにアカウントを追加する前

>[!NOTE]
>
>パートナー会社のユーザーは、自分の顧客グループのメンバーにもなることができます。

#### ネットワークに関する考慮事項 {#network-considerations}

**IPv6**

純粋な IPv6 環境からパッケージ共有にアクセスしようとすると、問題が発生する場合があります。

これは、パッケージ共有がサーバー上でホストされているサービスであり、インターネット上の様々なネットワークを経由して接続がおこなわれるからです。接続しているすべてのネットワークが IPv6 をサポートしていることは確証できません。サポートしていないネットワークがある場合は、接続が失敗することがあります。

この問題を回避するには、IPv4 ネットワークからパッケージ共有にアクセスし、パッケージをダウンロードしてから、IPv6 環境にアップロードします。

**HTTP プロキシ**

認証が必要な HTTP プロキシを実行している会社では、現時点ではパッケージ共有を使用できません。

パッケージ共有は、AEM サーバーからインターネットへのアクセス時に認証が必要でない環境でのみ使用可能です。HTTP クライアントを使用するすべてのサービス（パッケージ共有を含む）にプロキシを設定するには、[Day Commons HTTP Client 3.1 バンドルの OSGi 設定](/help/sites-deploying/osgi-configuration-settings.md)を使用してください。

### パッケージ共有の内部 {#inside-package-share}

パッケージ共有内で、パッケージは次の 3 つのサブツリーに配置されています。

* アドビが提供するアドビパッケージ。
* 他社が提供し、アドビが公開した共有パッケージ。
* 各社の非公開のパッケージ。

![chlimage_1-110](assets/chlimage_1-110.png)

### パッケージの検索とフィルタリング {#searching-and-filtering-packages}

パッケージ共有には、特定のキーワードやタグの検索に使用できる検索バーがあります。キーワードもタグも、複数の値をサポートしています。

* 複数のキーワードを検索するには、キーワードをそれぞれスペースで区切る必要があります。
* 複数のタグを検索するには、それぞれをパッケージツリーで選択する必要があります。

フィルター概要バーの右側で、条件演算子を OR から AND に変更することもできます。

### Downloading And Installing Packages From Package Share {#downloading-and-installing-packages-from-package-share}

パッケージ共有からパッケージをダウンロードしてローカルインスタンスにインストールするには、AEM インスタンスからパッケージ共有にアクセスするほうが簡単です。パッケージはダウンロード後、パッケージマネージャーにただちに登録され、そこからインストールできます。

1. AEM のようこそ画面から、「**ツール**」をクリックし、「**パッケージ共有**」を選択してパッケージ共有ページを開きます。
1. アカウントの詳細を使用して、パッケージ共有にログインします。ランディングページが表示され、Adobe フォルダー、Shared フォルダーおよび会社専用のフォルダーがリストされます。

   >[!NOTE]
   >
   >パッケージ共有からのパッケージのダウンロードを開始する前に、[必要なアクセス権](#access-to-package-share)があることを確認してください。

1. ダウンロードするパッケージに移動して「**ダウンロード**」をクリックします。

1. AEM インスタンスで&#x200B;**パッケージマネージャー**&#x200B;に戻るか移動します。次に、上記でダウンロードしたパッケージに移動します。

   >[!NOTE]
   >
   >ダウンロードしたパッケージを見つけるには、パッケージ共有と同じパスに従います。例えば、パッケージ共有内のダウンロード元のパスが
   >
   >**Packages**／**Public**／**Hotfixes**
   である場合、ローカルインスタンスのパッケージマネージャーでも、パッケージは以下の場所にあります。
   **Packages**／**Public**／**Hotfixes**

1. 「**インストール**」をクリックして、パッケージをローカルの AEM インストールにインストールします。

   >[!NOTE]
   パッケージがインスタンスに既にインストールされている場合、パッケージの横には、「**インストール**」ボタンではなく、「**インストール済み**」と表示されます。

   >[!CAUTION]
   パッケージをインストールすると、リポジトリ内の既存のコンテンツが上書きされる可能性があります。したがって、まず「**インストールをテスト**」を実行することをお勧めします。パッケージに含まれているコンテンツが既存のコンテンツと競合するかどうかを調査できます。

### パッケージ共有からファイルシステムへのパッケージのダウンロード {#downloading-packages-to-your-file-system-from-package-share}

[ダウンロード後ただちにインストール](#downloading-and-installing-packages-from-package-share)すると非常に便利ですが、必要に応じて、パッケージをダウンロードしてローカルファイルシステムに保存することもできます。

1. パッケージ共有で、パッケージのアイコンまたは名前をクリックします。
1. 「**アセット**」タブをクリックします。
1. 「**次のディスクにダウンロード**」をクリックします。

### パッケージのアップロード {#uploading-a-package}

パッケージ共有では、パッケージ共有の社内領域にパッケージをアップロードできます。これにより、パッケージを社内で共有できます。

これらのパッケージは一般的な AEM コミュニティでは使用できませんが、会社に登録されているすべてのユーザーが使用できます。**

社内のパッケージ共有にパッケージをアップロードするには：

>[!CAUTION]
パッケージ共有にパッケージをアップロードするには、まず会社の名前を付けたグループフォルダーをローカルのパッケージマネージャー上に作成する必要があります。例えば、geometrixx などです。共有用にアップロードするパッケージはすべて、このグループフォルダーに配置する必要があります。
パッケージマネージャーのホームリストまたはその他のフォルダー内のパッケージは共有できません。

1. **パッケージマネージャー**&#x200B;を開いて、アップロードするパッケージに移動します。

1. パッケージアイコンをクリックしてパッケージを開きます。
1. 「**共有**」をクリックして、パッケージをパッケージ共有にアップロードするためのダイアログを開きます。
1. パッケージ共有にまだログインしていない場合は、ログイン資格情報を入力する必要があります。

   ログインすると、AEM には、アップロードするパッケージの詳細が表示されます。

   ![chlimage_1-111](assets/chlimage_1-111.png)

1. 「**共有**」をクリックして、社内のパッケージ共有にパッケージをアップロードします。

   AEM にステータスが表示され、パッケージのアップロードが完了すると通知があります。その後、「**x**」（右上隅）をクリックすると、**共有パッケージ**&#x200B;ウィンドウを終了できます。

1. アップロードが完了したら、社内のフォルダーに移動して、共有したパッケージを確認できます。

>[!NOTE]
パッケージ共有で使用できるパッケージを変更するには、ダウンロードし、再ビルドしてから、パッケージ共有に再度アップロードする必要があります。

### パッケージの削除 {#deleting-a-package}

自分でアップロードしたパッケージのみを、以下の手順で削除できます。

1. 会社のツリーで、該当するパッケージを含むパッケージグループを確認します。
1. 該当するパッケージをクリックします。
1. 削除ボタンをクリックします。

   ![chlimage_1-18](do-not-localize/chlimage_1-30.png)

1. 「**削除**」をクリックして、パッケージの削除を確認します。

### パッケージのセミプライベート化 {#making-packages-semi-private}

組織の外部にパッケージを共有できますが、公開されるわけではありません。これらのパッケージは、セミプライベートと見なされます。これらのセミプライベートパッケージを共有するには、アドビサポートの支援を受ける必要があります。これをおこなうには、チケットを開いて、パッケージを組織の外部で利用できるようにアドビサポートにリクエストします。パッケージへのアクセス権を付与するAdobe IDのリストが表示されます。

## ソフトウェア配布（ベータ版） {#software-distribution-beta}

[ソフトウェア配布は](https://downloads.experiencecloud.adobe.com) 、AEMパッケージの検索とダウンロードを簡単にするように設計された新しいユーザーインターフェイスです。 現在、ベータ版の状態で、Adobe Managed Servicesおよびクラウドサービスのお客様としてのAEMおよびアドビの従業員のみが利用できます。

>[!NOTE]
* [パッケージ共有は](#package-share) 、すべてのお客様がソフトウェア配布にアクセスできるまで、引き続き運用されます。
* すべてのパッケージは、パッケージ共有とソフトウェア配布の両方から入手できます。


>[!CAUTION]
現時点では、AEM Package Managerはソフトウェア配布では使用できません。パッケージをローカルディスクにダウンロードします。

