---
title: MSM の問題のトラブルシューティングと FAQ
description: MSM に関する最も一般的な問題のトラブルシューティング方法と、MSM に関する最も一般的な質問に対する回答について説明します。
feature: Multi Site Manager
role: Admin
exl-id: 23f3391b-5ce3-48e1-ab27-a37737778089
solution: Experience Manager, Experience Manager Sites
source-git-commit: 76fffb11c56dbf7ebee9f6805ae0799cd32985fe
workflow-type: tm+mt
source-wordcount: '761'
ht-degree: 96%

---

# MSM の問題のトラブルシューティングと FAQ {#troubleshooting-msm}

## トラブルシューティングの最初の手順 {#first-steps}

MSM で誤った動作やエラーと思われる問題が発生している場合は、トラブルシューティングを開始し、詳細なトラブルシューティングをおこなう前に、以下を確認してください。

* [MSM FAQ](#faq) を調べてください。問題や質問は既に解決されているものかもしれません。
* [MSM のベストプラクティスに関する記事](msm-best-practices.md)を参照してください。いくつかの誤解を解く説明といくつかのヒントが提供されています。

## ブループリントとライブコピーに関する詳細な情報を見つける {#advanced-info}

MSM は、リソース URL のセレクターと共に要求できる複数のサーブレットを登録します。これらは UI で使用されますが、ページに対する高度な計算済み MSM ステータスを追加で直接表示するために、直接要求することもできます。

1. `http://<host>:<port>/content/path/to/bluprint/page.blueprint.json?&maxSize=500&advancedStatus=true&returnRelationships=true&msm%3Atrigger=ROLLOUT`
   * ブループリントページでこの情報を使用して、リンクされているすべてのライブコピーのリストと、追加のライブコピーのステータス情報を取得します。
   * 例：
     `http://localhost:4502/content/wknd/language-masters/en.blueprint.json?&maxSize=500&advancedStatus=true&returnRelationships=true&msm%3Atrigger=ROLLOUT`


1. `http://<host>:<port>/content/path/to/livecopy/page.msm.json`
   * ライブコピーページでこれを使用して、ブループリントページとの接続に関する詳細情報を取得します。ページがライブコピーでない場合は、何も返されません。
   * 例：
     `http://localhost:4502/content/wknd/ca/en.msm.json`

これらのサーブレットは、`com.day.cq.wcm.msm` ロガーを介して DEBUG ログメッセージを生成します。これも役に立ちます。

## リポジトリ内の MSM 固有の情報を確認する {#checking-repo}

以前のサーブレットは、MSM 固有のノードと Mixin に基づいて計算済みの情報を返していました。情報は、次の方法でリポジトリに格納されます。

* `cq:LiveSync` mixin タイプ
   * `jcr:content`ノードで設定され、ルートのライブコピーページを定義します。
   * これらのページには、タイプ `cq:LiveCopy` の `cq:LiveSyncConfig` 子ノードがあり、以下のプロパティを介してライブコピーに関する基本情報と必須情報が含まれています。
      * `cq:master` は、ライブコピーのブループリントページを指します。
      * `cq:rolloutConfigs` は、ライブコピーに適用されたアクティブなロールアウト設定を示します。
      * このルートライブコピーページの子ページが、ライブコピーに含まれる場合、`cq:isDeep` は、true になります。
* `cq:LiveRelationship` mixin タイプ
   * すべてのライブコピーページの `jcr:content` ノードにこのような mixin タイプがあります。
   * そうでない場合は、ライブコピーアクション（作成またはロールアウト）以外のオーサリングインターフェイスを使用して、ある時点でのページがデタッチまたは手動で作成されています。
* `cq:LiveSyncCancelled` mixin タイプ
   * 中断されたライブコピーページの `jcr:content` ノードに追加されました。
   * サスペンションが子ページに対しても有効な場合、同じノードで `cq:isCancelledForChildren` プロパティが true に設定されます。

これらのプロパティに表示される情報は UI に反映される必要がありますが、トラブルシューティングをおこなう場合は、MSM アクションが発生したときにリポジトリで直接 MSM の動作を確認すると便利です。

これらのプロパティを知ることは、リポジトリでクエリを実行し、特定の状態にあるページのセットを見つけるのにも役立ちます。例：

* `select * from cq:LiveSync` は、すべてのライブコピーのルートページを返します。

## FAQ {#faq}

MSM とライブコピーに関するよくある質問を以下に示します。

### MSM ロールアウト中に一部のプロパティ（タイトル、注釈など）が更新されないのはなぜですか？ {#missing-properties}

MSM 同期アクションは詳細に設定できます。ロールアウト中に変更されるプロパティまたはコンポーネントは、それらの設定のプロパティに直接依存します。

このトピックの詳細については、[こちらの記事](msm-best-practices.md)を参照してください。

### 作成者グループのロールアウト権限を削除する方法を教えてください。  {#remove-rollout-permissions}

AEM プリンシパル（ユーザーまたはグループ）の&#x200B;**ロールアウト**&#x200B;権限を設定または削除することはできません。

別の方法として、次のいずれかを実行できます。

* 製品 UI をカスタマイズし、特定のプリンシパルのロールアウトアクションを非表示にする。
* ロールアウトを許可されていない作成者に対し、ライブコピーツリーからの書き込み権限を削除する。

### サフィックス「_msm_moved」の付いたライブコピーページが表示されるのはなぜですか。 {#moved-pages}

ブループリントページがロールアウトされると、ライブコピーページが更新されるか、存在しない場合は新しいライブコピーページが作成されます。 例えば、初めてロールアウトされたときや、ライブコピーページが手動で削除されたときなどです。

ただし、後者の場合、`cq:LiveRelationship` プロパティのないページが同じ名前で存在する場合は、ライブコピーページが作成される前に、このページの名前が変更されます。

デフォルトでは、ロールアウトは、リンクされたライブコピーページに、ブループリントの更新がロールアウトされると想定します。あるいは、ライブコピーページの作成時には、ページが存在しないと想定します。

「スタンドアロン」ページが見つかった場合、MSM はこのページの名前を変更し、リンクされた別のライブコピーページを作成することを選択します。

ライブコピーサブツリー内のこのようなスタンドアロンページは通常、**分離**&#x200B;操作の結果として発生するか、以前のライブコピーページを作成者が手動で削除して、同じ名前で再作成した場合に発生します。

これを回避するには、**分離**&#x200B;の代わりに、ライブコピーの&#x200B;**休止**&#x200B;機能を使用します。**分離**&#x200B;アクションについて詳しくは、[この記事](msm-livecopy.md)を参照してください。
