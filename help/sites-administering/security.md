---
title: ユーザー管理とセキュリティ
description: AEM でのユーザー管理とセキュリティについて説明します。
contentOwner: msm-service
products: SG_EXPERIENCEMANAGER/6.5/SITES
topic-tags: Security
content-type: reference
docset: aem65
exl-id: 53d8c654-8017-4528-a44e-e362d8b59f82
feature: Security
solution: Experience Manager, Experience Manager Sites
source-git-commit: 76fffb11c56dbf7ebee9f6805ae0799cd32985fe
workflow-type: tm+mt
source-wordcount: '5398'
ht-degree: 93%

---

# ユーザー管理とセキュリティ{#user-administration-and-security}

ここでは、ユーザー認証を設定および維持管理する方法について説明し、AEM における認証機能と承認機能の背景にある理論についても説明します。

## AEM のユーザーとグループ {#users-and-groups-in-aem}

この節では、維持管理しやすいユーザー管理の概念の設定に役立つ様々なエンティティと、関連する概念について詳しく説明します。

### ユーザー {#users}

ユーザーは、自分のアカウントを使用して AEM にログオンします。各ユーザーアカウントは一意であり、アカウントの基本的な詳細と、割り当てられた権限を保持します。

多くの場合、ユーザーはグループのメンバーであり、グループ化することでこれらの権限の割り当てが簡略化されます。

### グループ {#groups}

グループは、ユーザー、その他のグループ、またはその両方のコレクションです。このようなコレクションはすべて、グループのメンバーと呼ばれます。

グループの主な目的は、更新するエンティティの数を減らしてメンテナンスプロセスを簡略化することです。グループに対する変更がそのグループのすべてのメンバーに適用されるからです。多くの場合、グループには次の項目が反映されています。

* アプリケーション内の役割：コンテンツの閲覧を許可されているユーザー、コンテンツの投稿を許可されているユーザーなどです。
* 自分の組織：投稿者がコンテンツツリー内の別のブランチに制限されている場合は、役割を拡張して、別の部門の投稿者を区別することができます。

したがって、グループは固定される傾向にありますが、ユーザーはより頻繁に追加または削除されます。

計画を立て構造を整理しておくことで、構造に合わせてグループを使用できるようになります。その結果、概要を把握しやすくなるだけでなく、効率的なメカニズムで更新できるようになります。

### 組み込みのユーザーとグループ {#built-in-users-and-groups}

AEM WCM では複数のユーザーとグループがインストールされます。これらが表示されるのは、インストール後に初めてセキュリティコンソールにアクセスしたときです。

各ユーザーおよびグループと、それぞれの次の情報を以下の表に示します。

* 簡単な説明
* 必要な変更に関するレコメンデーション

*デフォルトのパスワードはすべて変更してください*（特定の状況下でアカウント自体を削除しない場合）。

<table>
 <tbody>
  <tr>
   <td>ユーザー ID</td>
   <td>タイプ</td>
   <td>説明</td>
   <td>レコメンデーション</td>
  </tr>
  <tr>
   <td><p>admin</p> <p>デフォルトのパスワード：admin</p> </td>
   <td>User</td>
   <td><p>フルアクセス権を持つシステム管理者アカウント。</p> <p>このアカウントは、AEM WCM と CRX 間の接続に使用されます。</p> <p>このアカウントを誤って削除した場合は、リポジトリの再起動時に（デフォルト設定で）再作成されます。</p> <p>admin アカウントは AEM プラットフォームに必須です。つまり、このアカウントは削除できません。</p> </td>
   <td><p>このユーザーアカウントのデフォルトのパスワードを変更することをお勧めします。</p> <p>後で変更することもできますが、できればインストール時に変更してください。</p> <p>メモ：このアカウントを CQ Servlet Engine の admin アカウントと混同しないでください。</p> </td>
  </tr>
  <tr>
   <td><p>anonymous</p> <p> </p> </td>
   <td>User</td>
   <td><p>インスタンスに対する非認証アクセスのデフォルトの権限を保持します。このアカウントには、デフォルトで最小限のアクセス権が付与されます。</p> <p>このアカウントを誤って削除した場合は、起動時に再作成されます。このアカウントを完全に削除することはできませんが、無効にすることは可能です。</p> </td>
   <td>オーサーインスタンスの機能に悪影響を及ぼすので、このアカウントを削除したり無効にしたりしないでください。セキュリティ要件によりアカウントを削除しなければならない場合は、まず、システムに与える影響を正しくテストしてください。</td>
  </tr>
  <tr>
   <td><p>作成者</p> <p>デフォルトのパスワード：author</p> </td>
   <td>ユーザー</td>
   <td><p>/content への書き込みが許可されている作成者アカウント。投稿者と閲覧者の権限が含まれます。</p> <p>/content ツリー全体へのアクセスが可能なので、web マスターとして使用できます。</p> <p>このアカウントは組み込みユーザーではなく、別の Geometrixx デモユーザーです</p> </td>
   <td><p>このアカウントを完全に削除するか、デフォルトのパスワードを変更することをお勧めします。</p> <p>後で変更することもできますが、できればインストール時に変更してください。</p> </td>
  </tr>
  <tr>
   <td>administrators</td>
   <td>グループ</td>
   <td><p>すべてのメンバーに管理者権限が付与されているグループ。このグループを編集できるのは admin だけです。</p> <p>フルアクセス権限が割り当てられています。</p> </td>
   <td>ノードに「deny-everyone」を設定しても、管理者はそのノードにアクセスできます</td>
  </tr>
  <tr>
   <td>content-authors</td>
   <td>グループ</td>
   <td><p>コンテンツ編集を担当するグループ。読み取り、変更、作成および削除の権限が必要です。</p> </td>
   <td>読み取り、変更、作成および削除の権限を追加すると、プロジェクト専用のアクセス権限を持つ独自の content-author グループを作成できます。</td>
  </tr>
  <tr>
   <td>contributor</td>
   <td>グループ</td>
   <td><p>ユーザーがコンテンツを書き込むための基本的な権限（機能のみ）。</p> <p>/content ツリーへの権限は割り当てません。個々のグループまたはユーザーに割り当てる必要があります。</p> </td>
   <td> </td>
  </tr>
  <tr>
   <td>dam-users</td>
   <td>グループ</td>
   <td>一般的な AEM Assets ユーザーのための標準提供の参照グループ。このグループのメンバーは、アセットやコレクションのアップロードまたは共有を有効にするための適切な権限を持っています。</td>
   <td> </td>
  </tr>
  <tr>
   <td>everyone</td>
   <td>グループ</td>
   <td><p>すべてのツールでグループつまりメンバーシップの関係が使用されるとは限りませんが、AEM の各ユーザーは everyone グループのメンバーになっています。</p> <p>このグループはすべてのユーザー（今後作成されるユーザーも含む）に権限を適用するために使用できるので、デフォルトの権限と見なすことができます。</p> </td>
   <td><p>このグループを変更または削除しないでください。</p> <p>このアカウントを変更すると、セキュリティに影響が生じる可能性があります。</p> </td>
  </tr>
  <tr>
   <td>tag-administrators</td>
   <td>グループ</td>
   <td>タグの編集が許可されているグループ。</td>
   <td> </td>
  </tr>
  <tr>
   <td>user-administrators</td>
   <td>グループ</td>
   <td>ユーザー管理をおこなうことができます。つまり、ユーザーとグループを作成する権限が与えられます。</td>
   <td> </td>
  </tr>
  <tr>
   <td>ワークフロー編集者</td>
   <td>グループ</td>
   <td>ワークフローモデルの作成と変更が許可されているグループ。</td>
   <td> </td>
  </tr>
  <tr>
   <td>ワークフローユーザー</td>
   <td>グループ</td>
   <td><p>ワークフローに参加するユーザーは、workflow-users グループのメンバーになっている必要があります。ユーザーには、ワークフローインスタンスを更新できるように、/etc/workflow/instances への完全なアクセス権限が付与されます。</p> <p>このグループは標準インストールに含まれていますが、ユーザーを手動でグループに追加する必要があります。</p> </td>
  </tr>
 </tbody>
</table>

## AEM の権限 {#permissions-in-aem}

AEM では、ACL を使用して、ユーザーまたはグループが実行できるアクションとそのアクションを実行できる場所を決定します。

### 権限と ACL {#permissions-and-acls}

権限では、リソースに対してどのユーザーがどのようなアクションを実行できるかを定義します。権限は、[アクセス制御](#access-control-lists-and-how-they-are-evaluated)の評価の結果です。

AEM の個々の[アクション](security.md#actions)のチェックボックスをオン／オフにすることで、特定のユーザーに対して付与／拒否された権限を変更できます。チェックマークありは、アクションが許可されていることを示します。チェックマークなしは、アクションが拒否されていることを示します。

また、グリッド内のチェックマークは、AEM 内のどの場所（パス）でどのような権限がユーザーに付与されているかを示します。

### アクション {#actions}

アクションは、ページ（リソース）で実行できます。階層内の各ページで、ユーザーがそのページに対して実行できるアクションを指定できます。[権限](#permissions-and-acls)を使用してアクションを許可または拒否できます。

<table>
 <tbody>
  <tr>
   <td><strong>アクション </strong></td>
   <td><strong>説明 </strong></td>
  </tr>
  <tr>
   <td>読み取り</td>
   <td>ユーザーは、ページおよびその子ページを読み取ることが許可されます。</td>
  </tr>
  <tr>
   <td>変更</td>
   <td><p>ユーザーは次の操作を実行できます。</p>
    <ul>
     <li>ページ上および任意の子ページ上の既存のコンテンツを変更します。</li>
     <li>ページ上または任意の子ページ上に段落を作成します。</li>
    </ul> <p>JCR レベルでは、ユーザーは、プロパティの編集、ロック、バージョン管理、nt-modifications を行うことでリソースを編集でき、jcr:content 子ノードを定義するノードに対する完全な書き込み権限を持ちます。例えば、cq:Page、nt:file、cq:Asset などです。</p> </td>
  </tr>
  <tr>
   <td>作成</td>
   <td><p>ユーザーは次の操作を実行できます。</p>
    <ul>
     <li>ページまたは子ページを作成します。</li>
    </ul> <p><strong>変更</strong>が拒否された場合、jcr:content とその子ノードの作成はページの変更と見なされるので、jcr:content の下のサブツリーは除外されます。これは、jcr:content 子ノードを定義するノードにのみ適用されます。</p> </td>
  </tr>
  <tr>
   <td>削除</td>
   <td><p>ユーザーは次の操作を実行できます。</p>
    <ul>
     <li>既存の段落をページまたは子ページから削除します。</li>
     <li>ページまたは子ページを削除します。</li>
    </ul> <p><strong>変更</strong>が拒否されると、jcr:content およびその子ノードの削除がページの変更と見なされるので、jcr:content の下のサブツリーが除外されます。これは、jcr:content 子ノードを定義するノードにのみ適用されます。</p> </td>
  </tr>
  <tr>
   <td>ACL 読み取り</td>
   <td>ユーザーは、ページまたは子ページのアクセス制御リストを読み取ることができます。</td>
  </tr>
  <tr>
   <td>ACL 編集</td>
   <td>ユーザーは、ページまたは子ページのアクセス制御リストを変更できます。</td>
  </tr>
  <tr>
   <td>レプリケーション</td>
   <td>ユーザーはコンテンツを別の環境（パブリッシュ環境など）にレプリケーションできます。この権限は子ページにも適用されます。</td>
  </tr>
 </tbody>
</table>

>[!NOTE]
>
>AEM は[コレクション](/help/assets/manage-collections.md)で role-assignment のユーザーグループ（所有者、編集者、閲覧者）を自動的に生成します。ただし、このようなグループに ACL を手動で追加すると、AEM 内にセキュリティの脆弱性が生じる可能性があります。アドビでは、ACL を手動で追加しないことをお勧めします。

### アクセス制御リストとその評価方法 {#access-control-lists-and-how-they-are-evaluated}

AEM WCM は、アクセス制御リスト（ACL）を使用して、様々なページに適用される権限を整理します。

アクセス制御リストは、個々の権限で構成され、これらの権限の適用順を決定するために使用されます。リストは、検討中のページの階層に従って作成されます。次に、ページに適用する最初の適切な権限が見つかるまで、このリストが下から順にスキャンされます。

>[!NOTE]
>
>サンプルと共に含まれる ACL があります。アプリケーションに適した内容を検討、判断されることをお勧めします。付属の ACL を確認するには、**CRXDE** にアクセスし、以下のノードの「**アクセス制御**」タブを選択します。
>
>* `/etc/cloudservices`
>* `/home/users/we-retail`
>
>カスタムアプリケーションは、次のような他の関係へのアクセスを設定できます。
>
>* `*/social/relationships/friend/*`
>* または `*/social/relationships/pending-following/*`。
>
>コミュニティ特有の ACL を作成する場合は、そのコミュニティに参加するメンバーに追加の権限を付与できます。例えば、`/content/we-retail/us/en/community` でユーザーがコミュニティに参加する場合です。

### 権限の状態 {#permission-states}

>[!NOTE]
>
>CQ 5.3 ユーザーの場合：
>
>以前の CQ バージョンとは異なり、ユーザーがページの変更のみを行う必要がある場合は、**作成**&#x200B;と&#x200B;**削除**&#x200B;は許可されません。代わりに、ユーザーが既存のページでコンポーネントを作成、変更、削除できるようにする場合にのみ、**変更**&#x200B;アクションを許可します。
>
>後方互換性を確保するために、アクションのテストでは、**jcr:content** を定義するノードの特別な処理は考慮されません。

| **アクション** | **説明** |
|---|---|
| 許可（チェックマーク） | AEM WCM では、ユーザーはこのページまたは任意の子ページでアクションを実行できます。 |
| 拒否（チェックマークなし） | AEM WCM において、ユーザーはこのページまたは任意の子ページでアクションを実行できません。 |

この権限は子ページにも適用されます。

親ノードから権限が継承されず、その権限の対象となるローカルエントリが 1 つ以上ある場合は、次の記号がチェックボックスに表示されます。ローカルエントリは CRX 2.2 インターフェイスで作成されたものです（現時点では、ワイルドカード ACL は CRX でのみ作成できます）。

特定のパスにおけるアクションには次の記号が表示されます。

<table>
 <tbody>
  <tr>
   <td>*（アスタリスク）</td>
   <td>1 つ以上の（有効または無効な）ローカルエントリがあります。このようなワイルドカード ACL は CRX で定義されます。</td>
  </tr>
  <tr>
   <td>! （感嘆符）</td>
   <td>現在、1 つ以上の無効なエントリがあります。</td>
  </tr>
 </tbody>
</table>

アスタリスクまたは感嘆符の上にポインタを合わせると、宣言されたエントリの詳細を示すツールチップが表示されます。ツールチップは 2 つの部分に分割されています。

<table>
 <tbody>
  <tr>
   <td>上部</td>
   <td><p>有効なエントリがリストされます。</p> </td>
  </tr>
  <tr>
   <td>下部</td>
   <td>ツリー内の別の場所に影響を与える可能性がある無効なエントリがリストされます（エントリの範囲を制限する対応する ACE を含む、特別なフィールド名で示されます）。または、指定されたパスや上位ノードで定義された別のエントリによって無効化されたエントリがリストされます。</td>
  </tr>
 </tbody>
</table>

![chlimage_1-112](assets/chlimage_1-112.png)

>[!NOTE]
>
>ページに対する権限が定義されていない場合、すべてのアクションが拒否されます。

アクセス制御リストの管理に関するレコメンデーションを次に示します。

* 権限を直接ユーザーに割り当てないでください。権限を割り当てるのはグループのみです。

  これにより、グループ数がユーザー数よりはるかに少なくなり、変動も少なくなるので、メンテナンスが簡素化されます。

* グループまたはユーザーがページの変更のみを行えるようにする場合は、作成または拒否の権限を付与しないでください。変更および読み取りの権限のみを付与します。
* 拒否は慎重に使用してください。可能な限り、許可のみを使用します。

  拒否を使用すると、想定した順序とは異なる順序で権限が適用された場合に、予想外の影響が及ぶ可能性があります。ユーザーが複数のグループのメンバーである場合、あるグループからの拒否ステートメントによって、別のグループからの許可ステートメントが取り消されたり、その逆の事象が発生したりする可能性があります。このような問題が発生した場合、概要を把握するのは難しく、予想外の結果になりかねません。しかし、許可を割り当てることで、このような矛盾は回避できます。

  アドビでは、[ベストプラクティス](#best-practices)を参照して、拒否ではなく許可を割り当てることをお勧めします。

いずれの権限を変更する場合でも、事前にその権限の仕組みと相互関係を理解しておく必要があります。AEM WCM における[アクセス権限の評価](/help/sites-administering/user-group-ac-admin.md#how-access-rights-are-evaluated)方法とアクセス制御リストの設定例については、CRX のドキュメントを参照してください。

### 権限 {#permissions}

権限を付与されたユーザーやグループは、AEM ページの AEM 機能にアクセスできます。

パス別の権限を参照するには、ノードを展開したり折りたたんだりします。権限の継承はルートノードまで追跡できます。

権限を許可または拒否するには、対応するチェックボックスをオンまたはオフにします。

![cqsecuritypermissionstab](assets/cqsecuritypermissionstab.png)

### 権限の詳細情報の表示 {#viewing-detailed-permission-information}

AEM には、グリッドビューだけでなく、特定のパスで選択されたユーザー／グループの権限の詳細ビューが用意されています。詳細ビューには、追加情報が表示されます。

情報の表示に加えて、現在のユーザーやグループをグループに含めたり、グループから除外したりすることもできます。 詳しくは、 [権限の追加時のユーザーまたはグループの追加](#adding-users-or-groups-while-adding-permissions). ここで行った変更は、詳細ビューの上部に即座に反映されます。

詳細表示にアクセスするには、「**権限**」タブで、選択したグループ／ユーザーおよびパスの「**詳細**」をクリックします。

![permissiondetails](assets/permissiondetails.png)

詳細は 2 つの部分に分かれています。

<table>
 <tbody>
  <tr>
   <td>上部</td>
   <td><p>ツリーグリッドに表示される情報を繰り返します。アクションごとに、そのアクションが許可されているか拒否されているかを示すアイコンが表示されます。</p>
    <ul>
     <li>アイコンなし = 宣言されたエントリなし</li>
     <li>（チェックマーク） = 宣言されたアクション（許可）</li>
     <li>（マイナス記号） = 宣言されたアクション（拒否）</li>
    </ul> </td>
  </tr>
  <tr>
   <td>下部</td>
   <td><p>次の操作を行うユーザーとグループのグリッドが表示されます。</p>
    <ul>
     <li>特定のパスのエントリを宣言する</li>
     <li>特定の許可可能なものまたはグループ</li>
    </ul> </td>
  </tr>
 </tbody>
</table>

### 他のユーザーへのなりすまし {#impersonating-another-user}

[別のユーザーとして実行する機能](/help/sites-authoring/user-properties.md#user-settings)では、ユーザーは別のユーザーに成り代わって作業を行うことができます。

つまり、ユーザーアカウントは、自分のアカウントで操作できる他のアカウントを指定できます。例えば、ユーザー B がユーザー A としての実行を許可されている場合、ユーザー B はユーザー A のアカウントの詳細をすべて使用してアクションを実行できます。

この機能を使用すると、偽装アカウントは、別のユーザーのアカウントを使用しているかのようにタスクを完了できます。例えば、ユーザーの不在時や過剰な量の作業を短期間だけ分担する場合などに便利です。

>[!NOTE]
>
>管理者以外のユーザーが別のユーザーとして実行するには、そのユーザー（上記の場合はユーザー B）に `/home/users` パスの読み取り権限が必要です。
>
>詳しくは、[AEM の権限](/help/sites-administering/security.md#permissions-in-aem)を参照してください。

>[!CAUTION]
>
>あるアカウントが別のアカウントとして実行する場合、その判別は非常に困難です。別のユーザーとして実行する機能の開始時と終了時には監査ログにエントリが記録されますが、その他のログファイル（アクセスログなど）には、その機能がイベントに対して実行されたという事実に関する情報が保持されません。そのため、ユーザー B がユーザー A として実行した場合、ユーザー A がすべてのイベントを実行しているように見えます。

>[!CAUTION]
>
>ページのロックは、別のユーザーとして実行している場合にも実行できます。ただし、この方法でロックされたページをロック解除できるのは、成り代わられたユーザーまたは管理者権限を持つユーザーのみです。
>
>実際にページのロック作業を行なったユーザーに成り代わっても、ページをロック解除できません。

### ベストプラクティス {#best-practices}

次に権限と特権を使用する場合のベストプラクティスを説明しています。

| ルール | 理由 |
|--- |--- |
| *グループを使用する* | アクセス権限をユーザーごとに割り当てないようにします。このアドバイスには、次のようないくつかの理由があります。<ul><li>グループ数よりもユーザー数の方がはるかに多く、グループを使用すると構造が簡素化されます。</li><li>グループはアカウント全体の概要を確認するのに役立ちます。</li> <li>グループを使用すると、継承が簡単になります。</li><li>ユーザーは頻繁に追加および削除されます。グループは長期的です。</li></ul> |
| *ポジティブに* | 常に「許可」ステートメントを使用してグループの権限を指定します（可能な限り）。「拒否」ステートメントの使用は避けてください。グループは順番に評価されます。この順番はユーザーごとに異なる方法で定義される可能性があります。つまり、ステートメントが実装および評価される順序は、ほとんど制御できない可能性があります。「許可」ステートメントのみを使用する場合、順序は関係ありません。 |
| *シンプルに* | 新しいインストールの設定時に時間を費やし、入念な検討を行うと、効果が期待できます。わかりやすい構造を適用することで、継続的なメンテナンスや管理が簡略化され、現在の担当者と今後の後任の担当者が実装されている内容を容易に把握できます。 |
| *テスト* | 練習のためのテストインストールを利用して、様々なユーザーとグループ間の関係を把握してください。 |
| *デフォルトのユーザー／グループ* | セキュリティ上の問題を防ぐために、必ずインストール直後にデフォルトのユーザーとグループを更新してください。 |

## ユーザーとグループの管理 {#managing-users-and-groups}

ユーザーには、システムを使用する人々と、そのシステムに対する要求を行う外部システムを使用する人々が含まれます。

グループはユーザーの集合です。

どちらも、セキュリティコンソール内のユーザー管理機能を使用して設定できます。

### セキュリティコンソールを使用したユーザー管理へのアクセス {#accessing-user-administration-with-the-security-console}

すべてのユーザー、グループおよび関連付けられている権限にアクセスするには、セキュリティコンソールを使用します。ここで説明する手順はすべて、このウィンドウで実行されます。

AEM WCM セキュリティにアクセスするには、次のいずれかの操作を行います。

* ようこそ画面または AEM の様々な場所で、セキュリティアイコンをクリックします。

![「AEM WCM セキュリティ」タブ](do-not-localize/wcmtoolbar.png)

* に直接移動します。 `https://<server>:<port>/useradmin`. 必ずAEMに管理者としてログインしてください。

次のウィンドウが表示されます。

![cqsecuritypage](assets/cqsecuritypage.png)

左側のツリーには、現在システムに存在するすべてのユーザーとグループが一覧表示されます。表示する列を選択したり、列の内容を並べ替えたりできます。また、列ヘッダーを新しい位置にドラッグして列の表示順序を変更することもできます。

![cqsecuritycolumncontext](assets/cqsecuritycolumncontext.png)

タブを使用すると、様々な設定にアクセスできます。

<!-- ??? in table below. -->

| タブ | 説明 |
|--- |--- |
| フィルターボックス | 一覧表示されたユーザーやグループまたはその両方をフィルタリングするためのメカニズム。詳しくは、[ユーザーとグループのフィルタリング](#filtering-users-and-groups)を参照してください。 |
| ユーザー非表示 | 一覧表示されているすべてのユーザーを非表示にして、グループだけを残すための切り替えスイッチです。詳しくは、[ユーザーとグループの非表示](#hiding-users-and-groups)を参照してください。 |
| グループ非表示 | 一覧表示されているすべてのグループを非表示にして、ユーザーだけを残すための切り替えスイッチです。詳しくは、[ユーザーとグループの非表示](#hiding-users-and-groups)を参照してください。 |
| 編集 | ユーザーやグループの作成と削除、アクティベートとアクティベート解除を行うことができるメニュー。 詳しくは、 [ユーザーとグループの作成](#creating-users-and-groups) および [ユーザーとグループの削除](#deleting-users-and-groups). |
| プロパティ | メール情報、説明および名前情報を含めることができるユーザーまたはグループの情報が一覧表示されます。また、ユーザーのパスワードを変更することもできます。[ユーザーとグループの作成](#creating-users-and-groups)、[ユーザーとグループのプロパティの変更](#modifying-user-and-group-properties)および[ユーザーパスワードの変更](#changing-a-user-password)を参照してください。 |
| グループ | 選択したユーザーまたはグループが属するすべてのグループが一覧表示されます。選択したユーザーまたはグループを追加のグループに割り当てたり、グループから削除したりできます。詳しくは、[グループ](#adding-users-or-groups-to-a-group)を参照してください。 |
| メンバー | グループについてのみ使用できます。特定のグループのメンバーが一覧表示されます。詳しくは、[メンバー](#members-adding-users-or-groups-to-a-group)を参照してください。 |
| 権限 | ユーザーまたはグループに権限を割り当てることができます。次の権限を制御できます。<ul><li>特定のページ／ノードに関連する権限。[権限の設定](#setting-permissions)を参照してください。 </li><li>ページの作成と削除および階層の変更に関連する権限。??? を使用すると、ページを作成および削除するための[権限を割り当てる](#settingprivileges)ことができます（階層の変更など）。</li><li>（通常は作成者から公開への）パスに従った[レプリケーション権限](#setting-replication-privileges)に関連する権限。</li></ul> |
| 実行 | 別のユーザーとしてアカウントを実行できます。あるユーザーが別のユーザーの代理として操作を行う必要がある場合に役立ちます。詳しくは、 [別のユーザーとして実行](#impersonating-another-user)を参照してください。 |
| 環境設定 | [グループまたはユーザーの環境設定](#setting-user-and-group-preferences)を指定します。例えば、言語の環境設定などです。 |

### ユーザーとグループのフィルタリング {#filtering-users-and-groups}

フィルター式を入力してリストをフィルタリングできます。これにより、式に一致しないすべてのユーザーとグループが非表示になります。また、[ユーザー非表示とグループ非表示](#hiding-users-and-groups)の各ボタンを使用してユーザーとグループを非表示にすることもできます。

ユーザーまたはグループをフィルターするには、次の手順に従います。

1. 左側のツリーリストの指定されたスペースにフィルター式を入力します。例えば、**admin** と入力すると、この文字列を含むすべてのユーザーとグループが表示されます。
1. 虫眼鏡をクリックしてリストをフィルタリングします。

   ![cqsecurityfilter](assets/cqsecurityfilter.png)

1. すべてのフィルターを削除する場合は、**x** をクリックします。

### ユーザーとグループの非表示 {#hiding-users-and-groups}

ユーザーやグループを非表示にする方法も、システム内のすべてのユーザーやグループのリストをフィルタリングする方法の 1 つです。切り替えメカニズムは 2 つあります。「ユーザーを非表示」をクリックすると、すべてのユーザーが表示から非表示になり、「グループを非表示」をクリックすると、すべてのグループが表示から非表示になります（ユーザーとグループの両方を同時に非表示にすることはできません）。フィルター式を使用してリストをフィルターする方法について詳しくは、[ユーザーとグループのフィルタリング](#filtering-users-and-groups)を参照してください。

ユーザーおよびグループを非表示にするには、次の手順に従います。

1. **セキュリティ**&#x200B;コンソールで、「**ユーザー非表示**」または「**グループ非表示**」をクリックします。選択したボタンがハイライト表示されます。

   ![cqsecurityhideusers](assets/cqsecurityhideusers.png)

1. ユーザーまたはグループを再度表示するには、対応するボタンをもう一度クリックします。

### ユーザーとグループの作成 {#creating-users-and-groups}

ユーザーまたはグループを作成するには、次の手順に従ってください。

1. **セキュリティ**&#x200B;コンソールのツリーリストで、「**編集**」をクリックし、「**ユーザーを作成**」または「**グループを作成**」をクリックします。

   ![cqseruityeditcontextmenu](assets/cqseruityeditcontextmenu.png)

1. ユーザーまたはグループのどちらを作成するかに従って、必要な詳細を入力します。

   * 「**ユーザーを作成**」を選択した場合は、ログイン ID、姓名、メールアドレスおよびパスワードを入力します。デフォルトでは、AEM は姓の最初の文字に基づいてパスを作成しますが、別のパスを選択することもできます。

   ![createuserdialog](assets/createuserdialog.png)

   * 「**グループを作成**」を選択した場合は、グループ ID と説明（オプション）を入力します。

   ![creategroupdialog](assets/creategroupdialog.png)

1. 「**作成**」をクリックします。作成したユーザーまたはグループがツリーリストに表示されます。

### ユーザーとグループの削除 {#deleting-users-and-groups}

ユーザーまたはグループを削除するには、次の手順に従ってください。

1. **セキュリティ**&#x200B;コンソールで、削除するユーザーまたはグループを選択します。複数の項目を削除する場合は、Shift キーまたは Ctrl キーを押しながらクリックして選択します。
1. 「**編集**」をクリックして、「削除」を選択します。ユーザーまたはグループを削除するかどうかを確認するメッセージが AEM WCM に表示されます。
1. 「**OK**」をクリックして確定またはキャンセルします。

### ユーザーおよびグループのプロパティの変更 {#modifying-user-and-group-properties}

ユーザーおよびグループのプロパティを変更するには、次の手順に従います。

1. **セキュリティ**&#x200B;コンソールで、変更するユーザーまたはグループの名前をダブルクリックします。

1. 「**プロパティ**」タブをクリックし、必要な変更を行なって「**保存**」をクリックします。

   ![cqsecurityuserprops](assets/cqsecurityuserprops.png)

>[!NOTE]
>
>ユーザーのプロパティの一番下にユーザーのパスが表示されます。このパスは変更できません。

### ユーザーパスワードの変更 {#changing-a-user-password}

以下の手順を使用して、ユーザーのパスワードを変更します。

>[!NOTE]
>
>セキュリティコンソールを使用して管理者パスワードを変更することはできません。 admin アカウントのパスワードを変更するには、 [ユーザーコンソール](/help/sites-administering/granite-user-group-admin.md#changing-the-password-for-an-existing-user) Granite Operations で提供される
>
>JEE 上で AEM Forms を使用している場合は、以下の手順を使用してパスワードを変更しないでください。JEE 上の AEM Forms Admin Console（/adminui）を使用してパスワードを変更します。

1. **セキュリティ**&#x200B;コンソールで、パスワードを変更するユーザーの名前をダブルクリックします。
1. 「**プロパティ**」タブをクリックします（まだアクティブでない場合）。
1. 「**パスワードを設定**」をクリックします。パスワードを設定ウィンドウが開きます。このウィンドウでパスワードを変更できます。

   ![cqsecurityuserpassword](assets/cqsecurityuserpassword.png)

1. 新しいパスワードを 2 回入力します。これらはクリアテキストで表示されないので、確認用です。一致しない場合は、エラーが表示されます。
1. 「**設定**」をクリックして、アカウントの新しいパスワードを有効にします。

### グループへのユーザーまたはグループの追加 {#adding-users-or-groups-to-a-group}

AEM では、次の 3 つの方法で既存のグループにユーザーまたはグループを追加できます。

* グループ内にいる場合、メンバー（ユーザーまたはグループ）を追加できます。
* メンバーの中にいる場合は、メンバーをグループに追加できます。
* 権限を操作する際に、グループにメンバーを追加できます。

### グループ - グループへのユーザーまたはグループの追加 {#groups-adding-users-or-groups-to-a-group}

「**グループ**」タブには、現在のアカウントが属するグループが表示されます。これを使用して、選択したアカウントをグループに追加できます。

1. グループに割り当てるアカウント（ユーザーまたはグループ）の名前をダブルクリックします。
1. 「**グループ**」タブをクリックします。アカウントが既に属しているグループのリストが表示されます。
1. ツリーリストで、アカウントに追加するグループの名前をクリックし、**グループ**&#x200B;ウィンドウにドラッグします。（複数のユーザーを追加する場合は、Shift キーまたは Ctrl キーを押しながら名前をクリックしてドラッグします）。

   ![cqsecurityaddusertogroup](assets/cqsecurityaddusertogroup.png)

1. 「**保存**」をクリックして変更を保存します。

### メンバー - グループへのユーザーまたはグループを追加 {#members-adding-users-or-groups-to-a-group}

「**メンバー**」タブはグループに対してのみ機能し、現在のグループに属するユーザーおよびグループが表示されます。これを使用して、アカウントをグループに追加できます。

1. メンバーを追加するグループの名前をダブルクリックします。
1. 「**メンバー**」タブをクリックします。このグループに既に属するメンバーのリストが表示されます。
1. ツリーリストで、グループに追加するメンバーの名前をクリックし、**メンバー**&#x200B;ウィンドウにドラッグします。（複数のユーザーを追加する場合は、Shift キーまたは Ctrl キーを押しながら名前をクリックしてドラッグします）。

   ![cqsecurityadduserasmember](assets/cqsecurityadduserasmember.png)

1. 「**保存**」をクリックして変更を保存します。

### 権限を追加する際のユーザーまたはグループの追加 {#adding-users-or-groups-while-adding-permissions}

特定のパスにあるグループにメンバーを追加するには：

1. ユーザーを追加するグループまたはユーザーの名前をダブルクリックします。

1. 「**権限**」タブをクリックします。

1. 権限を追加するパスに移動し、「**詳細**」をクリックします。詳細ウィンドウの下部に、そのページに対する権限を持つユーザーに関する情報が表示されます。

   ![chlimage_1-113](assets/chlimage_1-113.png)

1. 対象のパスに対する権限を追加するメンバーの&#x200B;**メンバー**&#x200B;列のチェックボックスをオンにします。権限を削除するメンバーのチェックボックスをオフにします。変更したセルに赤い三角形が表示されます。
1. 「**OK**」をクリックして、変更を保存します。

### グループからのユーザーまたはグループの削除 {#removing-users-or-groups-from-groups}

AEM では、次の 3 つの方法でユーザーまたはグループをグループから削除します。

* グループプロファイルで、メンバー（ユーザーまたはグループ）を削除できます。
* メンバープロファイルで、グループからメンバーを削除できます。
* 権限を操作している際に、グループからメンバーを削除できます。

### グループ - グループからのユーザーまたはグループの削除 {#groups-removing-users-or-groups-from-groups}

グループからユーザーまたはグループアカウントを削除するには：

1. グループから削除するグループまたはユーザーの名前をダブルクリックします。
1. 「**グループ**」タブをクリックします。選択したアカウントが属するグループが表示されます。
1. Adobe Analytics の **グループ** ウィンドウで、グループから削除するユーザーまたはグループの名前をクリックし、 **削除**. ( 複数のアカウントを削除する場合は、Shift キーまたは Ctrl キーを押しながら名前をクリックし、 **削除**.)

   ![cqsecurityremoveuserfromgrp](assets/cqsecurityremoveuserfromgrp.png)

1. 「**保存**」をクリックして変更を保存します。

### メンバー - グループからのユーザーまたはグループの削除 {#members-removing-users-or-groups-from-groups}

グループからアカウントを削除するには：

1. メンバーを削除するグループの名前をダブルクリックします。
1. 「**メンバー**」タブをクリックします。このグループに既に属するメンバーのリストが表示されます。
1. **メンバー**&#x200B;ウィンドウで、グループから削除するメンバーの名前をクリックし、「**削除**」をクリックします。（複数のユーザーを削除する場合は、Shift キーまたは Ctrl キーを押しながら名前をクリックし、「**削除**」をクリックします。）

   ![cqsecurityremovemember](assets/cqsecurityremovemember.png)

1. 「**保存**」をクリックして変更を保存します。

### 権限を追加する際のユーザーまたはグループの削除 {#removing-users-or-groups-while-adding-permissions}

特定のパスにあるグループからメンバーを削除するには：

1. ユーザーを削除するグループまたはユーザーの名前をダブルクリックします。

1. 「**権限**」タブをクリックします。

1. 権限を削除するパスに移動し、「**詳細**」をクリックします。詳細ウィンドウの下部に、そのページに対する権限を持つユーザーに関する情報が表示されます。

   ![chlimage_1-114](assets/chlimage_1-114.png)

1. 対象のパスに対する権限を追加するメンバーの&#x200B;**メンバー**&#x200B;列のチェックボックスをオンにします。権限を削除するメンバーのチェックボックスをオフにします。変更したセルに赤い三角形が表示されます。
1. 「**OK**」をクリックして、変更を保存します。

### ユーザー同期 {#user-synchronization}

デプロイメントが[パブリッシュファーム](/help/sites-deploying/recommended-deploys.md#tarmk-farm)であるとき、ユーザーとグループをすべてのパブリッシュノード間で同期する必要があります。

ユーザー同期と有効化の方法について詳しくは、[ユーザーの同期](/help/sites-administering/sync.md)を参照してください。

## 権限の管理 {#managing-permissions}

>[!NOTE]
>
>アドビでは、権限管理のための新しいタッチ UI ベースのプリンシパルビューが導入されました。使い方の詳細については、[このページ](/help/sites-administering/touch-ui-principal-view.md)を参照してください。

ここでは、権限（レプリケーション権限を含む）を設定する方法について説明します。

### 権限の設定 {#setting-permissions}

ユーザーは権限を使用して、特定のパスにあるリソースに対して特定のアクションを実行できます。権限にはページを作成または削除する機能も含まれます。

権限を追加、変更または削除するには：

1. **セキュリティ**&#x200B;コンソールで、権限を設定するユーザーまたはグループの名前をダブルクリックするか、[ノードを検索](#searching-for-nodes)します。

1. 「**権限**」タブをクリックします。

   ![cquserpermissions](assets/cquserpermissions.png)

1. ツリー・グリッドで、選択したユーザーまたはグループがアクションを実行できるようにするチェック・ボックスを選択するか、選択したユーザーまたはグループがアクションを実行できないようにするチェック・ボックスをオフにします。 詳しくは、 **詳細**.

1. 完了したら、「**保存**」をクリックします。

### レプリケーション権限の設定 {#setting-replication-privileges}

レプリケーション権限は、コンテンツを公開する権利で、グループとユーザーに対して設定できます。

>[!NOTE]
>
>* グループに適用されるレプリケーション権限は、そのグループ内のすべてのユーザーに適用されます。
>* ユーザーのレプリケーション権限は、グループのレプリケーション権限よりも優先されます。
>* 「許可」レプリケーション権限の方が、「拒否」レプリケーション権限よりも優先されます。 詳しくは、 [AEMの権限](#permissions-in-aem) を参照してください。
>

レプリケーション権限を設定するには、次の手順に従います。

1. リストからユーザーまたはグループを選択し、ダブルクリックして開き、「**権限**」をクリックします。
1. グリッドで、ユーザーにレプリケーション権限を設定するパスに移動するか、[ノードを検索](#searching-for-nodes)します。

1. 選択したパスの「**レプリケーション**」列で、チェックボックスをオンにして、対象のユーザーまたはグループのレプリケーション権限を追加します。または、チェックボックスをオフにして、レプリケーション権限を削除します。AEM では、変更を行った（未保存の）項目に赤い三角形が表示されます。

   ![cquserreplicatepermissions](assets/cquserreplicatepermissions.png)

1. 「**保存**」をクリックして変更を保存します。

### ノードの検索 {#searching-for-nodes}

権限を追加または削除する際に、ノードを参照または検索できます。

パス検索には、次の 2 つの異なるタイプがあります。

* パス検索 - 検索文字列が「/」で始まる場合、指定されたパスの直接サブノードを検索します。

![cqsecuritypathsearch](assets/cqsecuritypathsearch.png)

検索ボックスでは以下の操作を行うことができます。

| アクション | 動作 |
|--- |--- |
| 右向き矢印キー | 検索結果内のサブノードを選択します |
| 下向き矢印キー | 検索を再開します。 |
| Enter（Return）キー | サブノードを選択し、ツリーグリッドに読み込みます |

* フルテキスト検索 - 検索文字列が「/」で始まらない場合は、パス「/content」の下にあるすべてのノードに対してフルテキスト検索が実行されます。

![cqsecurityfulltextsearch](assets/cqsecurityfulltextsearch.png)

パス検索またはフルテキスト検索を実行するには：

1. セキュリティコンソールで、ユーザーまたはグループを選択して、「**権限**」タブをクリックします。

1. 「検索」ボックスに検索する用語を入力します。

### 別のユーザーとして実行 {#impersonating-users}

現在のユーザーとしての実行を許可する 1 人以上のユーザーを指定できます。つまり、指定されたユーザーは現在のユーザーのアカウント設定に切り替えて、そのユーザーの代理として操作を行うことができます。

元のユーザーが実行できないアクションが許可される可能性があるので、この機能を使用する際は注意が必要です。別のユーザーとして実行する場合は、元のユーザーとしてログインしていないと通知されます。

以下に示す様々なシナリオでこの機能を使用できます。

* あなたがオフィスにいない場合に、別の担当者があなたの代理として操作を行うことができます。この機能を使用すると、別の担当者があなたのアクセス権限を引き継ぐことができます。ユーザープロファイルを変更したり、パスワードを公開したりする必要はありません。
* デバッグの目的でこの機能を使用できます。例えば、アクセス権限が制限されているユーザーを Web サイトで検索する方法を確認できます。また、あるユーザーが技術的な問題に関して不満を持っている場合は、そのユーザーとして実行し、問題を診断して修正できます。

既存のユーザーとして実行するには：

1. ツリーリストで、他のユーザーが操作を代理するユーザーの名前を選択します。ダブルクリックして開きます。
1. 「**実行**」タブをクリックします。
1. 選択したユーザーとして実行することのできるユーザーをクリックします。ユーザーをリストから実行ウィンドウにドラッグします。リストに名前が表示されます。

   ![chlimage_1-115](assets/chlimage_1-115.png)

1. 「**保存**」をクリックします。

### ユーザーとグループの環境設定の指定 {#setting-user-and-group-preferences}

ユーザーとグループの環境設定（言語、ウィンドウ管理、ツールバーの環境設定を含む）を指定するには：

1. 環境設定を変更するユーザーまたはグループを左側のツリーで選択します。複数のユーザーまたはグループを選択するには、Ctrl キーまたは Shift キーを押しながら選択項目をクリックします。
1. 「**環境設定**」タブをクリックします。

   ![cqsecuritypreferences](assets/cqsecuritypreferences.png)

1. 必要に応じて、グループまたはユーザーの環境設定を変更し、完了したら「**保存**」をクリックします。

### ユーザーまたは管理者に他のユーザーの管理権限を付与するための設定 {#setting-users-or-administrators-to-have-the-privilege-to-manage-other-users}

ユーザーまたは管理者が他のユーザーを削除／アクティベート／アクティベート解除する権限を付与するための設定を行うには：

1. 他のユーザーを管理する権限を付与するユーザーを administrators グループに追加して、変更を保存します。

   ![cqsecurityaddmembertoadmin](assets/cqsecurityaddmembertoadmin.png)

1. ユーザーの「**権限**」タブで、「/」に移動します。「レプリケーション」列で、チェックボックスをオンにして「/」におけるレプリケーションを許可し、「**保存**」をクリックします。

   ![cqsecurityreplicatepermissions](assets/cqsecurityreplicatepermissions.png)

   これで、選択したユーザーがユーザーのアクティベート解除、アクティベート、削除および作成を行うことができます。

### プロジェクトレベルでの権限の拡張 {#extending-privileges-on-a-project-level}

アプリケーション専用の権限を実装する場合に、カスタム権限を実装するために確認しておく必要のある情報および CQ 全体でその権限を適用する方法を以下に示します。

階層の変更権限は、jcr-privileges の組み合わせでカバーされます。 レプリケーション権限の名前はです。 **crx:replicate** jcr リポジトリ上の他の権限と共に保存/評価されます。 ただし、jcr レベルでは適用されません。

カスタム権限の定義と登録は、正式に [Jackrabbit API](https://jackrabbit.apache.org/oak/docs/security/privilege.html) バージョン 2.4 以降 ( [JCR-2887](https://issues.apache.org/jira/browse/JCR-2887)) をクリックします。 その他の使用方法は、で定義されているように、JCR Access Control Management でカバーされます。 [JSR 283](https://jcp.org/en/jsr/detail?id=283) （第 16 条） さらに、Jackrabbit API は、いくつかの拡張を定義します。

権限の登録メカニズムは、**リポジトリ設定**&#x200B;の下の UI に反映されます。

新しい（カスタム）権限の登録は、リポジトリレベルで付与する必要がある組み込み権限によって保護されます。JCR: ac mgt api の「absPath」パラメーターとして「null」を渡す（詳しくは、jsr 333 を参照）。 デフォルトでは、 **admin** また、管理者のすべてのメンバーが、この権限を付与しています。

>[!NOTE]
>
>カスタム権限の検証と評価を実装で行う場合は、その権限が組み込みの権限の集合でない限り適用できません。
